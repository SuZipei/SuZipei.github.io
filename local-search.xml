<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>微积分复习</title>
    <link href="/2023/02/01/intrecovery/"/>
    <url>/2023/02/01/intrecovery/</url>
    
    <content type="html"><![CDATA[<p>因为开学要考试所以不得不复习.jpg</p><span id="more"></span><h1 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h1><h2 id="等价无穷小"><a href="#等价无穷小" class="headerlink" title="等价无穷小"></a>等价无穷小</h2><h2 id="导数公式"><a href="#导数公式" class="headerlink" title="导数公式"></a>导数公式</h2><h1 id="极限"><a href="#极限" class="headerlink" title="极限"></a>极限</h1><h2 id="数列极限"><a href="#数列极限" class="headerlink" title="数列极限"></a>数列极限</h2><h3 id="数列可以看成整变数的函数"><a href="#数列可以看成整变数的函数" class="headerlink" title="数列可以看成整变数的函数"></a>数列可以看成整变数的函数</h3><h3 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h3><p>$$<br>\lim_{n\to\infty}x_n=a\iff \forall \epsilon&gt;0,\exists N,当n&gt;N时,有|x_n-a|&lt;\epsilon<br>$$</p><h3 id="理解："><a href="#理解：" class="headerlink" title="理解："></a>理解：</h3><p>不管 $\epsilon$ 多么小，总会有 $|x_n-a|$ 比它小，所以在实际应用时可以限制 $\epsilon$ 的上界，但是不能限制它的下界。一般用 $\epsilon$ 来表示 $N$，说明不管 $\epsilon$ 怎么取，都有能找到一个 $N$。</p><h2 id="数列收敛"><a href="#数列收敛" class="headerlink" title="数列收敛"></a>数列收敛</h2><h3 id="如果数列收敛，那么数列的极限唯一"><a href="#如果数列收敛，那么数列的极限唯一" class="headerlink" title="如果数列收敛，那么数列的极限唯一"></a>如果数列收敛，那么数列的极限唯一</h3><p>证明：</p><p>假设有 $\lim_{n\to\infty}x_n=a$ 且 $\lim_{n\to\infty}x_n=b$  且 $a\neq b$</p><p>那么 $\forall\epsilon&lt;0,\exists N_1$ 满足当 $N&gt;N_1$ 时，$|x_n-a|&lt;\frac{\epsilon}2$ ,对于 $b$ 同样存在这样的 $N_2$</p><p>$0\le|a-b|\le|x-a|+|x-b|\le\epsilon,\epsilon$  是可以任意取的，所以 $a=b$</p><p>理解：</p><p>这里用 $\frac{\epsilon}2$ 的套路会比较常见，可以拆成两半然后每一半是 $\frac{\epsilon}2$，最后拼出来一个 $\epsilon$ 可以证明极限。</p><h3 id="如果数列收敛，那么数列一定有界，反之不一定成立"><a href="#如果数列收敛，那么数列一定有界，反之不一定成立" class="headerlink" title="如果数列收敛，那么数列一定有界，反之不一定成立"></a>如果数列收敛，那么数列一定有界，反之不一定成立</h3><h3 id="数列收敛等价于任意子序列都收敛"><a href="#数列收敛等价于任意子序列都收敛" class="headerlink" title="数列收敛等价于任意子序列都收敛"></a>数列收敛等价于任意子序列都收敛</h3><h2 id="函数极限"><a href="#函数极限" class="headerlink" title="函数极限"></a>函数极限</h2><h3 id="函数趋于无穷大的极限"><a href="#函数趋于无穷大的极限" class="headerlink" title="函数趋于无穷大的极限"></a>函数趋于无穷大的极限</h3><p>定义：</p><p>$$<br>\lim_{x\to\infty}f(x)=a\iff \forall \epsilon&gt;0,\exists X 使得当x&gt;|X|时，有|f(x)-A|&lt;\epsilon<br>$$</p><h3 id="函数趋于特定值的极限"><a href="#函数趋于特定值的极限" class="headerlink" title="函数趋于特定值的极限"></a>函数趋于特定值的极限</h3><p>定义</p><p>$$<br>\lim_{x\to x_0}f(x)=a\iff \forall \epsilon&gt;0,\exists \delta 使得|x-x_0|&lt; \delta 时,有|f(x)-A|&lt;\epsilon<br>$$</p><p>例：证明 $\lim_{x\to x_0}\sqrt{x}=\sqrt{x_0}$</p><p>这种证明需要使用定义，通过考虑 $|f(x)-A|$ 的值来确定 $\delta$ 的值。</p><p>$|\sqrt{x}-\sqrt{x_0}|=|\frac{x-x_0}{\sqrt{x}+\sqrt{x_0}}|\le\frac{1}{\sqrt{x_0}}|x-x_0|$</p><p>如果让 $|\sqrt{x}-\sqrt{x_0}|&lt;\epsilon$，只需要让 $|x-x_0|&lt;\epsilon\sqrt{x_0}$</p><p>故 $\delta$ 可以取 $\epsilon\sqrt{x_0}$，这里还有一个坑，当 $\epsilon$ 比较大的时候，$\delta$ 也会跟着变大，但是根据定义，我们考察的是 $x_0$ 的一个邻域 $[x_0-\delta,x_0+\delta]$，如果 $\delta$ 超过了 $x_0$ 会出现定义域溢出的情况，此时 $\epsilon&gt;\sqrt{x_0}$ ，一种做法是限制 $\epsilon&lt;\sqrt{x_0}$，限制上界我们是可以做到的，另一种做法是让 $\delta$和 $x_0$ 取最小值，这样的话也是成立的。</p><h3 id="特定值极限存在的条件"><a href="#特定值极限存在的条件" class="headerlink" title="特定值极限存在的条件"></a>特定值极限存在的条件</h3><p>两个单侧极限都存在并且都相等。</p><h2 id="无穷小与无穷大"><a href="#无穷小与无穷大" class="headerlink" title="无穷小与无穷大"></a>无穷小与无穷大</h2><h3 id="无穷小"><a href="#无穷小" class="headerlink" title="无穷小"></a>无穷小</h3><p>定义：在某一变化过程中，以0为极限的变量称为无穷小量。</p><p>运算法则：</p><ol><li>无穷小与无穷小和差积都是无穷小</li><li>无穷小和常数的乘积为无穷小</li><li><strong>有限个</strong>无穷小的和差积都是无穷小</li></ol><h3 id="高阶无穷小"><a href="#高阶无穷小" class="headerlink" title="高阶无穷小"></a>高阶无穷小</h3><p>同阶无穷小：若 $\lim \frac{\alpha}{\beta}=c\ne 0$，则称 $\alpha$ 和 $\beta$ 为同阶无穷小。</p><p>等价无穷小：若 $\lim \frac{\alpha}{\beta}=1$，则称 $\alpha$ 和 $\beta$ 为等价无穷小，记作 $\alpha \sim \beta$。</p><p>高阶无穷小：若 $\lim \frac{\alpha}{\beta}=0$，则称 $\alpha$ 是 $\beta$ 的高阶无穷小，记作 $\alpha=o(\beta)$。</p><p>$k$ 阶无穷小：若 $\lim \frac{\alpha}{\beta^k}=c$，则称 $\alpha$ 是 $\beta$ 的 $k$ 阶无穷小。</p><p>在求极限时等价无穷小可以互相替换，证明如下</p><p>设 $\gamma$ 是 $\alpha$ 的等价无穷小，那么 $\lim\frac{\alpha}{\beta}=\lim\frac{\alpha}\gamma\frac{\gamma}{\beta}=\lim\frac{\gamma}{\beta}$</p><h3 id="无穷大"><a href="#无穷大" class="headerlink" title="无穷大"></a>无穷大</h3><p>定义：在某一变化过程中，给定一个数，<strong>无论</strong>它多么大，该变量都比这个数大，称这个变量为无穷大量。</p><h2 id="极限存在准则"><a href="#极限存在准则" class="headerlink" title="极限存在准则"></a>极限存在准则</h2><h3 id="连续函数在某一点的极限是在该点的函数值。"><a href="#连续函数在某一点的极限是在该点的函数值。" class="headerlink" title="连续函数在某一点的极限是在该点的函数值。"></a>连续函数在某一点的极限是在该点的函数值。</h3><h3 id="重要极限"><a href="#重要极限" class="headerlink" title="重要极限"></a>重要极限</h3><p>$$<br>\lim_{x\to 0}\frac{\sin x}{x}=1<br>$$</p><p>证明：</p><p>由 $\sin x&lt;x&lt;\tan x$，可得 $1&lt;\frac{x}{\sin x}&lt;\frac{1}{\cos x}$</p><p>由夹逼准则，可知原式极限为 $1$</p><p>$$<br>\lim_{x\to \infty}(1+\frac{1}x)^x=e<br>$$</p><p>证明：</p><p>有空再补（</p><p>大概过程是先由整数变量定义了自然对数底数 $e$ ，然后再证明小数的极限也是 $e$ 。</p><h3 id="数列单调有界，则数列存在极限"><a href="#数列单调有界，则数列存在极限" class="headerlink" title="数列单调有界，则数列存在极限"></a>数列单调有界，则数列存在极限</h3><p>该定理可以用于证明数列存在极限，之后可以设极限为未知量，然后通过已知关系代换得到极限。</p><h2 id="函数的连续性"><a href="#函数的连续性" class="headerlink" title="函数的连续性"></a>函数的连续性</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>$$<br>\forall \epsilon&gt;0,\exists \delta&gt;0,当|x-x_0|&lt;\delta时,有|f(x)-f(x_0)|&lt;\epsilon<br>$$</p><p>感性理解一下就是在这个点的时候函数有定义并且不断开。</p><h2 id="函数的间断性"><a href="#函数的间断性" class="headerlink" title="函数的间断性"></a>函数的间断性</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><p>有三种情况，没有定义，极限不存在，或者极限不等于函数值。</p><h3 id="第一类间断点"><a href="#第一类间断点" class="headerlink" title="第一类间断点"></a>第一类间断点</h3><p>可去间断点：函数在某点没定义，例如 $f(x)=\frac{\sin x}x$ 在 $x=0$ 的时候没定义，但是极限是 $1$，此时如果补充定义 $f(0)=1$，那么该函数连续，$x=0$ 称为可取间断点。</p><p>跳跃间断点：函数在某点断开了，即左右极限<strong>都存在</strong>但是不相等。</p><p>总结：两侧极限都存在的间断点。</p><h3 id="第二类间断点"><a href="#第二类间断点" class="headerlink" title="第二类间断点"></a>第二类间断点</h3><p>无穷间断点：顾名思义，极限为无穷。</p><p>震荡间断点：不存在极限，例如 $f(x)=\sin\frac{1}{x}$。</p><p>总结：两侧极限不都存在的间断点。</p><h2 id="有界闭区间函数性质"><a href="#有界闭区间函数性质" class="headerlink" title="有界闭区间函数性质"></a>有界闭区间函数性质</h2><h3 id="零点定理"><a href="#零点定理" class="headerlink" title="零点定理"></a>零点定理</h3><p>设函数 $f(x)$ 在有界闭区间 $[a,b]$ 上连续，如果 $f(a)\cdot f(b)&lt;0$，则 $f(x)$ 在开区间 $(a,b)$ 内至少有一个零点。</p><h3 id="介值定理"><a href="#介值定理" class="headerlink" title="介值定理"></a>介值定理</h3><p>设函数 $f(x)$ 在有界闭区间 $[a,b]$ 上连续，如果 $f(a)=A,f(b)=B$，则 $f(x)=C\in(A,B)$ 在开区间 $(a,b)$ 上至少有一个解。</p><h1 id="导数与微分"><a href="#导数与微分" class="headerlink" title="导数与微分"></a>导数与微分</h1><h2 id="导数初步"><a href="#导数初步" class="headerlink" title="导数初步"></a>导数初步</h2><h3 id="切线的重新定义"><a href="#切线的重新定义" class="headerlink" title="切线的重新定义"></a>切线的重新定义</h3><p>割线的极限位置定义为切线。</p><h3 id="导数定义"><a href="#导数定义" class="headerlink" title="导数定义"></a>导数定义</h3><p>函数在某一个位置的瞬时变化率。</p><p>形式化的来讲，函数 $y=f(x)$ 在 $x_0$ 处可导，导数记作 $f’(x)$</p><p>$$<br>f’(x_0)=\lim_{\Delta x\to 0}\frac{\Delta y}{\Delta x}=\lim_{\Delta x\to 0}\frac{f(x_0+\Delta x)-f(x_0)}{\Delta x}<br>$$</p><p>导数的写法有很多种，不过本质上都是 $\frac{\Delta y}{\Delta x}$ 。</p><h3 id="微分定义"><a href="#微分定义" class="headerlink" title="微分定义"></a>微分定义</h3><p>函数在某一位置的瞬时变化值。</p><p>导数考察的是变化的快慢，而微分考虑的是变化的值。</p><p>微分记作 $\mathrm{d} y=A\Delta x$</p><h3 id="微分与导数的联系"><a href="#微分与导数的联系" class="headerlink" title="微分与导数的联系"></a>微分与导数的联系</h3><p>可微一定可导，可导一定可微</p><p>连续不一定可导，可导一定连续</p><p>导数和微分可以互相转化，$\mathrm{d}y=y’\mathrm{d}x$</p><h2 id="微分和求导的法则"><a href="#微分和求导的法则" class="headerlink" title="微分和求导的法则"></a>微分和求导的法则</h2><h3 id="四则运算"><a href="#四则运算" class="headerlink" title="四则运算"></a>四则运算</h3><p>微分和求导相似，这里只写求导。</p><p>$[u(x)+v(x)]’=u’(x)+v’(x)$</p><p>$[u(x)-v(x)]’=u’(x)-v’(x)$</p><p>$[u(x)v(x)]’=u(x)v’(x)+u’(x)v(x)$</p><p>$[\frac{u(x)}{v(x)}]’=\frac{u’(x)v(x)-u(x)v’(x)}{v^2(x)}$</p><h3 id="复合运算"><a href="#复合运算" class="headerlink" title="复合运算"></a>复合运算</h3><p>$f’(g(x))=g’(x)f’(g(x))$</p><p>或者用链式法则，对其中每个函数分别求导。</p><h3 id="高阶导数"><a href="#高阶导数" class="headerlink" title="高阶导数"></a>高阶导数</h3><p>主要涉及到莱布尼茨公式</p><p>$$<br>(uv)^{(n)}=\sum_{k=0}^n\binom{n}{k}u^{(n-k)}v^k<br>$$</p><h3 id="隐函数求导"><a href="#隐函数求导" class="headerlink" title="隐函数求导"></a>隐函数求导</h3><p>主要涉及到无法表示成 $y=f(x)$ 的形式的函数。</p><p>此时要考虑到 $y$ 是 $x$ 的函数，求导时要注意含有 $y$ 的复合函数求导。</p><h3 id="参数方程求导"><a href="#参数方程求导" class="headerlink" title="参数方程求导"></a>参数方程求导</h3><p>$$<br>\begin{cases}<br>x=\phi(t)\<br>y=\Phi(t)<br>\end{cases}<br>$$</p><p>用参数代换一下就可以了</p><p>$$<br>\frac{\mathrm{d}y}{\mathrm{d}x}=\frac{\mathrm{d}y}{\mathrm{d}t}\frac{\mathrm{d}t}{\mathrm{d}x}<br>$$</p><h2 id="微分方程"><a href="#微分方程" class="headerlink" title="微分方程"></a>微分方程</h2><h1 id="积分"><a href="#积分" class="headerlink" title="积分"></a>积分</h1><h2 id="定积分"><a href="#定积分" class="headerlink" title="定积分"></a>定积分</h2><h3 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h3><p>设 $f(x)$ 在区间 $[a,b]$ 上有若干分点</p><p>$$<br>a=x_0\le x_1\le x_2\dots\le x_{n-1}\le x_{n}=b<br>$$</p><p>记 $\Delta x_i=x_i-x_{i-1},\lambda=\max{\Delta x_i}$</p><p>$$<br>I=\lim_{\lambda\to 0}\sum_{i=1}^nf(x_i)\Delta x_i=\int_a^bf(x)\mathrm{d}x<br>$$  </p><p>注意到无论如何取分点，当 $\lambda\to 0$ 的时候，$I$ 的值固定不变，我们称之为积分和，也叫黎曼和。</p><p>为了便于计算，一般分点都是取等分点。</p><p>有一些性质如果需要证明的话用定义去证明比较好证，因为定义把积分拆成了可以求和的形式。</p><h3 id="定积分中值定理"><a href="#定积分中值定理" class="headerlink" title="定积分中值定理"></a>定积分中值定理</h3><p>若 $f(x)$ 在 $[a,b]$ 上连续，则至少有一点 $\xi\in [a,b]$，使得</p><p>$$<br>\int_a^bf(x)\mathrm{d}x=f(\xi)(b-a)<br>$$</p><h3 id="微积分基本公式"><a href="#微积分基本公式" class="headerlink" title="微积分基本公式"></a>微积分基本公式</h3><p>定义 $f(x)$ 的原函数 $F(x)$ 满足条件 $F’(x)=f(x)$</p><p>有 $\int_a^b=F(b)-F(a)$，这个式子称为牛顿-莱布尼茨公式，也是微积分基本公式。</p><h2 id="不定积分"><a href="#不定积分" class="headerlink" title="不定积分"></a>不定积分</h2><h3 id="定义-3"><a href="#定义-3" class="headerlink" title="定义"></a>定义</h3><p>上面提到了一个函数的原函数定义，而不定积分就是用来求函数的原函数。</p><p>我们将 $f(x)$ 的全体原函数 $F(x)$ 记作 $f(x)$ 的不定积分。</p><p>$$<br>\int f(x)=F(x)+C<br>$$</p><h3 id="基本积分表"><a href="#基本积分表" class="headerlink" title="基本积分表"></a>基本积分表</h3><p>参考开头的导数表。</p><h2 id="换元积分"><a href="#换元积分" class="headerlink" title="换元积分"></a>换元积分</h2><h3 id="第一类换元积分法"><a href="#第一类换元积分法" class="headerlink" title="第一类换元积分法"></a>第一类换元积分法</h3><p>也叫凑微分法，本质是整体代换，改变微分的变量。</p><p>$$<br>\int f(\varphi(x))\varphi’(x) \mathrm{d}x=\int f(\varphi)\mathrm{d}\varphi(x)=[\int f(u)\mathrm{d}u]_{u=\varphi(x)}<br>$$</p><h3 id="第二类换元积分法"><a href="#第二类换元积分法" class="headerlink" title="第二类换元积分法"></a>第二类换元积分法</h3><p>利用反函数进行代换。</p><p>$$<br>\int f(x) \mathrm{d}x=[\int f(\phi(t))\phi’(t)\mathrm{d}x]_{x=\phi(t)}<br>$$</p><h3 id="利用换元进行等式的证明"><a href="#利用换元进行等式的证明" class="headerlink" title="利用换元进行等式的证明"></a>利用换元进行等式的证明</h3><p>证明<br>$$<br>\int_{0}^\pi xf(\sin x)\mathrm{d}x=\frac{\pi}2\int_{0}^\pi f(\sin x)\mathrm{d}x<br>$$</p><p>$$<br>\begin{aligned}<br>\int_{0}^\pi xf(\sin x)\mathrm{d}x &amp; = \int_{\pi}^0 (\pi-t)f(\sin (\pi-t))\mathrm{d}{(\pi-t)} \  &amp; =  \int_{0}^{\pi}\pi f(\sin t)\mathrm{d}t-\int_{0}^{\pi}tf(\sin t)\mathrm{d}t\&amp; =\int_{0}^{\pi}\pi f(\sin x)\mathrm{d}x-\int_{0}^{\pi}xf(\sin x)\mathrm{d}x<br>\end{aligned}<br>$$</p><p>然后移项一下就得到了，</p><p>这里的证明主要是通过换元得到一个和原来形式相同的式子，而积分变量是可以随意替换的，所以两个式子等价。</p><p>这个式子的证明告诉我们，如果积分区间是 $[0,\pi]$ ，并且含有 $x$，可以直接把 $x$ 去掉用 $\frac{\pi}2$ 来代替。</p><p>证明</p><p>$$<br>\int_{a}^{a+T}f(x)\mathrm{d}x=\int_{0}^Tf(x)\mathrm{d}x<br>$$</p><p>$$<br>\begin{aligned}<br>\int_{a}^{a+T}f(x)\mathrm{d}x &amp; = \int_{a}^{0}f(x)\mathrm{d}x+\int_{0}^{T}f(x)\mathrm{d}x+\int_{T}^{a+T}f(x)\mathrm{d}x\&amp;=\int_{a}^{0}f(x)\mathrm{d}x+\int_{0}^{T}f(x)\mathrm{d}x+\int_{0}^{a}f(x)\mathrm{d}x\&amp;= \int_{0}^{T}f(x)\mathrm{d}x<br>\end{aligned}<br>$$</p><p>这个证明是一个显然的结论，不过具体的过程书写下来还是有些地方不太清楚，这种证明可以把原积分式子拆掉，然后证明一些余项加起来是 $0$。</p><h2 id="分部积分"><a href="#分部积分" class="headerlink" title="分部积分"></a>分部积分</h2><h3 id="定义-4"><a href="#定义-4" class="headerlink" title="定义"></a>定义</h3><p>$$<br>(uv)’=u’v+uv’\<br>u’v=(uv)’-uv’\<br>\int u’v=uv-\int uv’\<br>\int v\mathrm{d}u=uv-\int u\mathrm{d}v<br>$$</p><h3 id="重要推论"><a href="#重要推论" class="headerlink" title="重要推论"></a>重要推论</h3><p>$$<br>\begin{aligned}<br>I_n &amp;= \int_{0}^{\frac{\pi}2}sin^nx\mathrm{d}x=\int_{0}^{\frac{\pi}2}cos^nx\mathrm{d}x\<br>&amp;=\begin{cases}<br>    \frac{n-1}n \cdot\frac{n-3}{n-2}\dots\frac{3}4\frac{1}2\frac{\pi}2, n为偶数\<br>    \frac{n-1}n \cdot\frac{n-3}{n-2}\dots\frac{4}5\frac{2}3, n为奇数<br>\end{cases}<br>\end{aligned}<br>$$</p><p>证明是直接分部积分即可。</p><h2 id="有理函数的积分"><a href="#有理函数的积分" class="headerlink" title="有理函数的积分"></a>有理函数的积分</h2><h3 id="定义-5"><a href="#定义-5" class="headerlink" title="定义"></a>定义</h3><p>两个多项式的商 $\frac{P(x)}{Q(x)}$，称为有理分式，下面证明这种分式一定可积。</p><h3 id="拆分"><a href="#拆分" class="headerlink" title="拆分"></a>拆分</h3><p>通过多项式除法可以将上述分式拆分成多项式和一个真分式的和，多项式的积分是容易求得的，只考虑真分式如何积分。</p><p>对于 $\frac{P(x)}{Q(x)}$，对 $Q(x)$ 在<strong>实数</strong>范围内进行因式分解，最后得到的式子只有两种类型，$(x-a)^k$ 和 $(x^2+px+q)^l$。</p><p>对于 $(x-a)^k$ 进行拆分，可以拆成 $k$ 个分式的和</p><p>$$<br>\frac{A_1}{(x-a)}+\frac{A_2}{(x-a)^2}+\dots+\frac{A_3}{(x-a)^{k-1}}+\frac{A_2}{(x-a)^k}<br>$$</p><p>对于 $(x^2+px+q)^l$ 进行拆分，可以拆分成 $l$ 个分式的和</p><p>$$<br>\frac{M_1x+N_1}{(x^2+px+q)}+\frac{M_2x+N_2}{(x^2+px+q)^2}+\dots+\frac{M_{l-1}x+N_{l-1}}{(x^2+px+q)^{l-1}}+\frac{M_lx+N_l}{(x^2+px+q)^l}<br>$$</p><p>于是只要解决上述分式的积分，就能够完成对有理函数的积分</p><h3 id="积分-1"><a href="#积分-1" class="headerlink" title="积分"></a>积分</h3><p>首先解决第一种类型的，这个比较好解决</p><p>$$<br>\int \frac{A_k}{(x-a)^k}\mathrm{d}x=A_k\int \frac{\mathrm{d}(x-a)}{(x-a)^k}=\frac{A_k}{1-k}(x-a)^{1-k}<br>$$</p><p>然后是第二种类型的积分</p><p>先解决分子中的一次项，只需要配凑一下常数，用第一类换元积分即可。</p><p>对于常数项，配凑成 $\frac{1}{x^2+1}$ 的形式然后积分即可。</p><p>注意如果 $l&gt;1$ ,则需要使用分部积分进行降幂。</p><h3 id="可化为有理函数的积分"><a href="#可化为有理函数的积分" class="headerlink" title="可化为有理函数的积分"></a>可化为有理函数的积分</h3><p>如果是三角函数的积分，可以使用万能公式进行代换</p><p>如果是根式，可以直接换元然后升幂</p><p>如果分母次幂比较大，可以进行倒代换</p><h2 id="反常积分"><a href="#反常积分" class="headerlink" title="反常积分"></a>反常积分</h2><h3 id="无穷限上的反常积分"><a href="#无穷限上的反常积分" class="headerlink" title="无穷限上的反常积分"></a>无穷限上的反常积分</h3><p>$$<br>\int_{a}^{+\infty}f(x)\mathrm{d}x=\lim_{t\to+\infty}\int_{a}^{t}f(x)\mathrm{d}x<br>$$</p><p>若该极限存在，则说明反常积分存在，也称收敛，否则不存在，也称发散。</p><p>易错，$\int_{-\infty}^{+\infty}\frac{1}{x}\mathrm{d}x=0$</p><p>这个反常积分并不存在。</p><blockquote><p>你只会思考它的值是多少，而并不关注它是否存在</p></blockquote><h3 id="无界函数的反常积分"><a href="#无界函数的反常积分" class="headerlink" title="无界函数的反常积分"></a>无界函数的反常积分</h3><p>和上面一样，只是由无穷改为了某个数。</p><h1 id="微分方程-1"><a href="#微分方程-1" class="headerlink" title="微分方程"></a>微分方程</h1>]]></content>
    
    
    <categories>
      
      <category>数学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>杂题选做</title>
    <link href="/2023/01/10/problem1/"/>
    <url>/2023/01/10/problem1/</url>
    
    <content type="html"><![CDATA[<h1 id="凌乱平衡树"><a href="#凌乱平衡树" class="headerlink" title="凌乱平衡树"></a>凌乱平衡树</h1><blockquote><p>给定两棵 $Treap$，每次将某棵树上的某个点 $rotate$，然后将两棵树合并，询问每次合并后所有点的深度和 。</p></blockquote><p>首先深度和显然可以先一遍 $dfs$ 处理出来，然后计算两棵树原来的深度和，之后在合并的时候计算额外的贡献即可 。</p><p>在合并的时候只有左侧树的右链和右侧树的左链有用，所以只需要维护这两个链即可，那么本质上是序列的问题，考虑一次合并的时候，如果当前左侧点对应的子树大小为 $siz_1$ ，右侧子树大小为 $siz_2$，那么如果将左侧子树作为根，那么答案加上 $siz_2$ 否则答案加上 $siz_1$，所以只需要考虑当前点贡献多少次即可，不难发现贡献是一个区间的形式，所以直接用线段树维护 。</p><p>注意几点:</p><ul><li>旋转时记得修改原来树的贡献</li><li>修改关键链上的点对应线段树的权值</li><li>修改贡献后记得考虑下一个点的修改</li><li>极大值要设置的大一些</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">10</span>;<br>ll res;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Treap</span>&#123;<br><span class="hljs-type">int</span> n,rt,ch[N][<span class="hljs-number">2</span>],fa[N],siz[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint u)</span></span>&#123;<br><span class="hljs-keyword">if</span>(!u)<span class="hljs-keyword">return</span> ;<br><span class="hljs-built_in">dfs</span>(ch[u][<span class="hljs-number">0</span>]);<br><span class="hljs-built_in">dfs</span>(ch[u][<span class="hljs-number">1</span>]);<br>siz[u]=siz[ch[u][<span class="hljs-number">0</span>]]+siz[ch[u][<span class="hljs-number">1</span>]]+<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;ch[i][<span class="hljs-number">0</span>],&amp;ch[i][<span class="hljs-number">1</span>]);<br>fa[ch[i][<span class="hljs-number">0</span>]]=fa[ch[i][<span class="hljs-number">1</span>]]=i;<br>&#125;<br>rt=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span>(fa[rt])rt=fa[rt];<br><span class="hljs-built_in">dfs</span>(rt);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>res+=siz[i];<br>&#125;<br>&#125;t1,t2;<br>set&lt;<span class="hljs-type">int</span>&gt; s1,s2;<br><span class="hljs-type">int</span> val1[N&lt;&lt;<span class="hljs-number">2</span>],val2[N&lt;&lt;<span class="hljs-number">2</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update1</span><span class="hljs-params">(rint rt,rint l,rint r,rint pos,rint v)</span></span>&#123;<br>val1[rt]+=v;<br><span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> ;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(pos&lt;=mid)<span class="hljs-built_in">update1</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,pos,v);<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">update1</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,pos,v);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update2</span><span class="hljs-params">(rint rt,rint l,rint r,rint pos,rint v)</span></span>&#123;<br>val2[rt]+=v;<br><span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> ;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(pos&lt;=mid)<span class="hljs-built_in">update2</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,pos,v);<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">update2</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,pos,v);<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">query1</span><span class="hljs-params">(rint rt,rint l,rint r,rint cl,rint cr)</span></span>&#123;<br><span class="hljs-keyword">if</span>(!val1[rt])<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=l&amp;&amp;r&lt;=cr)<span class="hljs-keyword">return</span> val1[rt];<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=mid)res+=<span class="hljs-built_in">query1</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,cl,cr);<br><span class="hljs-keyword">if</span>(cr&gt;mid)res+=<span class="hljs-built_in">query1</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,cl,cr);<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">query2</span><span class="hljs-params">(rint rt,rint l,rint r,rint cl,rint cr)</span></span>&#123;<br><span class="hljs-keyword">if</span>(!val2[rt])<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=l&amp;&amp;r&lt;=cr)<span class="hljs-keyword">return</span> val2[rt];<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=mid)res+=<span class="hljs-built_in">query2</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,cl,cr);<br><span class="hljs-keyword">if</span>(cr&gt;mid)res+=<span class="hljs-built_in">query2</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,cl,cr);<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-type">bool</span> vis1[N],vis2[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">rotate1</span><span class="hljs-params">(rint x)</span></span>&#123;<br>rint y=t1.fa[x];rint z=t1.fa[y];<br>res-=t1.siz[y];res-=t1.siz[x];<br><span class="hljs-keyword">if</span>(vis1[y])&#123;<br><span class="hljs-built_in">update1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t1.siz[y],<span class="hljs-number">-1</span>);<br>rll val=<span class="hljs-built_in">query2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t1.siz[y]+<span class="hljs-number">1</span>,*s1.<span class="hljs-built_in">upper_bound</span>(t1.siz[y]));<br>res-=t1.siz[y]*val;<br>res+=(*--s1.<span class="hljs-built_in">find</span>(t1.siz[y]))*val;<br>res-=*--s2.<span class="hljs-built_in">upper_bound</span>(t1.siz[y]);<br>s1.<span class="hljs-built_in">erase</span>(t1.siz[y]);<br><span class="hljs-keyword">if</span>(vis1[x])&#123;<br><span class="hljs-built_in">update1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t1.siz[x],<span class="hljs-number">-1</span>);<br>val=<span class="hljs-built_in">query2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t1.siz[x]+<span class="hljs-number">1</span>,*s1.<span class="hljs-built_in">upper_bound</span>(t1.siz[x]));<br>res-=t1.siz[x]*val;<br>res+=(*--s1.<span class="hljs-built_in">find</span>(t1.siz[x]))*val;<br>res-=*--s2.<span class="hljs-built_in">upper_bound</span>(t1.siz[x]);<br>s1.<span class="hljs-built_in">erase</span>(t1.siz[x]);<br>&#125;<br>&#125;<br>rint k=t1.ch[y][<span class="hljs-number">1</span>]==x;<br>t1.ch[z][t1.ch[z][<span class="hljs-number">1</span>]==y]=x;t1.fa[x]=z;<br>t1.ch[y][k]=t1.ch[x][!k];t1.fa[t1.ch[x][!k]]=y;<br>t1.ch[x][!k]=y;t1.fa[y]=x;<br>t1.siz[y]=t1.siz[t1.ch[y][<span class="hljs-number">0</span>]]+t1.siz[t1.ch[y][<span class="hljs-number">1</span>]]+<span class="hljs-number">1</span>;<br>t1.siz[x]=t1.siz[t1.ch[x][<span class="hljs-number">0</span>]]+t1.siz[t1.ch[x][<span class="hljs-number">1</span>]]+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(vis1[y])&#123;<br><span class="hljs-built_in">update1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t1.siz[x],<span class="hljs-number">1</span>);<br><span class="hljs-keyword">if</span>(vis1[x])&#123;<br>s1.<span class="hljs-built_in">insert</span>(t1.siz[x]);<br>vis1[y]=<span class="hljs-number">0</span>;<br>rll val=<span class="hljs-built_in">query2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t1.siz[x]+<span class="hljs-number">1</span>,*s1.<span class="hljs-built_in">upper_bound</span>(t1.siz[x]));<br>res+=t1.siz[x]*val;<br>res-=(*--s1.<span class="hljs-built_in">find</span>(t1.siz[x]))*val;<br>res+=*--s2.<span class="hljs-built_in">upper_bound</span>(t1.siz[x]);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>s1.<span class="hljs-built_in">insert</span>(t1.siz[y]);<br>rll val=<span class="hljs-built_in">query2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t1.siz[y]+<span class="hljs-number">1</span>,*s1.<span class="hljs-built_in">upper_bound</span>(t1.siz[y]));<br>res+=t1.siz[y]*val;<br>res-=(*--s1.<span class="hljs-built_in">find</span>(t1.siz[y]))*val;<br>res+=*--s2.<span class="hljs-built_in">upper_bound</span>(t1.siz[y]);<br>s1.<span class="hljs-built_in">insert</span>(t1.siz[x]);<br>val=<span class="hljs-built_in">query2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t1.siz[x]+<span class="hljs-number">1</span>,*s1.<span class="hljs-built_in">upper_bound</span>(t1.siz[x]));<br>res+=t1.siz[x]*val;<br>res-=(*--s1.<span class="hljs-built_in">find</span>(t1.siz[x]))*val;<br>res+=*--s2.<span class="hljs-built_in">upper_bound</span>(t1.siz[x]);<br>vis1[x]=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">update1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t1.siz[y],<span class="hljs-number">1</span>);<br>&#125;<br>&#125;<br>res+=t1.siz[y];res+=t1.siz[x];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">rotate2</span><span class="hljs-params">(rint x)</span></span>&#123;<br>rint y=t2.fa[x];rint z=t2.fa[y];<br>res-=t2.siz[y];res-=t2.siz[x];<br><span class="hljs-keyword">if</span>(vis2[y])&#123;<br><span class="hljs-built_in">update2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t2.siz[y],<span class="hljs-number">-1</span>);<br>rll val=<span class="hljs-built_in">query1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t2.siz[y],*s2.<span class="hljs-built_in">upper_bound</span>(t2.siz[y])<span class="hljs-number">-1</span>);<br>res-=t2.siz[y]*val;<br>res+=(*--s2.<span class="hljs-built_in">find</span>(t2.siz[y]))*val;<br>res-=*--s1.<span class="hljs-built_in">lower_bound</span>(t2.siz[y]);<br>s2.<span class="hljs-built_in">erase</span>(t2.siz[y]);<br><span class="hljs-keyword">if</span>(vis2[x])&#123;<br><span class="hljs-built_in">update2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t2.siz[x],<span class="hljs-number">-1</span>);<br>val=<span class="hljs-built_in">query1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t2.siz[x],*s2.<span class="hljs-built_in">upper_bound</span>(t2.siz[x])<span class="hljs-number">-1</span>);<br>res-=t2.siz[x]*val;<br>res+=(*--s2.<span class="hljs-built_in">find</span>(t2.siz[x]))*val;<br>res-=*--s1.<span class="hljs-built_in">lower_bound</span>(t2.siz[x]);<br>s2.<span class="hljs-built_in">erase</span>(t2.siz[x]);<br>&#125;<br>&#125;<br>rint k=t2.ch[y][<span class="hljs-number">1</span>]==x;<br>t2.ch[z][t2.ch[z][<span class="hljs-number">1</span>]==y]=x;t2.fa[x]=z;<br>t2.ch[y][k]=t2.ch[x][!k];t2.fa[t2.ch[x][!k]]=y;<br>t2.ch[x][!k]=y;t2.fa[y]=x;<br>t2.siz[y]=t2.siz[t2.ch[y][<span class="hljs-number">0</span>]]+t2.siz[t2.ch[y][<span class="hljs-number">1</span>]]+<span class="hljs-number">1</span>;<br>t2.siz[x]=t2.siz[t2.ch[x][<span class="hljs-number">0</span>]]+t2.siz[t2.ch[x][<span class="hljs-number">1</span>]]+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(vis2[y])&#123;<br><span class="hljs-built_in">update2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t2.siz[x],<span class="hljs-number">1</span>);<br><span class="hljs-keyword">if</span>(vis2[x])&#123;<br>s2.<span class="hljs-built_in">insert</span>(t2.siz[x]);<br>vis2[y]=<span class="hljs-number">0</span>;<br>rll val=<span class="hljs-built_in">query1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t2.siz[x],*s2.<span class="hljs-built_in">upper_bound</span>(t2.siz[x])<span class="hljs-number">-1</span>);<br>res+=t2.siz[x]*val;<br>res-=(*--s2.<span class="hljs-built_in">find</span>(t2.siz[x]))*val;<br>res+=*--s1.<span class="hljs-built_in">lower_bound</span>(t2.siz[x]);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-built_in">update2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t2.siz[y],<span class="hljs-number">1</span>);<br>s2.<span class="hljs-built_in">insert</span>(t2.siz[y]);<br>rll val=<span class="hljs-built_in">query1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t2.siz[y],*s2.<span class="hljs-built_in">upper_bound</span>(t2.siz[y])<span class="hljs-number">-1</span>);<br>res+=t2.siz[y]*val;<br>res-=(*--s2.<span class="hljs-built_in">find</span>(t2.siz[y]))*val;<br>res+=*--s1.<span class="hljs-built_in">lower_bound</span>(t2.siz[y]);<br>s2.<span class="hljs-built_in">insert</span>(t2.siz[x]);<br>val=<span class="hljs-built_in">query1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t2.siz[x],*s2.<span class="hljs-built_in">upper_bound</span>(t2.siz[x])<span class="hljs-number">-1</span>);<br>res+=t2.siz[x]*val;<br>res-=(*--s2.<span class="hljs-built_in">find</span>(t2.siz[x]))*val;<br>res+=*--s1.<span class="hljs-built_in">lower_bound</span>(t2.siz[x]);<br>vis2[x]=<span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br>res+=t2.siz[y];res+=t2.siz[x];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;t1.n,&amp;t2.n);<br>t1.<span class="hljs-built_in">init</span>();t2.<span class="hljs-built_in">init</span>();<br>s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">0</span>);s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">0</span>);<br>s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">2e5</span>+<span class="hljs-number">2</span>);s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">2e5</span>+<span class="hljs-number">2</span>);<br><span class="hljs-keyword">for</span>(rint x=t1.rt;x;x=t1.ch[x][<span class="hljs-number">1</span>])<br>s1.<span class="hljs-built_in">insert</span>(t1.siz[x]),<span class="hljs-built_in">update1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,t1.siz[x],<span class="hljs-number">1</span>),vis1[x]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint x=t2.rt;x;x=t2.ch[x][<span class="hljs-number">0</span>])<br>s2.<span class="hljs-built_in">insert</span>(t2.siz[x]),<span class="hljs-built_in">update2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,t2.siz[x],<span class="hljs-number">1</span>),vis2[x]=<span class="hljs-number">1</span>;<br>rint lst=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(set&lt;<span class="hljs-type">int</span>&gt;::reverse_iterator it=s1.<span class="hljs-built_in">rbegin</span>();it!=s1.<span class="hljs-built_in">rend</span>();it++)&#123;<br>rint v=*it;<br><span class="hljs-keyword">if</span>(lst&amp;&amp;v)<br>res+=<span class="hljs-number">1ll</span>*v*<span class="hljs-built_in">query2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t2.n,v+<span class="hljs-number">1</span>,lst);<br>lst=v;<br>&#125;<br>lst=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(set&lt;<span class="hljs-type">int</span>&gt;::reverse_iterator it=s2.<span class="hljs-built_in">rbegin</span>();it!=s2.<span class="hljs-built_in">rend</span>();it++)&#123;<br>rint v=*it;<br><span class="hljs-keyword">if</span>(lst&amp;&amp;v)<br>res+=<span class="hljs-number">1ll</span>*v*<span class="hljs-built_in">query1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,t1.n,v,lst<span class="hljs-number">-1</span>);<br>lst=v;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br>rint q;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;q);<br><span class="hljs-keyword">while</span>(q--)&#123;<br>rint op,x;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;op,&amp;x);<br><span class="hljs-keyword">if</span>(op==<span class="hljs-number">1</span>)<span class="hljs-built_in">rotate1</span>(x);<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">rotate2</span>(x);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="西克"><a href="#西克" class="headerlink" title="西克"></a>西克</h1><blockquote><p>给定一棵树，树上每个点有两个权值，$a,b$ 表示如果走到这个点，手里拿的球是 $a$，那么手中的球会变成 $b$，询问从 $x$ 到 $y$，手中拿着的球是 $b_x$，到达 $y$ 时手里拿的球是什么。</p></blockquote><p>考虑将路径分成两部分，一部分是从 $x$ 到 $lca$，另一部分是从 $lca$ 到 $y$，前半部分可以直接用倍增的做法，考虑后半部分怎么做，发现没有办法向下走，主要原因是向下走的路径太多，没办法维护，注意到从 $y$ 到 $lca$ 的路径可以被分成不超过 $\log$ 段重链，所以可以对于每一段重链预处理一下，然后倍增跳即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-type">char</span> buf[<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">20</span>],*p1,*p2;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">char</span> <span class="hljs-title">gc</span><span class="hljs-params">()</span></span>&#123;<span class="hljs-keyword">return</span> p1==p2?p2=buf+<span class="hljs-built_in">fread</span>(p1=buf,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">20</span>,stdin),p1==p2?EOF:*p1++:*p1++;&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>&#123;<br>rint x=<span class="hljs-number">0</span>;<span class="hljs-type">char</span> ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">while</span>(ch&lt;<span class="hljs-string">&#x27;0&#x27;</span>||ch&gt;<span class="hljs-string">&#x27;9&#x27;</span>)ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">while</span>(ch&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;ch&gt;=<span class="hljs-string">&#x27;0&#x27;</span>)x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">&#x27;0&#x27;</span>,ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> x;<br>&#125;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e6</span>+<span class="hljs-number">10</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt;<br>&#125;e[N&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-type">int</span> h[N],idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;&#125;<br><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> S1,S2;<br><span class="hljs-function"><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title">rnd</span><span class="hljs-params">()</span></span>&#123;<br>S1*=S2,S2&gt;&gt;=S1&amp;<span class="hljs-number">13</span>,S2-=S1,S1^=S2;<br><span class="hljs-keyword">return</span> ((S1-S2)&amp;(S1+S2))^(S1*S2&gt;&gt;<span class="hljs-number">4</span>);<br>&#125;<br><span class="hljs-type">int</span> a[N],b[N],p[N][<span class="hljs-number">23</span>],fa[N],d[N],lst[N],siz[N],son[N],dfn[N],Time,rk[N],tp[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs1</span><span class="hljs-params">(rint u)</span></span>&#123;<br>p[u][<span class="hljs-number">0</span>]=lst[b[u]];<br>rint t=lst[a[u]];<br>lst[a[u]]=u;<br>siz[u]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;p[u][i];i++)<br>p[u][i+<span class="hljs-number">1</span>]=p[p[u][i]][i];<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa[u])<span class="hljs-keyword">continue</span>;<br>fa[v]=u;<br>d[v]=d[u]+<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs1</span>(v);<br>siz[u]+=siz[v];<br><span class="hljs-keyword">if</span>(siz[v]&gt;siz[son[u]])<br>son[u]=v;<br>&#125;<br>lst[a[u]]=t;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs2</span><span class="hljs-params">(rint u,rint t)</span></span>&#123;<br>tp[u]=t;dfn[u]=++Time;rk[Time]=u;<br><span class="hljs-keyword">if</span>(son[u])<br><span class="hljs-built_in">dfs2</span>(son[u],t);<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa[u]||v==son[u])<span class="hljs-keyword">continue</span>;<br><span class="hljs-built_in">dfs2</span>(v,v);<br>&#125;<br>&#125;<br>vector&lt;<span class="hljs-type">int</span>&gt; vec[N];<br><span class="hljs-type">int</span> nxt[N][<span class="hljs-number">22</span>],stk[N],top;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">getlca</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;<br>top=<span class="hljs-number">0</span>;stk[++top]=y;<br><span class="hljs-keyword">while</span>(tp[x]!=tp[y])&#123;<br><span class="hljs-keyword">if</span>(d[tp[x]]&gt;d[tp[y]])&#123;<br>x=fa[tp[x]];<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>y=fa[tp[y]];<br>stk[++top]=y;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> d[x]&gt;d[y]?y:x;<br>&#125;<br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator it;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">getnxt</span><span class="hljs-params">(rint x,rint l,rint r)</span></span>&#123;<br>it=<span class="hljs-built_in">lower_bound</span>(vec[x].<span class="hljs-built_in">begin</span>(),vec[x].<span class="hljs-built_in">end</span>(),l);<br><span class="hljs-keyword">if</span>(it==vec[x].<span class="hljs-built_in">end</span>())<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br><span class="hljs-keyword">if</span>(*it&gt;r)<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br><span class="hljs-keyword">return</span> rk[*it];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n=<span class="hljs-built_in">read</span>(),q=<span class="hljs-built_in">read</span>();<br>S1=<span class="hljs-built_in">read</span>(),S2=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">5e5</span>)&#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>a[i]=<span class="hljs-built_in">read</span>(),b[i]=<span class="hljs-built_in">read</span>();<br>&#125;<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">5e5</span>;i++)<br>a[i]=<span class="hljs-built_in">read</span>(),b[i]=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">500001</span>;i&lt;=n;i++)&#123;<br>a[i]=<span class="hljs-built_in">rnd</span>()%n+<span class="hljs-number">1</span>;b[i]=a[<span class="hljs-built_in">rnd</span>()%<span class="hljs-number">500000</span>+<span class="hljs-number">1</span>];<br><span class="hljs-keyword">if</span>(a[i]==b[i])&#123;<br>++a[i];<br><span class="hljs-keyword">if</span>(a[i]&gt;n)a[i]=<span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>rint x=<span class="hljs-built_in">read</span>();<br><span class="hljs-built_in">Ins</span>(x,i);<br>&#125;<br><span class="hljs-built_in">dfs1</span>(<span class="hljs-number">1</span>);<br><span class="hljs-built_in">dfs2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>vec[a[rk[i]]].<span class="hljs-built_in">push_back</span>(i);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-keyword">if</span>(tp[i]==i)&#123;<br>rint cr=dfn[i];<br><span class="hljs-keyword">while</span>(tp[rk[cr+<span class="hljs-number">1</span>]]==i)cr++;<br><span class="hljs-keyword">for</span>(rint j=cr;j&gt;=dfn[i];j--)&#123;<br>rint x=rk[j];<br>nxt[x][<span class="hljs-number">0</span>]=lst[b[x]];<br><span class="hljs-keyword">for</span>(rint k=<span class="hljs-number">0</span>;nxt[x][k];k++)<br>nxt[x][k+<span class="hljs-number">1</span>]=nxt[nxt[x][k]][k];<br>lst[a[x]]=x;<br>&#125;<br><span class="hljs-keyword">for</span>(rint j=dfn[i];j&lt;=cr;j++)<br>lst[a[rk[j]]]=<span class="hljs-number">0</span>;<br>&#125;<br>&#125;<br>rint res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(q--)&#123;<br>rint x=<span class="hljs-built_in">read</span>(),y=<span class="hljs-built_in">read</span>();<br>rint lc=<span class="hljs-built_in">getlca</span>(x,y);<br>rint now=x;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">20</span>;~i;i--)<br><span class="hljs-keyword">if</span>(p[now][i]&amp;&amp;d[p[now][i]]&gt;=d[lc])<br>now=p[now][i];<br>now=b[now];<br>rint pos=lc;<br><span class="hljs-keyword">for</span>(rint i=top;i;i--)&#123;<br>rint t=<span class="hljs-built_in">getnxt</span>(now,dfn[pos],dfn[stk[i]]);<br><span class="hljs-keyword">if</span>(t!=<span class="hljs-number">-1</span>)&#123;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">20</span>;~j;j--)<br><span class="hljs-keyword">while</span>(nxt[t][j]&amp;&amp;dfn[nxt[t][j]]&lt;=dfn[stk[i]])<br>t=nxt[t][j];<br>now=b[t];<br>&#125;<br>pos=tp[stk[i<span class="hljs-number">-1</span>]];<br>&#125;<br>res^=now;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,res);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="苯为"><a href="#苯为" class="headerlink" title="苯为"></a>苯为</h1><blockquote><p>有一棵树，复制 $A$ 份形成一个森林，枚举一个二元组 $(s,t)$，然后对于相邻的两棵树链接 $s$ 和 $t$，之后用 $k$ 种颜色给形成的基环树进行染色，问染色的方案 。</p></blockquote><p>不难发现最终的答案只和环的大小有关系，除了环以外别的点的贡献都是 $k-1$，所以只需要对于每个环进行处理即可，用换根 $dp$ 。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e6</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">421969921</span>;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>&#123;<br>rint x=<span class="hljs-number">0</span>;<span class="hljs-type">char</span> ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">while</span>(ch&lt;<span class="hljs-string">&#x27;0&#x27;</span>||ch&gt;<span class="hljs-string">&#x27;9&#x27;</span>)ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">while</span>(ch&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;ch&gt;=<span class="hljs-string">&#x27;0&#x27;</span>)x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">&#x27;0&#x27;</span>,ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> x;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Add</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;x+=y;<span class="hljs-keyword">return</span> x&gt;=p?x-p:x;&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Del</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;x-=y;<span class="hljs-keyword">return</span> x&gt;=<span class="hljs-number">0</span>?x:x+p;&#125;<br><span class="hljs-function">ll <span class="hljs-title">fpow</span><span class="hljs-params">(rll a,rll b)</span></span>&#123;<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(;b;b&gt;&gt;=<span class="hljs-number">1</span>,a=a*a%p)<br><span class="hljs-keyword">if</span>(b&amp;<span class="hljs-number">1</span>)res=res*a%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Mat</span>&#123;<br><span class="hljs-type">int</span> x[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>];<br>Mat <span class="hljs-keyword">operator</span> * (<span class="hljs-type">const</span> Mat&amp;A)<span class="hljs-type">const</span>&#123;<br>Mat res;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>;i++)&#123;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">2</span>;j++)&#123;<br>rll tmp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint k=<span class="hljs-number">0</span>;k&lt;<span class="hljs-number">2</span>;k++)<br>tmp+=<span class="hljs-number">1ll</span>*x[i][k]*A.x[k][j]%p;<br>res.x[i][j]=tmp%p;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br>Mat <span class="hljs-keyword">operator</span> + (<span class="hljs-type">const</span> Mat&amp;A)<span class="hljs-type">const</span>&#123;<br>Mat res;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>;i++)<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">2</span>;j++)<br>res.x[i][j]=<span class="hljs-built_in">Add</span>(x[i][j],A.x[i][j]);<br><span class="hljs-keyword">return</span> res;<br>&#125;<br>Mat <span class="hljs-keyword">operator</span> - (<span class="hljs-type">const</span> Mat&amp;A)<span class="hljs-type">const</span>&#123;<br>Mat res;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>;i++)<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">2</span>;j++)<br>res.x[i][j]=<span class="hljs-built_in">Del</span>(x[i][j],A.x[i][j]);<br><span class="hljs-keyword">return</span> res;<br>&#125;<br>Mat <span class="hljs-keyword">operator</span> ^ (<span class="hljs-type">const</span> ll&amp;A)<span class="hljs-type">const</span>&#123;<br>Mat res,a=*<span class="hljs-keyword">this</span>;<br>rll k=A;<br>res.x[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=res.x[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br>res.x[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]=res.x[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(k)&#123;<br><span class="hljs-keyword">if</span>(k&amp;<span class="hljs-number">1</span>)res=res*a;<br>a=a*a;<br>k&gt;&gt;=<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>;i++,<span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>))<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">2</span>;j++)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,x[i][j]);<br>&#125;<br>&#125;f[N],g[N],I,m1,m2;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt;<br>&#125;e[N&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-type">int</span> h[N],idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;<br>e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs1</span><span class="hljs-params">(rint u,rint fa)</span></span>&#123;<br>f[u]=I;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa)<span class="hljs-keyword">continue</span>;<br><span class="hljs-built_in">dfs1</span>(v,u);<br>f[u]=f[u]+f[v]*m1;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs2</span><span class="hljs-params">(rint u,rint fa)</span></span>&#123;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa)<span class="hljs-keyword">continue</span>;<br>g[v]=(g[u]-f[v]*m1)*m1+f[v];<br><span class="hljs-built_in">dfs2</span>(v,u);<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>I.x[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=I.x[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br>rint n=<span class="hljs-built_in">read</span>();<br>rll A,k;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>,&amp;A,&amp;k);k%=p;++A;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>rint x=<span class="hljs-built_in">read</span>(),y=<span class="hljs-built_in">read</span>();<br><span class="hljs-built_in">Ins</span>(x,y);<span class="hljs-built_in">Ins</span>(y,x);<br>&#125;<br>rll fac=<span class="hljs-built_in">fpow</span>(<span class="hljs-built_in">fpow</span>(k<span class="hljs-number">-1</span>,n),A);<br>rll inv=<span class="hljs-built_in">fpow</span>(<span class="hljs-built_in">fpow</span>(k<span class="hljs-number">-1</span>,p<span class="hljs-number">-2</span>),A);<br>m1.x[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-built_in">Del</span>(k,<span class="hljs-number">2</span>)*<span class="hljs-built_in">fpow</span>(k<span class="hljs-number">-1</span>,p<span class="hljs-number">-2</span>)%p;<br>m1.x[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]=<span class="hljs-built_in">Del</span>(k,<span class="hljs-number">1</span>)*<span class="hljs-built_in">fpow</span>(k<span class="hljs-number">-1</span>,p<span class="hljs-number">-2</span>)%p;<br>m1.x[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]=<span class="hljs-built_in">fpow</span>(k<span class="hljs-number">-1</span>,p<span class="hljs-number">-2</span>);<br>m1.x[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">0</span>;<br>m2=m1;<br><span class="hljs-keyword">for</span>(rll t=A<span class="hljs-number">-1</span>;t;t&gt;&gt;=<span class="hljs-number">1</span>)&#123;<br><span class="hljs-keyword">if</span>(t&amp;<span class="hljs-number">1</span>)m2=m2*m1;<br>m1=m1*m1;<br>&#125;<br>m1=m2;<br><span class="hljs-built_in">dfs1</span>(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br>g[<span class="hljs-number">1</span>]=f[<span class="hljs-number">1</span>];<br><span class="hljs-built_in">dfs2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br>Mat res;<br><span class="hljs-built_in">memset</span>(res.x,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(res.x));<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>res=res+g[i];<br>m1.x[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]=<span class="hljs-built_in">Del</span>(k,<span class="hljs-number">2</span>);<br>m1.x[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]=<span class="hljs-built_in">Del</span>(k,<span class="hljs-number">1</span>);<br>m1.x[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br>m1.x[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">0</span>;<br>res=res*(m1^(A<span class="hljs-number">-1</span>));<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res.x[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]%p*inv%p*fac%p*k%p);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="正方形"><a href="#正方形" class="headerlink" title="正方形"></a>正方形</h1><blockquote><p>给定一张有障碍的网格图，给出一个初始的正方形，要求只上下左右平移并且不碰触障碍，询问能不能到达终点。</p></blockquote><p>考虑左下角的路径，这个正方形可以通过某个点当且仅当以这个点为左下角的最大正方形的边长不小于给定正方形，所以考虑网格上两个点形成的边，一条边有贡献当且仅当两个格子都满足上述限制，所以直接离线然后排序即可，注意一个小细节，即对于每个点判断初始时会不会被挡住。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e3</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">char</span> s[N];<br><span class="hljs-type">int</span> f[N][N],fa[N*N],idx[N][N],cnt;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> id,x,y,xx,yy,w;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> Node&amp;A)<span class="hljs-type">const</span>&#123;<br><span class="hljs-keyword">return</span> w&gt;A.w;<br>&#125;<br>&#125;ask[N*N];<br><span class="hljs-type">bool</span> ans[N*N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> fr,to;<br>&#125;;<br>vector&lt;Edge&gt; vec[N];<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(rint x)</span></span>&#123;<span class="hljs-keyword">return</span> x==fa[x]?fa[x]:fa[x]=<span class="hljs-built_in">find</span>(fa[x]);&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n,m,q;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;q);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s+<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=m;j++)&#123;<br>idx[i][j]=++cnt;fa[cnt]=cnt;<br><span class="hljs-keyword">if</span>(s[j]==<span class="hljs-string">&#x27;1&#x27;</span>)f[i][j]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">else</span> f[i][j]=<span class="hljs-built_in">min</span>(f[i<span class="hljs-number">-1</span>][j],<span class="hljs-built_in">min</span>(f[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>],f[i][j<span class="hljs-number">-1</span>]))+<span class="hljs-number">1</span>;<br>vec[<span class="hljs-built_in">min</span>(f[i][j],f[i<span class="hljs-number">-1</span>][j])].<span class="hljs-built_in">push_back</span>((Edge)&#123;idx[i][j],idx[i<span class="hljs-number">-1</span>][j]&#125;);<br>vec[<span class="hljs-built_in">min</span>(f[i][j],f[i][j<span class="hljs-number">-1</span>])].<span class="hljs-built_in">push_back</span>((Edge)&#123;idx[i][j],idx[i][j<span class="hljs-number">-1</span>]&#125;);<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=q;i++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d%d%d&quot;</span>,&amp;ask[i].x,&amp;ask[i].y,&amp;ask[i].xx,&amp;ask[i].yy,&amp;ask[i].w),ask[i].id=i;<br><span class="hljs-built_in">sort</span>(ask+<span class="hljs-number">1</span>,ask+q+<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1e3</span>,j=<span class="hljs-number">1</span>;i;i--)&#123;<br><span class="hljs-keyword">for</span>(Edge v:vec[i])<br>fa[<span class="hljs-built_in">find</span>(v.fr)]=<span class="hljs-built_in">find</span>(v.to);<br><span class="hljs-keyword">while</span>(j&lt;=q&amp;&amp;ask[j].w==i)&#123;<br><span class="hljs-keyword">if</span>(ask[j].x==ask[j].xx&amp;&amp;ask[j].y==ask[j].yy)ans[ask[j].id]=f[ask[j].x][ask[j].y]&gt;=ask[j].w;<br><span class="hljs-keyword">else</span> ans[ask[j].id]=<span class="hljs-built_in">find</span>(idx[ask[j].x][ask[j].y])==<span class="hljs-built_in">find</span>(idx[ask[j].xx][ask[j].yy]);<br>j++;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=q;i++)<br><span class="hljs-built_in">puts</span>(ans[i]?<span class="hljs-string">&quot;Yes&quot;</span>:<span class="hljs-string">&quot;No&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="计数"><a href="#计数" class="headerlink" title="计数"></a>计数</h1><blockquote><p>给定一个 $0/1$ 串，要求所有的子序列中满足中心对称的点对个数。</p></blockquote><p>考虑直接推式子然后 $NTT$ 即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ull unsigned long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">18</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">998244353</span>;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Add</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;x+=y;<span class="hljs-keyword">return</span> x&gt;=p?x-p:x;&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Del</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;x-=y;<span class="hljs-keyword">return</span> x&gt;=<span class="hljs-number">0</span>?x:x+p;&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> ll <span class="hljs-title">Mul</span><span class="hljs-params">(rll x,rll y )</span></span>&#123;x*=y;<span class="hljs-keyword">return</span> x&gt;=p?x%p:x;&#125;<br><span class="hljs-function">ll <span class="hljs-title">fpow</span><span class="hljs-params">(rll a,rll b)</span></span>&#123;<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(;b;b&gt;&gt;=<span class="hljs-number">1</span>,a=a*a%p)<br><span class="hljs-keyword">if</span>(b&amp;<span class="hljs-number">1</span>)res=res*a%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-type">char</span> s[N];<br><span class="hljs-type">int</span> pw[N],fac[N],inv[N],w[N],r[N],f[N],g[N],cnt[N],pd,n,t;<br>ll res;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ntt</span><span class="hljs-params">(rint n,rint *a,rint typ)</span></span>&#123;<br><span class="hljs-keyword">if</span>(pd!=n)&#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>r[i]=(r[i&gt;&gt;<span class="hljs-number">1</span>]&gt;&gt;<span class="hljs-number">1</span>)|((i&amp;<span class="hljs-number">1</span>)?n&gt;&gt;<span class="hljs-number">1</span>:<span class="hljs-number">0</span>);<br>pd=n;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;n;i++)<br><span class="hljs-keyword">if</span>(i&lt;r[i])<span class="hljs-built_in">swap</span>(a[i],a[r[i]]);<br><span class="hljs-keyword">for</span>(rint mid=<span class="hljs-number">1</span>;mid&lt;n;mid&lt;&lt;=<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;n;i+=mid&lt;&lt;<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;mid;j++)<br>t=<span class="hljs-built_in">Mul</span>(w[mid+j],a[i+j+mid]),a[i+j+mid]=<span class="hljs-built_in">Del</span>(a[i+j],t),a[i+j]=<span class="hljs-built_in">Add</span>(a[i+j],t);<br><span class="hljs-keyword">if</span>(~typ)<span class="hljs-keyword">return</span> ;<br>t=<span class="hljs-built_in">fpow</span>(n,p<span class="hljs-number">-2</span>);<span class="hljs-built_in">reverse</span>(a+<span class="hljs-number">1</span>,a+n);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>a[i]=<span class="hljs-built_in">Mul</span>(a[i],t);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint l,rint r)</span></span>&#123;<br><span class="hljs-keyword">if</span>(r-l&lt;=<span class="hljs-number">180</span>)&#123;<br><span class="hljs-keyword">for</span>(rint i=l;i&lt;=r;i++)<br><span class="hljs-keyword">for</span>(rint j=i+<span class="hljs-number">1</span>;j&lt;=r;j++)<br><span class="hljs-keyword">if</span>(s[i]==s[j])<br>cnt[j-i]=<span class="hljs-built_in">Add</span>(cnt[j-i],<span class="hljs-built_in">Mul</span>(inv[i<span class="hljs-number">-1</span>],inv[n-j]));<br><span class="hljs-keyword">return</span> ;<br>&#125;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs</span>(l,mid);<span class="hljs-built_in">dfs</span>(mid+<span class="hljs-number">1</span>,r);<br>rint Max=<span class="hljs-number">1</span>,len=r-l+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span>(Max&lt;len)Max&lt;&lt;=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=l;i&lt;=mid;i++)<br>g[i-l]=(s[i]==<span class="hljs-string">&#x27;0&#x27;</span>)?inv[i<span class="hljs-number">-1</span>]:<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=mid+<span class="hljs-number">1</span>;i&lt;=r;i++)<br>f[i-l]=(s[i]==<span class="hljs-string">&#x27;0&#x27;</span>)?inv[n-i]:<span class="hljs-number">0</span>;<br><span class="hljs-built_in">ntt</span>(Max,f,<span class="hljs-number">-1</span>);<span class="hljs-built_in">ntt</span>(Max,g,<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;Max;i++)<br>f[i]=<span class="hljs-built_in">Mul</span>(f[i],g[i]),g[i]=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">ntt</span>(Max,f,<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;len;i++)<br>res+=<span class="hljs-built_in">Mul</span>(<span class="hljs-built_in">Mul</span>(f[i],pw[i<span class="hljs-number">-1</span>]),fac[n-i<span class="hljs-number">-1</span>]),f[i]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=l;i&lt;=mid;i++)<br>g[i-l]=(s[i]==<span class="hljs-string">&#x27;1&#x27;</span>)?inv[i<span class="hljs-number">-1</span>]:<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=mid+<span class="hljs-number">1</span>;i&lt;=r;i++)<br>f[i-l]=(s[i]==<span class="hljs-string">&#x27;1&#x27;</span>)?inv[n-i]:<span class="hljs-number">0</span>;<br><span class="hljs-built_in">ntt</span>(Max,f,<span class="hljs-number">-1</span>);<span class="hljs-built_in">ntt</span>(Max,g,<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;Max;i++)<br>f[i]=<span class="hljs-built_in">Mul</span>(f[i],g[i]),g[i]=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">ntt</span>(Max,f,<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;len;i++)<br>cnt[i]=<span class="hljs-built_in">Add</span>(cnt[i],f[i]),f[i]=<span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>w[N/<span class="hljs-number">2</span>]=<span class="hljs-number">1</span>;w[N/<span class="hljs-number">2</span>+<span class="hljs-number">1</span>]=t=<span class="hljs-built_in">fpow</span>(<span class="hljs-number">3</span>,(p<span class="hljs-number">-1</span>)/N);<br><span class="hljs-keyword">for</span>(rint i=N/<span class="hljs-number">2</span>+<span class="hljs-number">2</span>;i&lt;N;i++)w[i]=<span class="hljs-built_in">Mul</span>(w[i<span class="hljs-number">-1</span>],t);<br><span class="hljs-keyword">for</span>(rint i=N/<span class="hljs-number">2</span><span class="hljs-number">-1</span>;i;i--)w[i]=w[i&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s+<span class="hljs-number">1</span>);n=<span class="hljs-built_in">strlen</span>(s+<span class="hljs-number">1</span>);<br>fac[<span class="hljs-number">0</span>]=fac[<span class="hljs-number">1</span>]=inv[<span class="hljs-number">0</span>]=inv[<span class="hljs-number">1</span>]=pw[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;pw[<span class="hljs-number">1</span>]=<span class="hljs-number">2</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>fac[i]=<span class="hljs-built_in">Mul</span>(fac[i<span class="hljs-number">-1</span>],i);<br>inv[i]=<span class="hljs-built_in">Del</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">Mul</span>(p/i,inv[p%i]));<br>pw[i]=(pw[i<span class="hljs-number">-1</span>]&lt;&lt;<span class="hljs-number">1</span>)%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>inv[i]=<span class="hljs-built_in">Mul</span>(inv[i<span class="hljs-number">-1</span>],inv[i]);<br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,n);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>res+=<span class="hljs-built_in">Mul</span>(<span class="hljs-built_in">Mul</span>(cnt[i],pw[i<span class="hljs-number">-1</span>]),fac[n-i<span class="hljs-number">-1</span>]);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res%p);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="硬币游戏"><a href="#硬币游戏" class="headerlink" title="硬币游戏"></a>硬币游戏</h1><blockquote><p>有 $n$ 堆硬币，每堆硬币的价值由上到下依次为 $a_i,b_i,a_i$ ，取一枚硬币必须取走它上边的所有硬币，对于体积为 $1-k$ 时分别求出答案 。</p></blockquote><p>考虑若 $a_i&gt;b_i$ 那么在取走第一枚 $a_i$ 之后，剩下的两枚硬币一定是一起被取走的 。</p><p>然后若 $a_i&lt;b_i$ 那么前两枚硬币一定是一起取走的，于是可以得到一个结论，每堆硬币可以分为 $a_i+b_i$ 和 $a_i$ 两堆硬币，也就是说，现在相当于 $2n$ 个物品做 $0/1$ 背包，而不是做有依赖的背包了 。</p><p>由于体积只有两个，所以可以对两种体积分别排序，然后考虑取哪一个体积的物品 。</p><p>对于增加一个体积，只放一个体积的物品一定更优，对于两个体积的考虑回退一步即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">5e6</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n,k,a[N],b[N];<br><span class="hljs-type">int</span> threshold=<span class="hljs-number">10000000</span>;<br><span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> k1,k2;<br><span class="hljs-function"><span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title">xorShift128Plus</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> k3=k1,k4=k2;<br>k1=k4;<br>k3^=k3&lt;&lt;<span class="hljs-number">23</span>;<br>k2=k3^k4^(k3&gt;&gt;<span class="hljs-number">17</span>)^(k4&gt;&gt;<span class="hljs-number">26</span>);<br><span class="hljs-keyword">return</span> k2+k4;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">gen</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%llu%llu&quot;</span>,&amp;n,&amp;k,&amp;k1,&amp;k2);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>a[i]=<span class="hljs-built_in">xorShift128Plus</span>()%threshold+<span class="hljs-number">1</span>;<br>b[i]=<span class="hljs-built_in">xorShift128Plus</span>()%threshold+<span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> id,val;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> Node&amp;A)<span class="hljs-type">const</span>&#123;<br><span class="hljs-keyword">return</span> val&gt;A.val;<br>&#125;<br>&#125;q1[N*<span class="hljs-number">3</span>],q2[N*<span class="hljs-number">3</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">gen</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>q1[i]=(Node)&#123;i,a[i]&#125;;<br>q2[i]=(Node)&#123;i,a[i]+b[i]&#125;;<br>&#125;<br><span class="hljs-built_in">sort</span>(q1+<span class="hljs-number">1</span>,q1+n+<span class="hljs-number">1</span>);<br><span class="hljs-built_in">sort</span>(q2+<span class="hljs-number">1</span>,q2+n+<span class="hljs-number">1</span>);<br>rint tp1=<span class="hljs-number">1</span>,tp2=<span class="hljs-number">1</span>;<br>rll res=<span class="hljs-number">0</span>,res2=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=k;i++)&#123;<br><span class="hljs-keyword">if</span>(tp1&lt;=n&amp;&amp;tp2&lt;=n)&#123;<br><span class="hljs-keyword">if</span>(q1[tp1].val+q1[tp1+<span class="hljs-number">1</span>].val&lt;=q2[tp2].val)&#123;<br>res2+=q1[tp1++].val;<br>res^=res2;<br>res2-=q1[--tp1].val;i++;<br><span class="hljs-keyword">if</span>(i&lt;=k)&#123;<br>res2+=q2[tp2++].val;<br>res^=res2;<br>&#125;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>res2+=q1[tp1++].val;<br>res^=res2;<br>&#125;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(tp1&lt;=n)&#123;<br>res2+=q1[tp1++].val;<br>res^=res2;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(tp2&lt;=n)&#123;<br>res2+=b[q2[tp2].id];<br>res^=res2;i++;<br><span class="hljs-keyword">if</span>(i&lt;=k)&#123;<br>res2+=a[q2[tp2++].id];<br>res^=res2;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="序列计数"><a href="#序列计数" class="headerlink" title="序列计数"></a>序列计数</h1><blockquote><p>对一个字串，求某个区间中本质不同的非空子序列个数。</p></blockquote><h1 id="最大面积"><a href="#最大面积" class="headerlink" title="最大面积"></a>最大面积</h1><blockquote><p>给出若干个点，每次询问一个点与一个区间中所有点的叉积的和的最大值 。</p></blockquote><p>考虑直接推式子，$P\times A=P_xA_y-A_xP_y$，不妨设 $x$ 的前缀和为 $s_x$， $y$ 的前缀和为 $s_y$，那么要求的实际上是 $\max_{l,r}P_x(s_{yr}-s_{yl-1})-P_y(s_{xr}-s_{xl-1})$，可以直接 $n^2$ 求出所有可能的点对然后直接在凸包上进行二分即可，注意特判纵坐标为 $0$ 的情况 。</p><p>上述问题的主要时间复杂度在于求出全局的凸包，求这个可以考虑进行分治，考虑区间 $[l,r]$ ，考虑跨过区间中点的点形成的凸包，任意一个点都能够写成一个左区间的后缀和加上右区间的前缀和，所以可以对于两侧分别求一个凸包然后用闵可夫斯基和合并，最后统一跑一个大凸包即可 。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>&#123;<br>rint x=<span class="hljs-number">0</span>,f=<span class="hljs-number">1</span>;<span class="hljs-type">char</span> ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">while</span>(ch&lt;<span class="hljs-string">&#x27;0&#x27;</span>||ch&gt;<span class="hljs-string">&#x27;9&#x27;</span>)&#123;<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>)f=<span class="hljs-number">-1</span>;ch=<span class="hljs-built_in">getchar</span>();&#125;<br><span class="hljs-keyword">while</span>(ch&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;ch&gt;=<span class="hljs-string">&#x27;0&#x27;</span>)&#123;x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">&#x27;0&#x27;</span>,ch=<span class="hljs-built_in">getchar</span>();&#125;<br><span class="hljs-keyword">return</span> x*f;<br>&#125;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> maxlg=<span class="hljs-number">20</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> x,y;<br>&#125;a[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Pt</span>&#123;<br>ll x,y;<br>Pt <span class="hljs-keyword">operator</span> + (<span class="hljs-type">const</span> Pt&amp;A)<span class="hljs-type">const</span>&#123;<span class="hljs-keyword">return</span> (Pt)&#123;x+A.x,y+A.y&#125;;&#125;<br>Pt <span class="hljs-keyword">operator</span> - (<span class="hljs-type">const</span> Pt&amp;A)<span class="hljs-type">const</span>&#123;<span class="hljs-keyword">return</span> (Pt)&#123;x-A.x,y-A.y&#125;;&#125;<br>ll <span class="hljs-keyword">operator</span> * (<span class="hljs-type">const</span> Pt&amp;A)<span class="hljs-type">const</span>&#123;<span class="hljs-keyword">return</span> x*A.y-y*A.x;&#125;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> Pt&amp;A)<span class="hljs-type">const</span>&#123;<span class="hljs-keyword">return</span> x==A.x?y&lt;A.y:x&lt;A.x;&#125;<br>&#125;b1[N*maxlg],b2[N*maxlg],up[N*maxlg],down[N*maxlg],t[N&lt;&lt;<span class="hljs-number">1</span>];<br>vector&lt;Pt&gt; vec,vec1,vec2;<br><span class="hljs-type">int</span> n,m,stk[N*maxlg],tp,tot1,tot2;<br>ll sx[N],sy[N];<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp1</span><span class="hljs-params">(Pt a,Pt b)</span></span>&#123;<span class="hljs-keyword">return</span> a*b&gt;<span class="hljs-number">0</span>;&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp2</span><span class="hljs-params">(Pt a,Pt b)</span></span>&#123;<span class="hljs-keyword">return</span> a*b&lt;<span class="hljs-number">0</span>;&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint l,rint r)</span></span>&#123;<br><span class="hljs-keyword">if</span>(l==r)&#123;<br>b1[++tot1]=(Pt)&#123;(ll)a[l].y,(ll)a[l].x&#125;;<br>b2[++tot2]=(Pt)&#123;(ll)a[l].y,(ll)a[l].x&#125;;<br><span class="hljs-keyword">return</span> ;<br>&#125;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs</span>(l,mid);<span class="hljs-built_in">dfs</span>(mid+<span class="hljs-number">1</span>,r);<br>rll sx=<span class="hljs-number">0</span>,sy=<span class="hljs-number">0</span>;vec.<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=mid+<span class="hljs-number">1</span>;i&lt;=r;i++)&#123;<br>sx+=a[i].y,sy+=a[i].x;<br>vec.<span class="hljs-built_in">push_back</span>((Pt)&#123;sx,sy&#125;);<br>&#125;<br><span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(),vec.<span class="hljs-built_in">end</span>());tp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;vec.<span class="hljs-built_in">size</span>();i++)&#123;<br><span class="hljs-keyword">while</span>(tp&gt;<span class="hljs-number">1</span>&amp;&amp;(vec[i]-vec[stk[tp<span class="hljs-number">-1</span>]])*(vec[stk[tp]]-vec[stk[tp<span class="hljs-number">-1</span>]])&gt;=<span class="hljs-number">0</span>)tp--;<br>stk[++tp]=i;<br>&#125;<br>vec1.<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tp;i++)<br>vec1.<span class="hljs-built_in">push_back</span>(vec[stk[i]]);<br>sx=sy=<span class="hljs-number">0</span>;vec.<span class="hljs-built_in">clear</span>();tp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=mid;i&gt;=l;i--)&#123;<br>sx+=a[i].y,sy+=a[i].x;<br>vec.<span class="hljs-built_in">push_back</span>((Pt)&#123;sx,sy&#125;);<br>&#125;<br><span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(),vec.<span class="hljs-built_in">end</span>());<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;vec.<span class="hljs-built_in">size</span>();i++)&#123;<br><span class="hljs-keyword">while</span>(tp&gt;<span class="hljs-number">1</span>&amp;&amp;(vec[i]-vec[stk[tp<span class="hljs-number">-1</span>]])*(vec[stk[tp]]-vec[stk[tp<span class="hljs-number">-1</span>]])&gt;=<span class="hljs-number">0</span>)tp--;<br>stk[++tp]=i;<br>&#125;<br>vec2.<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tp;i++)<br>vec2.<span class="hljs-built_in">push_back</span>(vec[stk[i]]);<br>rint tt=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;vec1.<span class="hljs-built_in">size</span>();i++)<br>t[++tt]=vec1[i]-vec1[i<span class="hljs-number">-1</span>];<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;vec2.<span class="hljs-built_in">size</span>();i++)<br>t[++tt]=vec2[i]-vec2[i<span class="hljs-number">-1</span>];<br><span class="hljs-built_in">sort</span>(t+<span class="hljs-number">1</span>,t+tt+<span class="hljs-number">1</span>,cmp1);<br>Pt now=vec1[<span class="hljs-number">0</span>]+vec2[<span class="hljs-number">0</span>];<br>b1[++tot1]=now;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tt;i++)&#123;<br>now=now+t[i];<br>b1[++tot1]=now;<br>&#125;<br>sx=<span class="hljs-number">0</span>,sy=<span class="hljs-number">0</span>;vec.<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=mid+<span class="hljs-number">1</span>;i&lt;=r;i++)&#123;<br>sx+=a[i].y,sy+=a[i].x;<br>vec.<span class="hljs-built_in">push_back</span>((Pt)&#123;sx,sy&#125;);<br>&#125;<br><span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(),vec.<span class="hljs-built_in">end</span>());tp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;vec.<span class="hljs-built_in">size</span>();i++)&#123;<br><span class="hljs-keyword">while</span>(tp&gt;<span class="hljs-number">1</span>&amp;&amp;(vec[i]-vec[stk[tp<span class="hljs-number">-1</span>]])*(vec[stk[tp]]-vec[stk[tp<span class="hljs-number">-1</span>]])&lt;=<span class="hljs-number">0</span>)tp--;<br>stk[++tp]=i;<br>&#125;<br>vec1.<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tp;i++)<br>vec1.<span class="hljs-built_in">push_back</span>(vec[stk[i]]);<br>sx=sy=<span class="hljs-number">0</span>;vec.<span class="hljs-built_in">clear</span>();tp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=mid;i&gt;=l;i--)&#123;<br>sx+=a[i].y,sy+=a[i].x;<br>vec.<span class="hljs-built_in">push_back</span>((Pt)&#123;sx,sy&#125;);<br>&#125;<br><span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(),vec.<span class="hljs-built_in">end</span>());<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;vec.<span class="hljs-built_in">size</span>();i++)&#123;<br><span class="hljs-keyword">while</span>(tp&gt;<span class="hljs-number">1</span>&amp;&amp;(vec[i]-vec[stk[tp<span class="hljs-number">-1</span>]])*(vec[stk[tp]]-vec[stk[tp<span class="hljs-number">-1</span>]])&lt;=<span class="hljs-number">0</span>)tp--;<br>stk[++tp]=i;<br>&#125;<br>vec2.<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tp;i++)<br>vec2.<span class="hljs-built_in">push_back</span>(vec[stk[i]]);<br>tt=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;vec1.<span class="hljs-built_in">size</span>();i++)<br>t[++tt]=vec1[i]-vec1[i<span class="hljs-number">-1</span>];<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;vec2.<span class="hljs-built_in">size</span>();i++)<br>t[++tt]=vec2[i]-vec2[i<span class="hljs-number">-1</span>];<br><span class="hljs-built_in">sort</span>(t+<span class="hljs-number">1</span>,t+tt+<span class="hljs-number">1</span>,cmp2);<br>now=vec1[<span class="hljs-number">0</span>]+vec2[<span class="hljs-number">0</span>];<br>b2[++tot2]=now;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tt;i++)&#123;<br>now=now+t[i];<br>b2[++tot2]=now;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>n=<span class="hljs-built_in">read</span>(),m=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>a[i].x=<span class="hljs-built_in">read</span>(),a[i].y=<span class="hljs-built_in">read</span>();<br>sx[i]=sx[i<span class="hljs-number">-1</span>]+a[i].x;<br>sy[i]=sy[i<span class="hljs-number">-1</span>]+a[i].y;<br>&#125;<br>rll tmp1=<span class="hljs-number">0</span>,tmp2=<span class="hljs-number">0</span>,tmp3=<span class="hljs-number">0</span>,tmp4=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>tmp1=<span class="hljs-built_in">max</span>(tmp1,sy[i]+tmp3);<br>tmp2=<span class="hljs-built_in">min</span>(tmp2,sy[i]+tmp4);<br>tmp3=<span class="hljs-built_in">max</span>(tmp3,-sy[i]);<br>tmp4=<span class="hljs-built_in">min</span>(tmp4,-sy[i]);<br>&#125;<br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,n);<br><span class="hljs-built_in">sort</span>(b1+<span class="hljs-number">1</span>,b1+tot1+<span class="hljs-number">1</span>);tp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tot1;i++)&#123;<br><span class="hljs-keyword">while</span>(tp&gt;<span class="hljs-number">1</span>&amp;&amp;(b1[i]-b1[stk[tp<span class="hljs-number">-1</span>]])*(b1[stk[tp]]-b1[stk[tp<span class="hljs-number">-1</span>]])&gt;=<span class="hljs-number">0</span>)tp--;<br>stk[++tp]=i;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tp;i++)<br>down[i]=b1[stk[i]];<br>rint lim1=tp;<span class="hljs-built_in">sort</span>(b2+<span class="hljs-number">1</span>,b2+tot2+<span class="hljs-number">1</span>);tp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tot2;i++)&#123;<br><span class="hljs-keyword">while</span>(tp&gt;<span class="hljs-number">1</span>&amp;&amp;(b2[i]-b2[stk[tp<span class="hljs-number">-1</span>]])*(b2[stk[tp]]-b2[stk[tp<span class="hljs-number">-1</span>]])&lt;=<span class="hljs-number">0</span>)tp--;<br>stk[++tp]=i;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tp;i++)<br>up[i]=b2[stk[i]];<br>rint lim2=tp;<br><span class="hljs-keyword">while</span>(m--)&#123;<br>rint px=<span class="hljs-built_in">read</span>(),py=<span class="hljs-built_in">read</span>();<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(!py)res=<span class="hljs-built_in">max</span>(px*tmp1,px*tmp2);<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(py&lt;<span class="hljs-number">0</span>)&#123;<br>rint l=<span class="hljs-number">2</span>,r=lim2,pos=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span>(l&lt;=r)&#123;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(<span class="hljs-number">1.0L</span>*(up[mid].y-up[mid<span class="hljs-number">-1</span>].y)/(up[mid].x-up[mid<span class="hljs-number">-1</span>].x)&gt;=<span class="hljs-number">1.0L</span>*px/py)pos=mid,l=mid+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">else</span> r=mid<span class="hljs-number">-1</span>;<br>&#125;<br>res=px*up[pos].x-py*up[pos].y;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>rint l=<span class="hljs-number">2</span>,r=lim1,pos=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span>(l&lt;=r)&#123;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(<span class="hljs-number">1.0L</span>*(down[mid].y-down[mid<span class="hljs-number">-1</span>].y)/(down[mid].x-down[mid<span class="hljs-number">-1</span>].x)&lt;=<span class="hljs-number">1.0L</span>*px/py)pos=mid,l=mid+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">else</span> r=mid<span class="hljs-number">-1</span>;<br>&#125;<br>res=px*down[pos].x-py*down[pos].y;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,<span class="hljs-built_in">max</span>(res,<span class="hljs-number">0ll</span>));<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="战神归来"><a href="#战神归来" class="headerlink" title="战神归来"></a>战神归来</h1><blockquote><p>$n$ 个人坐地铁，第 $i$ 个人要从 $S_i$ 到 $E_i$ ，从第 $i$ 站到第 $j$ 站花费的代价是 $|i-j|$，一个人只能沿着自己原本的路线走，但是可以在某站停下来和别人交换地铁卡，这样的话就能够将起点设置为对方的起点从而达到逃票的效果，问最少支付多少钱并且给出方案 。</p></blockquote><p>首先考虑最少支付多少钱，可以考虑每一条边的贡献，如果有两个人走相反的方向，那么让这两个人换一下卡一定不劣，所以对于 $S_i&lt;E_i$ 的给这一段加一，否则减一，那么最终一条边的绝对值就是对答案的贡献。</p><p>考虑构造方案，不难发现只需要在能够换卡的时候随便换就行了，所以只需要维护这个东西，发现两种走法不是很好在一起考虑，因为走的方向是反的，于是将方向统一，即维护一条从左向右的扫描线，对于从左向右的点，在它的起点处加入这条线，对于从右向左的点，在它的终点处加入这条线，对于每一种线加入时考虑与它相对的那种线是否存在，如果存在就直接让两条线换卡，否则就加入队列，注意弹出不合法也就是右边的那个点没有跨过当前扫描线的情况，注意到一次换卡会在较短的那条线处结束，所以应该在结束的时候重新把较长的线加入，除非两条线一样长，考虑一次换卡操作最多只需要操作三次，最多换 $n$ 次卡，并且最后需要走到终点，于是操作次数是 $4n$ 级别的。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">4e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> M=<span class="hljs-number">1e6</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> cnt[M],S[N],E[N],pre[N],nxt[N],rd[N],tot;<br>vector&lt;<span class="hljs-type">int</span>&gt; vec1[M],vec2[M],vec;<br>unordered_map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; vis[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<span class="hljs-type">int</span> typ,u,v,pos;&#125;ans[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<span class="hljs-type">int</span> to,nxt;&#125;e[N&lt;&lt;<span class="hljs-number">2</span>];<br><span class="hljs-type">int</span> h[N],idx;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">mov</span><span class="hljs-params">(rint x,rint y,rint z)</span></span>&#123;<span class="hljs-keyword">if</span>(vis[x].<span class="hljs-built_in">find</span>(y)!=vis[x].<span class="hljs-built_in">end</span>())<span class="hljs-keyword">return</span> ;vis[x][y]=++tot;ans[tot]=(Node)&#123;<span class="hljs-number">0</span>,x,y,z&#125;;&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">chg</span><span class="hljs-params">(rint x,rint y,rint z)</span></span>&#123;ans[++tot]=(Node)&#123;<span class="hljs-number">1</span>,x,y,z&#125;;&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node2</span>&#123;<br><span class="hljs-type">int</span> x,y;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> Node2&amp;A)<span class="hljs-type">const</span>&#123;<br><span class="hljs-keyword">return</span> y&lt;A.y;<br>&#125;<br>&#125;;<br><span class="hljs-type">int</span> match[N],q[N],arr[N],hh,tt;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Heap</span>&#123;<br>Node2 val[N];<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span></span>&#123;<span class="hljs-keyword">return</span> cnt==<span class="hljs-number">0</span>;&#125;<br><span class="hljs-function">Node2 <span class="hljs-title">top</span><span class="hljs-params">()</span></span>&#123;<span class="hljs-keyword">return</span> val[<span class="hljs-number">1</span>];&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(Node2 v)</span></span>&#123;<br>val[++cnt]=v;<br><span class="hljs-keyword">for</span>(rint p1=cnt,p2=cnt&gt;&gt;<span class="hljs-number">1</span>;p2;p1&gt;&gt;=<span class="hljs-number">1</span>,p2&gt;&gt;=<span class="hljs-number">1</span>)&#123;<br><span class="hljs-keyword">if</span>(val[p1]&lt;val[p2])<br><span class="hljs-built_in">swap</span>(val[p1],val[p2]);<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">swap</span>(val[cnt],val[<span class="hljs-number">1</span>]);cnt--;<br><span class="hljs-keyword">for</span>(rint x=<span class="hljs-number">1</span>;;)&#123;<br>rint ls=x&lt;&lt;<span class="hljs-number">1</span>,rs=x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(rs&lt;=cnt&amp;&amp;val[rs]&lt;val[ls])&#123;<br><span class="hljs-keyword">if</span>(val[rs]&lt;val[x])<span class="hljs-built_in">swap</span>(val[x],val[rs]);<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>x=rs;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ls&lt;=cnt)&#123;<br><span class="hljs-keyword">if</span>(val[ls]&lt;val[x])<span class="hljs-built_in">swap</span>(val[x],val[ls]);<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>x=ls;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;q1,q2,q3;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">topsort</span><span class="hljs-params">()</span></span>&#123;<br>hh=<span class="hljs-number">0</span>;tt=<span class="hljs-number">-1</span>;rint at=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tot;i++)<br>(!rd[i])?q[++tt]=i:<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(hh&lt;=tt)&#123;<br>rint u=q[hh++];<br>arr[++at]=u;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br>(!--rd[v])?q[++tt]=v:<span class="hljs-number">0</span>;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>&#123;<br>rint x=<span class="hljs-number">0</span>;<span class="hljs-type">char</span> ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">while</span>(ch&lt;<span class="hljs-string">&#x27;0&#x27;</span>||ch&gt;<span class="hljs-string">&#x27;9&#x27;</span>)ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">while</span>(ch&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;ch&gt;=<span class="hljs-string">&#x27;0&#x27;</span>)x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">&#x27;0&#x27;</span>,ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> x;<br>&#125;<br><span class="hljs-type">char</span> stk[<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> tp;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(rint x)</span></span>&#123;<br><span class="hljs-keyword">if</span>(!x)<span class="hljs-built_in">putchar</span>(<span class="hljs-string">&#x27;0&#x27;</span>);<br><span class="hljs-keyword">else</span> &#123;<br>tp=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(x)<br>stk[++tp]=x%<span class="hljs-number">10</span>+<span class="hljs-string">&#x27;0&#x27;</span>,x/=<span class="hljs-number">10</span>;<br><span class="hljs-keyword">while</span>(tp)<br><span class="hljs-built_in">putchar</span>(stk[tp--]);<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint T=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">while</span>(T--)&#123;<br><span class="hljs-built_in">memset</span>(nxt,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(nxt));<br><span class="hljs-built_in">memset</span>(rd,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(rd));<br><span class="hljs-built_in">memset</span>(h,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(h));idx=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">memset</span>(cnt,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(cnt));tot=<span class="hljs-number">0</span>;<br>rint n=<span class="hljs-built_in">read</span>(),m=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>S[i]=<span class="hljs-built_in">read</span>();E[i]=<span class="hljs-built_in">read</span>();<br>cnt[S[i]]++,cnt[E[i]]--;<br><span class="hljs-keyword">if</span>(S[i]&lt;E[i])vec1[S[i]].<span class="hljs-built_in">push_back</span>(i);<br><span class="hljs-keyword">else</span> vec2[E[i]].<span class="hljs-built_in">push_back</span>(i);<br>vis[i].<span class="hljs-built_in">clear</span>();<br>vis[i][S[i]]=<span class="hljs-number">0</span>;<br>&#125;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>cnt[i]+=cnt[i<span class="hljs-number">-1</span>];<br>res+=<span class="hljs-built_in">abs</span>(cnt[i]);<br><span class="hljs-keyword">while</span>(!q1.<span class="hljs-built_in">empty</span>()&amp;&amp;q1.<span class="hljs-built_in">top</span>().y==i)q1.<span class="hljs-built_in">pop</span>();<br><span class="hljs-keyword">while</span>(!q2.<span class="hljs-built_in">empty</span>()&amp;&amp;q2.<span class="hljs-built_in">top</span>().y==i)q2.<span class="hljs-built_in">pop</span>();<br><span class="hljs-keyword">while</span>(!q3.<span class="hljs-built_in">empty</span>()&amp;&amp;q3.<span class="hljs-built_in">top</span>().y==i)&#123;<br>rint x=q3.<span class="hljs-built_in">top</span>().x;q3.<span class="hljs-built_in">pop</span>();<br>match[match[x]]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(S[match[x]]&lt;E[match[x]]&amp;&amp;E[match[x]]!=i)q1.<span class="hljs-built_in">push</span>((Node2)&#123;match[x],E[match[x]]&#125;);<br><span class="hljs-keyword">if</span>(S[match[x]]&gt;E[match[x]]&amp;&amp;S[match[x]]!=i)q2.<span class="hljs-built_in">push</span>((Node2)&#123;match[x],S[match[x]]&#125;);<br>match[x]=<span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-keyword">while</span>(!q1.<span class="hljs-built_in">empty</span>()&amp;&amp;!q2.<span class="hljs-built_in">empty</span>())&#123;<br>Node2 x=q1.<span class="hljs-built_in">top</span>(),y=q2.<span class="hljs-built_in">top</span>();<br>q1.<span class="hljs-built_in">pop</span>();q2.<span class="hljs-built_in">pop</span>();<br>match[x.x]=y.x;match[y.x]=x.x;<br><span class="hljs-built_in">mov</span>(x.x,i,i);<span class="hljs-built_in">mov</span>(y.x,i,i);<span class="hljs-built_in">chg</span>(x.x,y.x,i);<br><span class="hljs-keyword">if</span>(x.y&lt;y.y)q3.<span class="hljs-built_in">push</span>(x);<br><span class="hljs-keyword">else</span> q3.<span class="hljs-built_in">push</span>(y);<br>&#125;<br><span class="hljs-keyword">for</span>(rint v:vec1[i])&#123;<br><span class="hljs-keyword">if</span>(!q2.<span class="hljs-built_in">empty</span>())&#123;<br>Node2 u=q2.<span class="hljs-built_in">top</span>();q2.<span class="hljs-built_in">pop</span>();<br>match[u.x]=v;match[v]=u.x;<br><span class="hljs-built_in">mov</span>(u.x,i,i);<span class="hljs-built_in">mov</span>(v,i,i);<span class="hljs-built_in">chg</span>(u.x,v,i);<br><span class="hljs-keyword">if</span>(u.y&lt;E[v])q3.<span class="hljs-built_in">push</span>((Node2)&#123;u.x,u.y&#125;);<br><span class="hljs-keyword">else</span> q3.<span class="hljs-built_in">push</span>((Node2)&#123;v,E[v]&#125;);<br>&#125;<span class="hljs-keyword">else</span> q1.<span class="hljs-built_in">push</span>((Node2)&#123;v,E[v]&#125;);<br>&#125;<br><span class="hljs-keyword">for</span>(rint v:vec2[i])&#123;<br><span class="hljs-keyword">if</span>(!q1.<span class="hljs-built_in">empty</span>())&#123;<br>Node2 u=q1.<span class="hljs-built_in">top</span>();q1.<span class="hljs-built_in">pop</span>();<br>match[u.x]=v;match[v]=u.x;<br><span class="hljs-built_in">mov</span>(u.x,i,i);<span class="hljs-built_in">mov</span>(v,i,i);<span class="hljs-built_in">chg</span>(u.x,v,i);<br><span class="hljs-keyword">if</span>(u.y&lt;S[v])q3.<span class="hljs-built_in">push</span>((Node2)&#123;u.x,u.y&#125;);<br><span class="hljs-keyword">else</span> q3.<span class="hljs-built_in">push</span>((Node2)&#123;v,S[v]&#125;);<br>&#125;<span class="hljs-keyword">else</span> q2.<span class="hljs-built_in">push</span>((Node2)&#123;v,S[v]&#125;);<br>&#125;<br>vec1[i].<span class="hljs-built_in">clear</span>();<br>vec2[i].<span class="hljs-built_in">clear</span>();<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-built_in">mov</span>(i,E[i],E[i]);<br>vec.<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> v:vis[i])<br>vec.<span class="hljs-built_in">push_back</span>(v.first);<br><span class="hljs-keyword">if</span>(S[i]&lt;E[i])<span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(),vec.<span class="hljs-built_in">end</span>(),[](rint x,rint y)&#123;<span class="hljs-keyword">return</span> x&lt;y;&#125;);<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(),vec.<span class="hljs-built_in">end</span>(),[](rint x,rint y)&#123;<span class="hljs-keyword">return</span> x&gt;y;&#125;);<br>rint lst=<span class="hljs-number">0</span>;pre[i]=vis[i][vec[<span class="hljs-number">1</span>]];<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;vec.<span class="hljs-built_in">size</span>();j++)&#123;<br>rint x=vis[i][vec[j]];<br>nxt[lst]=x;<br><span class="hljs-keyword">if</span>(lst)<span class="hljs-built_in">Ins</span>(lst,x),rd[x]++;<br>lst=x;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tot;i++)&#123;<br><span class="hljs-keyword">if</span>(ans[i].typ==<span class="hljs-number">1</span>)&#123;<br>rint x=vis[ans[i].u][ans[i].pos],y=vis[ans[i].v][ans[i].pos];<br><span class="hljs-keyword">if</span>(x)<span class="hljs-built_in">Ins</span>(x,i),rd[i]++;<br><span class="hljs-keyword">if</span>(x&amp;&amp;nxt[x])<span class="hljs-built_in">Ins</span>(i,nxt[x]),rd[nxt[x]]++;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ans[i].pos!=E[ans[i].u])<span class="hljs-built_in">Ins</span>(i,pre[ans[i].u]),rd[pre[ans[i].u]]++;<br><span class="hljs-keyword">if</span>(y)<span class="hljs-built_in">Ins</span>(y,i),rd[i]++;<br><span class="hljs-keyword">if</span>(y&amp;&amp;nxt[y])<span class="hljs-built_in">Ins</span>(i,nxt[y]),rd[nxt[y]]++;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ans[i].pos!=E[ans[i].v])<span class="hljs-built_in">Ins</span>(i,pre[ans[i].v]),rd[pre[ans[i].v]]++;<br>&#125;<br>&#125;<br><span class="hljs-built_in">topsort</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld %d\n&quot;</span>,res,tot);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tot;i++)<br><span class="hljs-built_in">print</span>(ans[arr[i]].typ),<span class="hljs-built_in">putchar</span>(<span class="hljs-string">&#x27; &#x27;</span>),<span class="hljs-built_in">print</span>(ans[arr[i]].u),<span class="hljs-built_in">putchar</span>(<span class="hljs-string">&#x27; &#x27;</span>),<span class="hljs-built_in">print</span>(ans[arr[i]].v),<span class="hljs-built_in">putchar</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="组合数问题"><a href="#组合数问题" class="headerlink" title="组合数问题"></a>组合数问题</h1><blockquote><p>给定 $n,m$ ，求 $\sum_{i=0}^n(-1)^i\sum_{j=0}^nj^m\binom{j}{i}(m+i)^j$ 。</p></blockquote><p>首先发现这个 $i$ 在最外边但是只有一个 $-1$ 比较浪费，所以考虑把 $j$ 换出来，然后大力推式子 。</p><p>$$<br>\begin{aligned}<br>\sum_{i=0}^n(-1)^i\sum_{j=0}^nj^m\binom{j}{i}(m+i)^j&amp;=\sum_{j=0}^nj^m\sum_{i=0}^n(-1)^i\binom{j}{i}\sum_{k=0}^j\binom{j}{k}m^{j-k}i^k\<br>&amp;=\sum_{j=0}^nj^m\sum_{k=0}^j\binom{j}{k}m^{j-k}\sum_{i=0}^n(-1)^i\binom{j}{i}\sum_{x=0}^i\binom{i}{x}{k \brace x}x!\<br>&amp;=\sum_{j=0}^nj^m\sum_{k=0}^j\binom{j}{k}m^{j-k}\sum_{x=0}^n{k \brace x}x!\sum_{i=0}^n(-1)^i\binom{j}{i}\binom{i}{x}\<br>&amp;=\sum_{j=0}^nj^m\sum_{k=0}^j\binom{j}{k}m^{j-k}\sum_{x=0}^n{k \brace x}x!\sum_{i=0}^n(-1)^i\binom{j}{x}\binom{j-x}{i-x}\<br>&amp;=\sum_{j=0}^nj^m\sum_{k=0}^j\binom{j}{k}m^{j-k}\sum_{x=0}^n\binom{j}{x}{k \brace x}x!\sum_{i=0}^n(-1)^i\binom{j-x}{i-x}\<br>&amp;=\sum_{j=0}^nj^m\sum_{k=0}^j\binom{j}{k}m^{j-k}\sum_{x=0}^n\binom{j}{x}{k \brace x}x!(-1)^x\sum_{i=0}^n(-1)^{i-x}\binom{j-x}{i-x}\<br>&amp;=\sum_{j=0}^nj^m\sum_{k=0}^j\binom{j}{k}m^{j-k}\sum_{x=0}^n\binom{j}{x}{k \brace x}x!(-1)^x\sum_{i=0}^n(-1)^{i}\binom{j-x}{i}\<br>&amp;=\sum_{j=0}^nj^m\sum_{k=0}^j\binom{j}{k}m^{j-k}\sum_{x=0}^n\binom{j}{x}{k \brace x}x!(-1)^x[j==x]\<br>&amp;=\sum_{j=0}^nj^m\sum_{k=0}^j\binom{j}{k}m^{j-k}{k \brace j}j!(-1)^j\<br>&amp;=\sum_{j=0}^nj^mj!(-1)^j\<br>\end{aligned}<br>$$</p><p>然后就是一个十分好算的式子，直接算就行了，注意以后推式子的时候一直往下推，推到不能推再回溯 。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">998244353</span>;<br>ll fac[N],inv[N];<br><span class="hljs-function">ll <span class="hljs-title">fpow</span><span class="hljs-params">(rll a,rll b)</span></span>&#123;<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(;b;b&gt;&gt;=<span class="hljs-number">1</span>,a=a*a%p)<br><span class="hljs-keyword">if</span>(b&amp;<span class="hljs-number">1</span>)res=res*a%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n,m;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br>fac[<span class="hljs-number">0</span>]=fac[<span class="hljs-number">1</span>]=inv[<span class="hljs-number">0</span>]=inv[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>fac[i]=fac[i<span class="hljs-number">-1</span>]*i%p;<br>inv[i]=p-p/i*inv[p%i]%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>inv[i]=inv[i]*inv[i<span class="hljs-number">-1</span>]%p;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=n;i++)<br>res+=(i&amp;<span class="hljs-number">1</span>?<span class="hljs-number">-1</span>:<span class="hljs-number">1</span>)*<span class="hljs-built_in">fpow</span>(i,m)*fac[i]%p;<br>res=(res%p+p)%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h1><blockquote><p>定义一个点是好点当且仅当这个点的坐标 $1\leq x \leq n$，$1\leq y \leq m$，并且这个点的坐标都是整数 。</p><p>求有多少个三角形的三个顶点都是好点并且三角形内不包含其它好点 。</p></blockquote><p>于是发现对于所有的三角形，其最长边一定在一个矩形的对角线上，所以只需要枚举一条对角线算贡献即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e7</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Add</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;x+=y;<span class="hljs-keyword">return</span> x&gt;=p?x-p:x;&#125;<br><span class="hljs-type">int</span> pri[N],s[N];<br><span class="hljs-type">bool</span> npri[N];<br>unordered_map&lt;ll,ll&gt; dp1,dp2,dp3,dp4;<br><span class="hljs-function">ll <span class="hljs-title">S1</span><span class="hljs-params">(rll n)</span></span>&#123;<br><span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">2e7</span>)<span class="hljs-keyword">return</span> s[n];<br><span class="hljs-keyword">if</span>(dp1.<span class="hljs-built_in">find</span>(n)!=dp1.<span class="hljs-built_in">end</span>())<span class="hljs-keyword">return</span> dp1[n];<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rll l=<span class="hljs-number">2</span>,r;l&lt;=n;l=r+<span class="hljs-number">1</span>)&#123;<br>r=n/(n/l);<br>res-=(r-l+<span class="hljs-number">1</span>)%p*<span class="hljs-built_in">S1</span>(n/l)%p;<br>&#125;<br><span class="hljs-keyword">return</span> dp1[n]=(res%p+p)%p;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">solve1</span><span class="hljs-params">(rll n,rll m)</span></span>&#123;<br>pri[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;s[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">memset</span>(npri,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(npri));<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=<span class="hljs-number">2e7</span>;i++)&#123;<br><span class="hljs-keyword">if</span>(!npri[i])&#123;<br>pri[++pri[<span class="hljs-number">0</span>]]=i;<br>s[i]=p<span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=pri[<span class="hljs-number">0</span>]&amp;&amp;i*pri[j]&lt;=<span class="hljs-number">2e7</span>;j++)&#123;<br>npri[i*pri[j]]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(i%pri[j]==<span class="hljs-number">0</span>)&#123;<br>s[i*pri[j]]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>s[i*pri[j]]=p-s[i];<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">2e7</span>;i++)<br>s[i]=<span class="hljs-built_in">Add</span>(s[i<span class="hljs-number">-1</span>],s[i]);<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rll l=<span class="hljs-number">1</span>,r;l&lt;=n&amp;&amp;l&lt;=m;l=r+<span class="hljs-number">1</span>)&#123;<br>r=<span class="hljs-built_in">min</span>(n/(n/l),m/(m/l));<br>res+=(n/l%p)*(m/l%p)%p*(<span class="hljs-built_in">S1</span>(r)-<span class="hljs-built_in">S1</span>(l<span class="hljs-number">-1</span>))%p;<br>&#125;<br>res=(res%p+p)%p*n%p*m%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> ll <span class="hljs-title">sum1</span><span class="hljs-params">(rll n)</span></span>&#123;<br>n%=p;<span class="hljs-keyword">return</span> n*(n+<span class="hljs-number">1</span>)%p*(p+<span class="hljs-number">1</span>&gt;&gt;<span class="hljs-number">1</span>)%p;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> ll <span class="hljs-title">sum2</span><span class="hljs-params">(rll n)</span></span>&#123;<br>n%=p;<span class="hljs-keyword">return</span> (<span class="hljs-number">2</span>*n+<span class="hljs-number">1</span>)*n%p*(n+<span class="hljs-number">1</span>)%p*<span class="hljs-number">166666668</span>%p;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">S2</span><span class="hljs-params">(rll n)</span></span>&#123;<br><span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">2e7</span>)<span class="hljs-keyword">return</span> s[n];<br><span class="hljs-keyword">if</span>(dp2.<span class="hljs-built_in">find</span>(n)!=dp2.<span class="hljs-built_in">end</span>())<span class="hljs-keyword">return</span> dp2[n];<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rll l=<span class="hljs-number">2</span>,r;l&lt;=n;l=r+<span class="hljs-number">1</span>)&#123;<br>r=n/(n/l);<br>res-=(<span class="hljs-built_in">sum1</span>(r)-<span class="hljs-built_in">sum1</span>(l<span class="hljs-number">-1</span>))*<span class="hljs-built_in">S2</span>(n/l)%p;<br>&#125;<br><span class="hljs-keyword">return</span> dp2[n]=(res%p+p)%p;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">solve2</span><span class="hljs-params">(rll n,rll m)</span></span>&#123;<br>pri[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;s[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">memset</span>(npri,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(npri));<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=<span class="hljs-number">2e7</span>;i++)&#123;<br><span class="hljs-keyword">if</span>(!npri[i])&#123;<br>pri[++pri[<span class="hljs-number">0</span>]]=i;<br>s[i]=<span class="hljs-number">1ll</span>*(p<span class="hljs-number">-1</span>)*i%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=pri[<span class="hljs-number">0</span>]&amp;&amp;i*pri[j]&lt;=<span class="hljs-number">2e7</span>;j++)&#123;<br>npri[i*pri[j]]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(i%pri[j]==<span class="hljs-number">0</span>)&#123;<br>s[i*pri[j]]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>s[i*pri[j]]=<span class="hljs-number">1ll</span>*(p-s[i])*pri[j]%p;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">2e7</span>;i++)<br>s[i]=<span class="hljs-built_in">Add</span>(s[i<span class="hljs-number">-1</span>],s[i]);<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rll l=<span class="hljs-number">1</span>,r;l&lt;=n&amp;&amp;l&lt;=m;l=r+<span class="hljs-number">1</span>)&#123;<br>r=<span class="hljs-built_in">min</span>(n/(n/l),m/(m/l));<br>res+=(<span class="hljs-built_in">S2</span>(r)-<span class="hljs-built_in">S2</span>(l<span class="hljs-number">-1</span>))*((n/l)*<span class="hljs-built_in">sum1</span>(m/l)%p*n%p+(m/l)*<span class="hljs-built_in">sum1</span>(n/l)%p*m%p)%p;<br>&#125;<br><span class="hljs-keyword">return</span> (res%p+p)%p;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">S4</span><span class="hljs-params">(rll n)</span></span>&#123;<br><span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">2e7</span>)<span class="hljs-keyword">return</span> s[n];<br><span class="hljs-keyword">if</span>(dp4.<span class="hljs-built_in">find</span>(n)!=dp4.<span class="hljs-built_in">end</span>())<span class="hljs-keyword">return</span> dp4[n];<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rll l=<span class="hljs-number">2</span>,r;l&lt;=n;l=r+<span class="hljs-number">1</span>)&#123;<br>r=n/(n/l);<br>res-=(<span class="hljs-built_in">sum2</span>(r)-<span class="hljs-built_in">sum2</span>(l<span class="hljs-number">-1</span>))%p*<span class="hljs-built_in">S4</span>(n/l)%p;<br>&#125;<br><span class="hljs-keyword">return</span> dp4[n]=(res%p+p)%p;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">solve4</span><span class="hljs-params">(rll n,rll m)</span></span>&#123;<br>pri[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;s[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">memset</span>(npri,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(npri));<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=<span class="hljs-number">2e7</span>;i++)&#123;<br><span class="hljs-keyword">if</span>(!npri[i])&#123;<br>pri[++pri[<span class="hljs-number">0</span>]]=i;<br>s[i]=<span class="hljs-number">1ll</span>*(p<span class="hljs-number">-1</span>)*i%p*i%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=pri[<span class="hljs-number">0</span>]&amp;&amp;i*pri[j]&lt;=<span class="hljs-number">2e7</span>;j++)&#123;<br>npri[i*pri[j]]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(i%pri[j]==<span class="hljs-number">0</span>)&#123;<br>s[i*pri[j]]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>s[i*pri[j]]=<span class="hljs-number">1ll</span>*(p-s[i])*pri[j]%p*pri[j]%p;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">2e7</span>;i++)<br>s[i]=<span class="hljs-built_in">Add</span>(s[i<span class="hljs-number">-1</span>],s[i]);<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rll l=<span class="hljs-number">1</span>,r;l&lt;=n&amp;&amp;l&lt;=m;l=r+<span class="hljs-number">1</span>)&#123;<br>r=<span class="hljs-built_in">min</span>(n/(n/l),m/(m/l));<br>res+=(<span class="hljs-built_in">S4</span>(r)-<span class="hljs-built_in">S4</span>(l<span class="hljs-number">-1</span>))*<span class="hljs-built_in">sum1</span>(n/l)%p*<span class="hljs-built_in">sum1</span>(m/l)%p;<br>&#125;<br><span class="hljs-keyword">return</span> (res%p+p)%p;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rll n,m;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);<br>rll res=<span class="hljs-built_in">solve1</span>(n,m)-<span class="hljs-built_in">solve2</span>(n,m)+<span class="hljs-built_in">solve4</span>(n,m);<br>res=(res%p+p)*<span class="hljs-number">4</span>%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res%p);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="树"><a href="#树" class="headerlink" title="树"></a>树</h1><p>读题题 。</p><p>考虑给出的函数 $f_u$，是从上向下考虑的，这样做并不是很好考虑，因为一个点可能有很多子树，可以将它反过来，枚举终点，那么跳到它的可能性是 $2^d$ ，所以只需要维护 $\sum 2^d$ 即可，考虑最终每个点的贡献，是类似 $k\times 2^d+b$ 的形式，所以只需要用树状数组维护 $k$ 即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">5e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">998244353</span>;<br><span class="hljs-function">ll <span class="hljs-title">fpow</span><span class="hljs-params">(rll a,rll b)</span></span>&#123;<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(;b;b&gt;&gt;=<span class="hljs-number">1</span>,a=a*a%p)<br><span class="hljs-keyword">if</span>(b&amp;<span class="hljs-number">1</span>)res=res*a%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt;<br>&#125;e[N&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-type">int</span> h[N],idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;<br>e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;<br>&#125;<br><span class="hljs-type">int</span> pt[N];<br>ll sum[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint u,rint pw)</span></span>&#123;<br>sum[pt[u]]+=pw;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-built_in">dfs</span>(v,(pw&lt;&lt;<span class="hljs-number">1</span>)%p);<br>&#125;<br>&#125;<br><span class="hljs-type">int</span> siz[N],dfn[N],rk[N],Time;<br>ll tr[N],val[N],s[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(rint x,rll v)</span></span>&#123;<br><span class="hljs-keyword">for</span>(;x&lt;=Time;x+=x&amp;-x)<br>tr[x]+=v;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(rint x)</span></span>&#123;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(;x;x&amp;=x<span class="hljs-number">-1</span>)<br>res+=tr[x];<br><span class="hljs-keyword">return</span> res%p;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint u)</span></span>&#123;<br>siz[u]=<span class="hljs-number">1</span>;dfn[u]=++Time;rk[Time]=u;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br>val[v]=(val[u]&lt;&lt;<span class="hljs-number">1</span>)%p;<br><span class="hljs-built_in">dfs</span>(v);<br>siz[u]+=siz[v];<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>rint x;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;x);<br><span class="hljs-built_in">Ins</span>(x,i);<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;pt[i]);<br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>);<br><span class="hljs-built_in">memset</span>(h,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(h));idx=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);sum[<span class="hljs-number">1</span>]%=p;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>rint x;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;x);<br><span class="hljs-built_in">Ins</span>(x,i);<br>sum[i]%=p;<br>&#125;<br>val[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>);<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>res+=sum[i];<br>s[i]=(s[i<span class="hljs-number">-1</span>]+val[rk[i]])%p;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res%p);<br>rint q;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;q);<br><span class="hljs-keyword">while</span>(q--)&#123;<br>rint x,y;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);<br>rll now=(<span class="hljs-built_in">query</span>(dfn[x])*val[x]+sum[x])%p*<span class="hljs-built_in">fpow</span>(val[y],p<span class="hljs-number">-2</span>)*<span class="hljs-number">2</span>%p;<br><span class="hljs-built_in">update</span>(dfn[y],now);<br><span class="hljs-built_in">update</span>(dfn[y]+siz[y],p-now);<br>res+=now*(s[dfn[y]+siz[y]<span class="hljs-number">-1</span>]-s[dfn[y]<span class="hljs-number">-1</span>])%p;<br>res=(res%p+p)%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res%p);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="网格"><a href="#网格" class="headerlink" title="网格"></a>网格</h1><blockquote><p>给出一张网格图，有一些格子不能走，只能向下或者向右走，每次询问从一个点能不能走到另一个点 。</p></blockquote><p>有一个显然的 $\frac{n^4}{32}$ 的做法，不过貌似过不去，考虑进行常数优化，首先可以手写 $bitset$ 做到除数是 $64$，然后可以在里边拆出来一位表示行，这样可以再除以 $2$，最后是 $\frac{n^4}{128}$ ，应该可以过 。</p><p>考虑另一个比较靠谱的做法，对整张图进行分治，每次考虑跨过分治中心的询问，并把不跨过的向两侧递归，最后的时间复杂度是 $\frac{nm^2logn}{32}$ 。</p><p>其实已经想到了可以找几个特殊点，但是一直不知道找什么特殊点比较好，并且发现特殊点的做法是错的，没有扩展到找一条线就是对的，扩展了可能也不会做，因为没怎么用过分治，对于这种找点的问题可以进行分治，每次找中心然后分开递归 。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">510</span>;<br><span class="hljs-type">char</span> s[N][N];<br>bitset&lt;N&gt; f[N][N],g[N][N];<br><span class="hljs-type">int</span> n,m,q;<br><span class="hljs-type">bool</span> ans[<span class="hljs-number">600010</span>];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> id,x,y,xx,yy;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint l,rint r,vector&lt;Node&gt; vec)</span></span>&#123;<br><span class="hljs-keyword">if</span>(vec.<span class="hljs-built_in">empty</span>())<span class="hljs-keyword">return</span> ;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>g[mid][i].<span class="hljs-built_in">reset</span>();<br><span class="hljs-keyword">if</span>(s[mid][i]==<span class="hljs-string">&#x27;.&#x27;</span>)<br>g[mid][i]=g[mid][i<span class="hljs-number">-1</span>],g[mid][i].<span class="hljs-built_in">set</span>(i);<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=m;i;i--)&#123;<br>f[mid][i].<span class="hljs-built_in">reset</span>();<br><span class="hljs-keyword">if</span>(s[mid][i]==<span class="hljs-string">&#x27;.&#x27;</span>)<br>f[mid][i]=f[mid][i+<span class="hljs-number">1</span>],f[mid][i].<span class="hljs-built_in">set</span>(i);<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=mid<span class="hljs-number">-1</span>;i&gt;=l;i--)<br><span class="hljs-keyword">for</span>(rint j=m;j;j--)&#123;<br><span class="hljs-keyword">if</span>(s[i][j]==<span class="hljs-string">&#x27;.&#x27;</span>)f[i][j]=f[i+<span class="hljs-number">1</span>][j]|f[i][j+<span class="hljs-number">1</span>];<br><span class="hljs-keyword">else</span> f[i][j].<span class="hljs-built_in">reset</span>();<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=mid+<span class="hljs-number">1</span>;i&lt;=r;i++)<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=m;j++)&#123;<br><span class="hljs-keyword">if</span>(s[i][j]==<span class="hljs-string">&#x27;.&#x27;</span>)g[i][j]=g[i<span class="hljs-number">-1</span>][j]|g[i][j<span class="hljs-number">-1</span>];<br><span class="hljs-keyword">else</span> g[i][j].<span class="hljs-built_in">reset</span>();<br>&#125;<br>vector&lt;Node&gt; vl,vr;<br><span class="hljs-keyword">for</span>(Node v:vec)&#123;<br><span class="hljs-keyword">if</span>(v.x&gt;mid)vr.<span class="hljs-built_in">push_back</span>(v);<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(v.xx&lt;mid)vl.<span class="hljs-built_in">push_back</span>(v);<br><span class="hljs-keyword">else</span> ans[v.id]=(f[v.x][v.y]&amp;g[v.xx][v.yy]).<span class="hljs-built_in">any</span>();<br>&#125;<br><span class="hljs-built_in">dfs</span>(l,mid<span class="hljs-number">-1</span>,vl);<br><span class="hljs-built_in">dfs</span>(mid+<span class="hljs-number">1</span>,r,vr);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s[i]+<span class="hljs-number">1</span>);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;q);<br>vector&lt;Node&gt; vec;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=q;i++)&#123;<br>rint x,y,xx,yy;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;xx,&amp;yy);<br>vec.<span class="hljs-built_in">push_back</span>((Node)&#123;i,x,y,xx,yy&#125;);<br>&#125;<br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,n,vec);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=q;i++)<br><span class="hljs-built_in">puts</span>(ans[i]?<span class="hljs-string">&quot;Yes&quot;</span>:<span class="hljs-string">&quot;No&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="点分治"><a href="#点分治" class="headerlink" title="点分治"></a>点分治</h1><blockquote><p>对一棵基环树进行点分治，求最后时间复杂度的期望值。</p></blockquote><p>可以考虑任意两个点之间的贡献，一个点对另一个点有贡献，当且仅当存在一条路径使得在这条路径上，这个点是第一个被删除的，如果两个点间只有一条路径，那么最后的答案是显然的，如果有多条路径，还需要容斥一下。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">3e3</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br><span class="hljs-function">ll <span class="hljs-title">fpow</span><span class="hljs-params">(rll a,rll b)</span></span>&#123;<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(;b;b&gt;&gt;=<span class="hljs-number">1</span>,a=a*a%p)<br><span class="hljs-keyword">if</span>(b&amp;<span class="hljs-number">1</span>)res=res*a%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt;<br>&#125;e[N&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-type">int</span> h[N],idx=<span class="hljs-number">1</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;<br>e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;<br>&#125;<br><span class="hljs-type">bool</span> incir[N],vis[N];<br>vector&lt;<span class="hljs-type">int</span>&gt; vec;<br><span class="hljs-type">int</span> inv[N],stk[N],tp;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getcir</span><span class="hljs-params">(rint u,rint fa)</span></span>&#123;<br>stk[++tp]=u;<br>vis[u]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(i==fa)<span class="hljs-keyword">continue</span>;<br><span class="hljs-keyword">if</span>(vis[v])&#123;<br><span class="hljs-keyword">if</span>(vec.<span class="hljs-built_in">empty</span>())&#123;<br><span class="hljs-keyword">for</span>(rint j=tp;j;j--)&#123;<br>rint x=stk[j];<br>incir[x]=<span class="hljs-number">1</span>;<br>vec.<span class="hljs-built_in">push_back</span>(x);<br><span class="hljs-keyword">if</span>(x==v)<span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-built_in">getcir</span>(v,i^<span class="hljs-number">1</span>);<br>&#125;<br>tp--;<br>&#125;<br><span class="hljs-type">int</span> col[N],dis[N],dis2[N],fp[N][<span class="hljs-number">22</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint u,rint rt)</span></span>&#123;<br>col[u]=rt;dis[u]=dis[fp[u][<span class="hljs-number">0</span>]]+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;fp[u][i];i++)<br>fp[u][i+<span class="hljs-number">1</span>]=fp[fp[u][i]][i];<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(incir[v]||v==fp[u][<span class="hljs-number">0</span>])<span class="hljs-keyword">continue</span>;<br>fp[v][<span class="hljs-number">0</span>]=u;<br><span class="hljs-built_in">dfs</span>(v,rt);<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lca</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;<br><span class="hljs-keyword">if</span>(dis[x]&lt;dis[y])<span class="hljs-built_in">swap</span>(x,y);<br><span class="hljs-keyword">for</span>(rint dt=dis[x]-dis[y],i=<span class="hljs-number">0</span>;dt;i++,dt&gt;&gt;=<span class="hljs-number">1</span>)<br><span class="hljs-keyword">if</span>(dt&amp;<span class="hljs-number">1</span>)x=fp[x][i];<br><span class="hljs-keyword">if</span>(x==y)<span class="hljs-keyword">return</span> x;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">15</span>;~i;i--)<br><span class="hljs-keyword">if</span>(fp[x][i]!=fp[y][i])<br>x=fp[x][i],y=fp[y][i];<br><span class="hljs-keyword">return</span> fp[x][<span class="hljs-number">0</span>];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>rint x,y;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);<br><span class="hljs-built_in">Ins</span>(x,y);<span class="hljs-built_in">Ins</span>(y,x);<br>&#125;<br>inv[<span class="hljs-number">0</span>]=inv[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)<br>inv[i]=p<span class="hljs-number">-1ll</span>*p/i*inv[p%i]%p;<br><span class="hljs-built_in">getcir</span>(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br>rint r=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint x:vec)&#123;<br>dis2[x]=++r;<br><span class="hljs-built_in">dfs</span>(x,x);<br>&#125;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint x=<span class="hljs-number">1</span>;x&lt;=n;x++)&#123;<br><span class="hljs-keyword">for</span>(rint y=<span class="hljs-number">1</span>;y&lt;=n;y++)&#123;<br><span class="hljs-keyword">if</span>(col[x]==col[y])<br>res+=inv[dis[x]+dis[y]<span class="hljs-number">-2</span>*dis[<span class="hljs-built_in">lca</span>(x,y)]+<span class="hljs-number">1</span>];<br><span class="hljs-keyword">else</span> &#123;<br>rint dt=<span class="hljs-built_in">abs</span>(dis2[col[x]]-dis2[col[y]]);<br>res+=inv[dis[x]+dis[y]+dt<span class="hljs-number">-1</span>];<br>res+=inv[dis[x]+dis[y]+r-dt<span class="hljs-number">-1</span>];<br>res-=inv[dis[x]+dis[y]+r<span class="hljs-number">-2</span>];<br>&#125;<br>&#125;<br>&#125;<br>res=(res%p+p)%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="染色"><a href="#染色" class="headerlink" title="染色"></a>染色</h1><blockquote><p>给定一个长度为 $n$ 的棋盘，要求对其染色，初始均为白色，要将某些格子染成黑色，有 $q$ 次询问，每次询问形如第 $x$ 个格子必须是白色，任意两个黑色格子之间的距离不小于 $k$，回答方案数对 $998244353$ 取模的结果。</p></blockquote><p>首先不难想到一个 $dp$ 的写法，定义 $dp_i$ 表示最后一个黑色格子在 $i$ 的方案数，转移是一个类似前缀和的东西，不过要特殊考虑第 $x$ 个点，这个看上去就不是很方便，把它单步容斥掉，用总的减去它是黑色的方案，不妨设 $solve(n,k)$ 表示 $n$ 个格子，任意两个黑色格子的距离不小于 $k$<br>的方案数，那么答案显然是<br>$$<br>solve(n,k)-solve(x-k-1,k)\times solve(n-x-k,k)<br>$$ </p><p>由于单次是 $O(n)$ 的并不能通过，所以考虑换一种做法，大概想到用组合数说不定可以推式子，那么考虑组合含义，可以钦定每个黑色格子之前必须放 $k-1$ 个白色格子，这样枚举黑色格子的个数，提前拿走若干白色格子，设有 $i$ 个黑色格子，不难得到答案是 $\binom{n-(i-1)(k-1)}{i}$，仔细思考一波后发现这个式子也不太好优化，考虑到它是 $O(n/k)$ 的，那么 $k$ 比较大的时候可以直接做，而对于 $k$ 比较小的情况可以分别跑一个 $dp$ 来预处理，所以最后时间复杂度是 $O(n\sqrt n)$ 。</p><p>想到的暴力不要轻易否定，说不定可以用来分治。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> S=<span class="hljs-number">220</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">998244353</span>;<br><span class="hljs-type">int</span> ans[<span class="hljs-number">225</span>][N],fac[N],inv[N],dp[N],s[N];<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Add</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;x+=y;<span class="hljs-keyword">return</span> x&gt;=p?x-p:x;&#125;<br><span class="hljs-function">ll <span class="hljs-title">C</span><span class="hljs-params">(rint n,rint m)</span></span>&#123;<br><span class="hljs-keyword">if</span>(n&lt;m)<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1ll</span>*fac[n]*inv[m]%p*inv[n-m]%p;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">solve</span><span class="hljs-params">(rint n,rint k)</span></span>&#123;<br><span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(k&lt;=S)<span class="hljs-keyword">return</span> ans[k][n];<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n-i*k+k;i++)<br>res+=<span class="hljs-built_in">C</span>(n-i*k+k,i);<br><span class="hljs-keyword">return</span> res%p;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>fac[<span class="hljs-number">0</span>]=fac[<span class="hljs-number">1</span>]=inv[<span class="hljs-number">0</span>]=inv[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;N;i++)&#123;<br>fac[i]=<span class="hljs-number">1ll</span>*fac[i<span class="hljs-number">-1</span>]*i%p;<br>inv[i]=p<span class="hljs-number">-1ll</span>*p/i*inv[p%i]%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;N;i++)<br>inv[i]=<span class="hljs-number">1ll</span>*inv[i<span class="hljs-number">-1</span>]*inv[i]%p;<br>rint n,m;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=S;i++)&#123;<br>ans[i][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=n;j++)&#123;<br><span class="hljs-keyword">if</span>(i+<span class="hljs-number">1</span>&lt;j)dp[j]=<span class="hljs-built_in">Add</span>(s[j-i<span class="hljs-number">-1</span>],<span class="hljs-number">1</span>);<br><span class="hljs-keyword">else</span> dp[j]=<span class="hljs-number">1</span>;<br>ans[i][j]=<span class="hljs-built_in">Add</span>(s[j<span class="hljs-number">-1</span>],<span class="hljs-number">1</span>);<br>ans[i][j]=<span class="hljs-built_in">Add</span>(ans[i][j],dp[j]);<br>s[j]=<span class="hljs-built_in">Add</span>(s[j<span class="hljs-number">-1</span>],dp[j]);<br>&#125;<br>&#125;<br><span class="hljs-keyword">while</span>(m--)&#123;<br>rint x,k;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;x,&amp;k);--k;<br>rll res=<span class="hljs-built_in">solve</span>(n,k)-<span class="hljs-built_in">solve</span>(x-k<span class="hljs-number">-1</span>,k)*<span class="hljs-built_in">solve</span>(n-x-k,k);<br>res=(res%p+p)%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="林克卡特树"><a href="#林克卡特树" class="headerlink" title="林克卡特树"></a>林克卡特树</h1><blockquote><p>给定一棵 $n$ 个点的有根树，每个点有点权，每次随机选择一个点权不为 $0$ 的点，进行 $Access$ 操作，并将这个点的点权减一，直到所有点的点权为 $0$，求最后所有实链的长度的 $k$ 次方的期望 ，需要对于每次修改维护答案，一次修改是将某一个点权沿一条边移动 ，操作时并不真正去减点权 。</p></blockquote><p>首先考虑 $k=1$ 的做法，由于期望的线性，可以考虑每条边的贡献，定义 $a_u$ 表示 $u$ 点权，$c_u$ 表示以 $u$ 为根的子树中 $a$ 的和 ，考虑每个点的父亲边的贡献，设其父亲是 $fa$，如果这条边有贡献那么 $fa$ 的子树内最后一次 $Access$ 的操作是在 $u$ 的子树中，这个概率是 $\frac{c_u}{c_{fa}}$，考虑最后一个位置的取值有 $c_{fa}$ 种，合法的有 $c_u$ 种。</p><p>有这个概率后一些问题就比较清晰明了了，可以考虑做一个 $dp[u][j]$，表示以 $u$ 为根的实链的 $j$ 次方的期望值，那么每次转移的时候用二项式定理展开即可 ，显然可以套一个动态 $dp$ 去维护，也显然很恶心，并且显然过不去，对于使用二项式定理的 $dp$ 优化几乎没有，所以考虑换一个做法 。</p><p>不过貌似没有什么做法了，尝试一下直接枚举每条链的贡献，是</p><p>$$<br>(1-\frac{c_u}{c_{fa}})\frac{c_v}{c_u}(d_v-d_u)^k<br>$$</p><p>主要解释一下概率为什么是 $(1-\frac{c_u}{c_{fa}})\frac{a_v}{c_u}$，这两个看上去并不独立 。</p><p>事实上可以先考虑大的子树，要求最后一个点不能是 $u$ 的子树内的，再考虑小子树，最后一个点必须在 $v$ 上边，注意到这样考虑是满足上述式子的，而如果先考虑小子树就不满足这个了，注意是看上去不满足，实际是满足的，原因是小子树要考虑的东西比较多，因为如果先确定小子树，那么大子树的排列方案并不能直接算，而是一个类似可重集的排列的东西，所以其实也满足。</p><p>这样的话拆一下式子，是</p><p>$$<br>\sum_{i=0}^k\binom{k}{i}(-1)^i(\frac{1}{c_u}-\frac{1}{c_{fa}})\frac{1}{c_u}d_u^id_v^{k-i}a_v<br>$$</p><p>可以对于含有 $u$ 的项和含有 $v$ 的项分别处理，注意对于 $fa$ 的单独维护 。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">998244353</span>;<br><span class="hljs-function">ll <span class="hljs-title">fpow</span><span class="hljs-params">(rll a,rll b)</span></span>&#123;<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(;b;b&gt;&gt;=<span class="hljs-number">1</span>,a=a*a%p)<br><span class="hljs-keyword">if</span>(b&amp;<span class="hljs-number">1</span>)res=res*a%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt;<br>&#125;e[N&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-type">int</span> h[N],idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;<br>e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;<br>&#125;<br><span class="hljs-type">int</span> a[N],siz[N],siz2[N],d[N],fa[N],dfn[N],Time;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs1</span><span class="hljs-params">(rint u)</span></span>&#123;<br>siz[u]=a[u];dfn[u]=++Time;siz2[u]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa[u])<span class="hljs-keyword">continue</span>;<br>fa[v]=u;<br>d[v]=d[u]+<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs1</span>(v);<br>siz[u]+=siz[v];<br>siz2[u]+=siz2[v];<br>&#125;<br>&#125;<br><span class="hljs-type">int</span> n,m,k;<br>ll res,C[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>];<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Add</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;x+=y;<span class="hljs-keyword">return</span> x&gt;=p?x-p:x;&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Del</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;x-=y;<span class="hljs-keyword">return</span> x&gt;=<span class="hljs-number">0</span>?x:x+p;&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> val[<span class="hljs-number">11</span>];<br><span class="hljs-built_in">Node</span>()&#123;<span class="hljs-built_in">memset</span>(val,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(val));&#125;<br><span class="hljs-type">void</span> <span class="hljs-keyword">operator</span> += (<span class="hljs-type">const</span> Node&amp;A)&#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=k;i++)<br>val[i]=<span class="hljs-built_in">Add</span>(val[i],A.val[i]);<br>&#125;<br>Node <span class="hljs-keyword">operator</span> + (<span class="hljs-type">const</span> Node&amp;A)<span class="hljs-type">const</span>&#123;<br>Node res=*<span class="hljs-keyword">this</span>;res+=A;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-keyword">friend</span> Node <span class="hljs-keyword">operator</span> ~ (<span class="hljs-type">const</span> Node&amp;A)&#123;<br>Node res;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=k;i++)<br>res.val[i]=<span class="hljs-built_in">Del</span>(<span class="hljs-number">0</span>,A.val[i]);<br><span class="hljs-keyword">return</span> res;<br>&#125;<br>&#125;f1[N],f2[N],g[N],tr1[N],tr2[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update1</span><span class="hljs-params">(rint x,Node v)</span></span>&#123;<br><span class="hljs-keyword">for</span>(;x&lt;=n;x+=x&amp;-x)<br>tr1[x]+=v;<br>&#125;<br><span class="hljs-function">Node <span class="hljs-title">query1</span><span class="hljs-params">(rint x)</span></span>&#123;<br>Node res;<br><span class="hljs-keyword">for</span>(;x;x&amp;=x<span class="hljs-number">-1</span>)<br>res+=tr1[x];<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update2</span><span class="hljs-params">(rint x,Node v)</span></span>&#123;<br><span class="hljs-keyword">for</span>(;x&lt;=n;x+=x&amp;-x)<br>tr2[x]+=v;<br>&#125;<br><span class="hljs-function">Node <span class="hljs-title">query2</span><span class="hljs-params">(rint x)</span></span>&#123;<br>Node res;<br><span class="hljs-keyword">for</span>(;x;x&amp;=x<span class="hljs-number">-1</span>)<br>res+=tr2[x];<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-type">int</span> inv[N],pw[N][<span class="hljs-number">11</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs2</span><span class="hljs-params">(rint u)</span></span>&#123;<br>inv[u]=<span class="hljs-built_in">fpow</span>(siz[u],p<span class="hljs-number">-2</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=k;i++)&#123;<br>f1[u].val[i]=<span class="hljs-number">1ll</span>*pw[d[u]][i]*inv[u]%p;<br>f2[u].val[i]=<span class="hljs-number">1ll</span>*pw[d[u]+<span class="hljs-number">1</span>][i]*(p-inv[u])%p;<br>g[u].val[i]=<span class="hljs-number">1ll</span>*pw[d[u]][i]*a[u]%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa[u])<span class="hljs-keyword">continue</span>;<br><span class="hljs-built_in">dfs2</span>(v);<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">10</span>;i++)&#123;<br>C[i][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=i;j++)<br>C[i][j]=(C[i<span class="hljs-number">-1</span>][j]+C[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>])%p;<br>&#125;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;k);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;a[i]);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=n+<span class="hljs-number">1</span>;i++)&#123;<br>pw[i][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=k;j++)<br>pw[i][j]=<span class="hljs-number">1ll</span>*pw[i][j<span class="hljs-number">-1</span>]*i%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>rint x,y;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);<br><span class="hljs-built_in">Ins</span>(x,y);<span class="hljs-built_in">Ins</span>(y,x);<br>&#125;<br><span class="hljs-built_in">dfs1</span>(<span class="hljs-number">1</span>);<br><span class="hljs-built_in">dfs2</span>(<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint u=<span class="hljs-number">1</span>;u&lt;=n;u++)&#123;<br><span class="hljs-built_in">update1</span>(dfn[u],f1[u]);<br><span class="hljs-built_in">update1</span>(dfn[u]+siz2[u],~f1[u]);<br><span class="hljs-built_in">update1</span>(dfn[u]+<span class="hljs-number">1</span>,f2[u]);<br><span class="hljs-built_in">update1</span>(dfn[u]+siz2[u],~f2[u]);<br><span class="hljs-built_in">update2</span>(dfn[u],g[u]);<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>Node now=<span class="hljs-built_in">query1</span>(dfn[i]);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res+=C[k][j]*now.val[j]%p*g[i].val[k-j]%p*pw;<br>&#125;<br>res=(res%p+p)%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br><span class="hljs-keyword">while</span>(m--)&#123;<br>rint x,y;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);<br>Node now=<span class="hljs-built_in">query1</span>(dfn[x]);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res-=C[k][j]*now.val[j]%p*g[x].val[k-j]%p*pw;<br>now=<span class="hljs-built_in">query1</span>(dfn[y]);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res-=C[k][j]*now.val[j]%p*g[y].val[k-j]%p*pw;<br><span class="hljs-keyword">if</span>(fa[x]==y)&#123;<br>now=<span class="hljs-built_in">query2</span>(dfn[x]+siz2[x]<span class="hljs-number">-1</span>)+(~<span class="hljs-built_in">query2</span>(dfn[x]<span class="hljs-number">-1</span>));<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res-=C[k][j]*f1[x].val[j]%p*now.val[k-j]%p*pw;<br>now=<span class="hljs-built_in">query2</span>(dfn[x]+siz2[x]<span class="hljs-number">-1</span>)+(~<span class="hljs-built_in">query2</span>(dfn[x]));<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res-=C[k][j]*f2[x].val[j]%p*now.val[k-j]%p*pw;<br>siz[x]--;a[x]--;a[y]++;<br>inv[x]=<span class="hljs-built_in">fpow</span>(siz[x],p<span class="hljs-number">-2</span>);<br><span class="hljs-built_in">update1</span>(dfn[x],~f1[x]);<br><span class="hljs-built_in">update1</span>(dfn[x]+siz2[x],f1[x]);<br><span class="hljs-built_in">update1</span>(dfn[x]+<span class="hljs-number">1</span>,~f2[x]);<br><span class="hljs-built_in">update1</span>(dfn[x]+siz2[x],f2[x]);<br><span class="hljs-built_in">update2</span>(dfn[x],~g[x]);<br><span class="hljs-built_in">update2</span>(dfn[y],~g[y]);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=k;i++)&#123;<br>f1[x].val[i]=<span class="hljs-number">1ll</span>*pw[d[x]][i]*inv[x]%p;<br>f2[x].val[i]=<span class="hljs-number">1ll</span>*pw[d[x]+<span class="hljs-number">1</span>][i]*(p-inv[x])%p;<br>g[x].val[i]=<span class="hljs-number">1ll</span>*pw[d[x]][i]*a[x]%p;<br>g[y].val[i]=<span class="hljs-number">1ll</span>*pw[d[y]][i]*a[y]%p;<br>&#125;<br><span class="hljs-built_in">update1</span>(dfn[x],f1[x]);<br><span class="hljs-built_in">update1</span>(dfn[x]+siz2[x],~f1[x]);<br><span class="hljs-built_in">update1</span>(dfn[x]+<span class="hljs-number">1</span>,f2[x]);<br><span class="hljs-built_in">update1</span>(dfn[x]+siz2[x],~f2[x]);<br><span class="hljs-built_in">update2</span>(dfn[x],g[x]);<br><span class="hljs-built_in">update2</span>(dfn[y],g[y]);<br>now=<span class="hljs-built_in">query2</span>(dfn[x]+siz2[x]<span class="hljs-number">-1</span>)+(~<span class="hljs-built_in">query2</span>(dfn[x]<span class="hljs-number">-1</span>));<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res+=C[k][j]*f1[x].val[j]%p*now.val[k-j]%p*pw;<br>now=<span class="hljs-built_in">query2</span>(dfn[x]+siz2[x]<span class="hljs-number">-1</span>)+(~<span class="hljs-built_in">query2</span>(dfn[x]));<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res+=C[k][j]*f2[x].val[j]%p*now.val[k-j]%p*pw;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>now=<span class="hljs-built_in">query2</span>(dfn[y]+siz2[y]<span class="hljs-number">-1</span>)+(~<span class="hljs-built_in">query2</span>(dfn[y]<span class="hljs-number">-1</span>));<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res-=C[k][j]*f1[y].val[j]%p*now.val[k-j]%p*pw;<br>now=<span class="hljs-built_in">query2</span>(dfn[y]+siz2[y]<span class="hljs-number">-1</span>)+(~<span class="hljs-built_in">query2</span>(dfn[y]));<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res-=C[k][j]*f2[y].val[j]%p*now.val[k-j]%p*pw;<br>siz[y]++;a[x]--;a[y]++;<br>inv[y]=<span class="hljs-built_in">fpow</span>(siz[y],p<span class="hljs-number">-2</span>);<br><span class="hljs-built_in">update1</span>(dfn[y],~f1[y]);<br><span class="hljs-built_in">update1</span>(dfn[y]+siz2[y],f1[y]);<br><span class="hljs-built_in">update1</span>(dfn[y]+<span class="hljs-number">1</span>,~f2[y]);<br><span class="hljs-built_in">update1</span>(dfn[y]+siz2[y],f2[y]);<br><span class="hljs-built_in">update2</span>(dfn[x],~g[x]);<br><span class="hljs-built_in">update2</span>(dfn[y],~g[y]);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=k;i++)&#123;<br>f1[y].val[i]=<span class="hljs-number">1ll</span>*pw[d[y]][i]*inv[y]%p;<br>f2[y].val[i]=<span class="hljs-number">1ll</span>*pw[d[y]+<span class="hljs-number">1</span>][i]*(p-inv[y])%p;<br>g[x].val[i]=<span class="hljs-number">1ll</span>*pw[d[x]][i]*a[x]%p;<br>g[y].val[i]=<span class="hljs-number">1ll</span>*pw[d[y]][i]*a[y]%p;<br>&#125;<br><span class="hljs-built_in">update1</span>(dfn[y],f1[y]);<br><span class="hljs-built_in">update1</span>(dfn[y]+siz2[y],~f1[y]);<br><span class="hljs-built_in">update1</span>(dfn[y]+<span class="hljs-number">1</span>,f2[y]);<br><span class="hljs-built_in">update1</span>(dfn[y]+siz2[y],~f2[y]);<br><span class="hljs-built_in">update2</span>(dfn[x],g[x]);<br><span class="hljs-built_in">update2</span>(dfn[y],g[y]);<br>now=<span class="hljs-built_in">query2</span>(dfn[y]+siz2[y]<span class="hljs-number">-1</span>)+(~<span class="hljs-built_in">query2</span>(dfn[y]<span class="hljs-number">-1</span>));<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res+=C[k][j]*f1[y].val[j]%p*now.val[k-j]%p*pw;<br>now=<span class="hljs-built_in">query2</span>(dfn[y]+siz2[y]<span class="hljs-number">-1</span>)+(~<span class="hljs-built_in">query2</span>(dfn[y]));<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res+=C[k][j]*f2[y].val[j]%p*now.val[k-j]%p*pw;<br>&#125;<br>now=<span class="hljs-built_in">query1</span>(dfn[x]);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res+=C[k][j]*now.val[j]%p*g[x].val[k-j]%p*pw;<br>now=<span class="hljs-built_in">query1</span>(dfn[y]);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;j&lt;=k;j++,pw=-pw)<br>res+=C[k][j]*now.val[j]%p*g[y].val[k-j]%p*pw;<br>res=(res%p+p)%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="异或粽子"><a href="#异或粽子" class="headerlink" title="异或粽子"></a>异或粽子</h1><blockquote><p>每个点有一个取值区间 $[0,a_i]$ ，支持两种操作，第一种是令 $a_x=y$，第二种是询问区间 $[l,r]$ 的点的所有取值方案中，有多少的异或和在 $[L,R]$ 中 。</p></blockquote><p>考虑一个暴力的做法，对于每次转移相当于做一个异或卷积，所以在值域比较小的时候可以直接维护 $FWT$ 数组的区间积 。</p><p>但是值域如果比较大就不太行了，考虑如何不把值域加到 $dp$ 的状态里边，注意到一直没有用到前缀和的性质，不过也确实不知道前缀和的性质，题解给出了一个十分强大的性质，不过貌似也比较显然，对于一个值域区间 $[c2^k,(c+1)2^k-1]$，一个数异或上这个区间得到的还是一个长度相同的值域区间，并且区间的左右端点只有高于第 $k$ 位的位置会改变，考虑为什么，原因是对于前 $k$ 位，区间中包含了前 $k$ 位的所有取值，在这种情况下异或是封闭的，所以只有高于第 $k$ 位会改变 。</p><p>根据上边的性质，两个区间异或起来得到的还是一个区间，并且长度是原来较长的那个，所以我们实际上只需要把每个 $a_i$ 划分成若干个区间，然后每次在一个位置选择一个区间进行异或，这样的话只需要知道异或的区间的最大值，就能够知道最后值域区间的最大值，所以可以直接枚举这个最大值，考虑怎么得到值域范围的其它值，首先找一个划分区间的办法，可以将 $a_i$ 加上一，然后二进制分解，注意分的区间要从大到小，因为要保证它始终是 $[c2^k,(c+1)2^k-1]$ 这样的区间，这样的话划分出来的区间，除了前 $k+1$ 位，剩下的肯定是 $a_i+1$ 二进制的一个前缀，所以除了前 $k+1$ 位的异或和是可以直接得到的，而前 $k$ 位也是确定的，只需要考虑第 $k+1$ 位，发现这是一个类似异或卷积的东西，直接用线段树维护即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">998244353</span>;<br><span class="hljs-type">const</span> ll inv=p+<span class="hljs-number">1</span>&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> l,r,k;<br>&#125;;<br>vector&lt;Node&gt; vec[N];<br><span class="hljs-type">int</span> a[N],bit=<span class="hljs-number">1</span>,now;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getd</span><span class="hljs-params">(rint x)</span></span>&#123;<br>vec[x].<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">30</span>,now=<span class="hljs-number">0</span>;~i;i--)<br><span class="hljs-keyword">if</span>(a[x]&gt;&gt;i&amp;<span class="hljs-number">1</span>)vec[x].<span class="hljs-built_in">push_back</span>((Node)&#123;now,now+(<span class="hljs-number">1</span>&lt;&lt;i)<span class="hljs-number">-1</span>,i&#125;),now+=<span class="hljs-number">1</span>&lt;&lt;i;<br><span class="hljs-built_in">reverse</span>(vec[x].<span class="hljs-built_in">begin</span>(),vec[x].<span class="hljs-built_in">end</span>());<br>&#125;<br><span class="hljs-type">int</span> dp1[N&lt;&lt;<span class="hljs-number">2</span>][<span class="hljs-number">32</span>][<span class="hljs-number">2</span>],dp2[N&lt;&lt;<span class="hljs-number">2</span>][<span class="hljs-number">32</span>][<span class="hljs-number">2</span>],sum[N&lt;&lt;<span class="hljs-number">2</span>],dp[<span class="hljs-number">32</span>][<span class="hljs-number">2</span>],_dp[<span class="hljs-number">32</span>][<span class="hljs-number">2</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">upd</span><span class="hljs-params">(rint x)</span></span>&#123;<br>sum[bit+x]=a[x];<br><span class="hljs-built_in">getd</span>(x);<br>rll s=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">30</span>;i++)&#123;<br>dp1[bit+x][i][<span class="hljs-number">0</span>]=dp1[bit+x][i][<span class="hljs-number">1</span>]=<span class="hljs-number">0</span>;<br>dp2[bit+x][i][<span class="hljs-number">0</span>]=dp2[bit+x][i][<span class="hljs-number">1</span>]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(j&lt;vec[x].<span class="hljs-built_in">size</span>()&amp;&amp;vec[x][j].k&lt;i)s+=vec[x][j].r-vec[x][j].l+<span class="hljs-number">1</span>,j++;<br>dp1[bit+x][i][a[x]&gt;&gt;i&amp;<span class="hljs-number">1</span>]=s%p;<br>dp2[bit+x][i][a[x]&gt;&gt;i&amp;<span class="hljs-number">1</span>]=s%p;<br><span class="hljs-keyword">if</span>(j&lt;vec[x].<span class="hljs-built_in">size</span>()&amp;&amp;vec[x][j].k==i)&#123;<br>s+=vec[x][j].r-vec[x][j].l+<span class="hljs-number">1</span>;<br>dp1[bit+x][i][<span class="hljs-number">0</span>]=(dp1[bit+x][i][<span class="hljs-number">0</span>]+vec[x][j].r-vec[x][j].l+<span class="hljs-number">1</span>)%p;<br>j++;<br>&#125;<br>rll d0=dp1[bit+x][i][<span class="hljs-number">0</span>],d1=dp1[bit+x][i][<span class="hljs-number">1</span>];<br>dp1[bit+x][i][<span class="hljs-number">0</span>]=(d0+d1)%p;<br>dp1[bit+x][i][<span class="hljs-number">1</span>]=(d0+p-d1)%p;<br>d0=dp2[bit+x][i][<span class="hljs-number">0</span>],d1=dp2[bit+x][i][<span class="hljs-number">1</span>];<br>dp2[bit+x][i][<span class="hljs-number">0</span>]=(d0+d1)%p;<br>dp2[bit+x][i][<span class="hljs-number">1</span>]=(d0+p-d1)%p;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">up</span><span class="hljs-params">(rint x)</span></span>&#123;<br>sum[x]=sum[x&lt;&lt;<span class="hljs-number">1</span>]^sum[x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>];<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">30</span>;i++)&#123;<br>dp1[x][i][<span class="hljs-number">0</span>]=<span class="hljs-number">1ll</span>*dp1[x&lt;&lt;<span class="hljs-number">1</span>][i][<span class="hljs-number">0</span>]*dp1[x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>][i][<span class="hljs-number">0</span>]%p;<br>dp1[x][i][<span class="hljs-number">1</span>]=<span class="hljs-number">1ll</span>*dp1[x&lt;&lt;<span class="hljs-number">1</span>][i][<span class="hljs-number">1</span>]*dp1[x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>][i][<span class="hljs-number">1</span>]%p;<br>dp2[x][i][<span class="hljs-number">0</span>]=<span class="hljs-number">1ll</span>*dp2[x&lt;&lt;<span class="hljs-number">1</span>][i][<span class="hljs-number">0</span>]*dp2[x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>][i][<span class="hljs-number">0</span>]%p;<br>dp2[x][i][<span class="hljs-number">1</span>]=<span class="hljs-number">1ll</span>*dp2[x&lt;&lt;<span class="hljs-number">1</span>][i][<span class="hljs-number">1</span>]*dp2[x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>][i][<span class="hljs-number">1</span>]%p;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(rint n)</span></span>&#123;<br><span class="hljs-keyword">for</span>(;bit&lt;=n;bit&lt;&lt;=<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<span class="hljs-built_in">upd</span>(i);<br><span class="hljs-keyword">for</span>(rint i=bit<span class="hljs-number">-1</span>;i;i--)<span class="hljs-built_in">up</span>(i);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(rint x,rint v)</span></span>&#123;<span class="hljs-keyword">for</span>(a[x]=v,<span class="hljs-built_in">upd</span>(x),x+=bit,x&gt;&gt;=<span class="hljs-number">1</span>;x;x&gt;&gt;=<span class="hljs-number">1</span>)<span class="hljs-built_in">up</span>(x);&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">query</span><span class="hljs-params">(rint l,rint r)</span></span>&#123;<br><span class="hljs-keyword">for</span>(l+=bit<span class="hljs-number">-1</span>,r+=bit+<span class="hljs-number">1</span>;l^r^<span class="hljs-number">1</span>;l&gt;&gt;=<span class="hljs-number">1</span>,r&gt;&gt;=<span class="hljs-number">1</span>)&#123;<br><span class="hljs-keyword">if</span>(~l&amp;<span class="hljs-number">1</span>)&#123;<br>now^=sum[l^<span class="hljs-number">1</span>];<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">30</span>;i++)&#123;<br>dp[i][<span class="hljs-number">0</span>]=<span class="hljs-number">1ll</span>*dp[i][<span class="hljs-number">0</span>]*dp1[l^<span class="hljs-number">1</span>][i][<span class="hljs-number">0</span>]%p;<br>dp[i][<span class="hljs-number">1</span>]=<span class="hljs-number">1ll</span>*dp[i][<span class="hljs-number">1</span>]*dp1[l^<span class="hljs-number">1</span>][i][<span class="hljs-number">1</span>]%p;<br>_dp[i][<span class="hljs-number">0</span>]=<span class="hljs-number">1ll</span>*_dp[i][<span class="hljs-number">0</span>]*dp2[l^<span class="hljs-number">1</span>][i][<span class="hljs-number">0</span>]%p;<br>_dp[i][<span class="hljs-number">1</span>]=<span class="hljs-number">1ll</span>*_dp[i][<span class="hljs-number">1</span>]*dp2[l^<span class="hljs-number">1</span>][i][<span class="hljs-number">1</span>]%p;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span>(r&amp;<span class="hljs-number">1</span>)&#123;<br>now^=sum[r^<span class="hljs-number">1</span>];<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">30</span>;i++)&#123;<br>dp[i][<span class="hljs-number">0</span>]=<span class="hljs-number">1ll</span>*dp[i][<span class="hljs-number">0</span>]*dp1[r^<span class="hljs-number">1</span>][i][<span class="hljs-number">0</span>]%p;<br>dp[i][<span class="hljs-number">1</span>]=<span class="hljs-number">1ll</span>*dp[i][<span class="hljs-number">1</span>]*dp1[r^<span class="hljs-number">1</span>][i][<span class="hljs-number">1</span>]%p;<br>_dp[i][<span class="hljs-number">0</span>]=<span class="hljs-number">1ll</span>*_dp[i][<span class="hljs-number">0</span>]*dp2[r^<span class="hljs-number">1</span>][i][<span class="hljs-number">0</span>]%p;<br>_dp[i][<span class="hljs-number">1</span>]=<span class="hljs-number">1ll</span>*_dp[i][<span class="hljs-number">1</span>]*dp2[r^<span class="hljs-number">1</span>][i][<span class="hljs-number">1</span>]%p;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">30</span>;i++)&#123;<br>rint d0=dp[i][<span class="hljs-number">0</span>],d1=dp[i][<span class="hljs-number">1</span>];<br>dp[i][<span class="hljs-number">0</span>]=(d0+d1)*inv%p;<br>dp[i][<span class="hljs-number">1</span>]=(d0-d1+p)*inv%p;<br>d0=_dp[i][<span class="hljs-number">0</span>],d1=_dp[i][<span class="hljs-number">1</span>];<br>_dp[i][<span class="hljs-number">0</span>]=(d0+d1)*inv%p;<br>_dp[i][<span class="hljs-number">1</span>]=(d0-d1+p)*inv%p;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n,m;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;a[i]),a[i]++;<br><span class="hljs-built_in">build</span>(n);<br><span class="hljs-keyword">while</span>(m--)&#123;<br>rint opt,l,r;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>,&amp;opt,&amp;l,&amp;r);<br><span class="hljs-keyword">if</span>(opt==<span class="hljs-number">1</span>)&#123;<br><span class="hljs-built_in">update</span>(l,r+<span class="hljs-number">1</span>);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>rint L,R;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;L,&amp;R);<br>now=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">30</span>;i++)<br>dp[i][<span class="hljs-number">0</span>]=_dp[i][<span class="hljs-number">0</span>]=dp[i][<span class="hljs-number">1</span>]=_dp[i][<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">query</span>(l,r);<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint s=<span class="hljs-number">0</span>,pw=<span class="hljs-number">1</span>;s&lt;=<span class="hljs-number">30</span>;s++,pw=pw*inv%p)&#123;<br>rint t=now;<br>now&gt;&gt;=s+<span class="hljs-number">1</span>;now&lt;&lt;=s+<span class="hljs-number">1</span>;<br>rll len1=<span class="hljs-built_in">min</span>(R,now|((<span class="hljs-number">1</span>&lt;&lt;s)<span class="hljs-number">-1</span>))-<span class="hljs-built_in">max</span>(L,now)+<span class="hljs-number">1</span>,len2=<span class="hljs-built_in">min</span>(R,now|((<span class="hljs-number">1</span>&lt;&lt;s+<span class="hljs-number">1</span>)<span class="hljs-number">-1</span>))-<span class="hljs-built_in">max</span>(L,now|(<span class="hljs-number">1</span>&lt;&lt;s))+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(len1&gt;<span class="hljs-number">0</span>)res+=(dp[s][<span class="hljs-number">0</span>]-_dp[s][<span class="hljs-number">0</span>])*len1%p*pw%p;<br><span class="hljs-keyword">if</span>(len2&gt;<span class="hljs-number">0</span>)res+=(dp[s][<span class="hljs-number">1</span>]-_dp[s][<span class="hljs-number">1</span>])*len2%p*pw%p;<br>now=t;<br>&#125;<br>res=(res%p+p)%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="树-1"><a href="#树-1" class="headerlink" title="树"></a>树</h1><p>题面略长。</p><p>首先发现 $A$，$B$ 不喜欢的正好相反，并且互为补集，所以可以把 $A$ 不喜欢的转化一下答案，设 $a_x$ 表示与 $x$ 是祖先关系并且比 $w_x$ 小的点的个数，设 $b_x$ 表示在 $x$ 的子树中并且比 $w_x$ 大的个数，$d_x$ 表示深度，如果没有权值相等的点，那么贡献是十分好算的，即 $d_x-a_x-b_x$。</p><p>考虑如果有权值相等的点，一个点的贡献要额外减去它祖先中和它权值一样的点，这导致我们不太好贪心，尝试证明一个点的祖先一定比它先选，设 $u$ 是 $v$ 的祖先，那么一定有 $a_v-a_u&lt;d_v-d_u$ 和 $b_u\ge b_v$，所以可以得到先选祖先一定是最优的。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">5e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> Max=<span class="hljs-number">5e5</span>;<br><span class="hljs-type">const</span> ll INF=<span class="hljs-number">1e15</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt;<br>&#125;e[N&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-type">int</span> h[N],idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;<br>e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;<br>&#125;<br><span class="hljs-type">int</span> n,w[N],d[N],dfn[N],siz[N],tr[N],Time;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(rint x,rint v)</span></span>&#123;<br><span class="hljs-keyword">for</span>(;x&lt;=Max;x+=x&amp;-x)<br>tr[x]+=v;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(rint x)</span></span>&#123;<br>rint res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(;x;x&amp;=x<span class="hljs-number">-1</span>)<br>res+=tr[x];<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-type">int</span> A[N],B[N],C[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint u,rint fa)</span></span>&#123;<br>siz[u]=<span class="hljs-number">1</span>;dfn[u]=++Time;<br>A[u]=<span class="hljs-built_in">query</span>(w[u]<span class="hljs-number">-1</span>);<br>C[u]=<span class="hljs-built_in">query</span>(w[u])-A[u];<br><span class="hljs-built_in">update</span>(w[u],<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa)<span class="hljs-keyword">continue</span>;<br>d[v]=d[u]+<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs</span>(v,u);<br>siz[u]+=siz[v];<br>&#125;<br><span class="hljs-built_in">update</span>(w[u],<span class="hljs-number">-1</span>);<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> x,y;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> Node&amp;A)<span class="hljs-type">const</span>&#123;<br><span class="hljs-keyword">return</span> y&gt;A.y;<br>&#125;<br>&#125;seq[N];<br><span class="hljs-type">char</span> buf[<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">20</span>],*p1,*p2;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">char</span> <span class="hljs-title">gc</span><span class="hljs-params">()</span></span>&#123;<span class="hljs-keyword">return</span> p1==p2?p2=buf+<span class="hljs-built_in">fread</span>(p1=buf,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">20</span>,stdin),p1==p2?EOF:*p1++:*p1++;&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>&#123;<br>rint x=<span class="hljs-number">0</span>;<span class="hljs-type">char</span> ch=<span class="hljs-built_in">gc</span>();<br><span class="hljs-keyword">while</span>(ch&lt;<span class="hljs-string">&#x27;0&#x27;</span>||ch&gt;<span class="hljs-string">&#x27;9&#x27;</span>)ch=<span class="hljs-built_in">gc</span>();<br><span class="hljs-keyword">while</span>(ch&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;ch&gt;=<span class="hljs-string">&#x27;0&#x27;</span>)x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">&#x27;0&#x27;</span>,ch=<span class="hljs-built_in">gc</span>();<br><span class="hljs-keyword">return</span> x;<br>&#125;<br>ll ans[N];<br><span class="hljs-type">int</span> q[N];<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;<br><span class="hljs-keyword">return</span> d[x]-A[x]-B[x]-C[x]&gt;d[y]-A[y]-B[y]-C[y];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>n=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>w[i]=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>rint x=<span class="hljs-built_in">read</span>(),y=<span class="hljs-built_in">read</span>();<br><span class="hljs-built_in">Ins</span>(x,y);<span class="hljs-built_in">Ins</span>(y,x);<br>&#125;<br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>seq[i]=(Node)&#123;i,w[i]&#125;;<br><span class="hljs-built_in">sort</span>(seq+<span class="hljs-number">1</span>,seq+n+<span class="hljs-number">1</span>);<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>,j=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-keyword">while</span>(j&lt;=n&amp;&amp;seq[j].y&gt;seq[i].y)<br><span class="hljs-built_in">update</span>(dfn[seq[j].x],<span class="hljs-number">1</span>),j++;<br>rint t=<span class="hljs-built_in">query</span>(dfn[seq[i].x]+siz[seq[i].x]<span class="hljs-number">-1</span>)-<span class="hljs-built_in">query</span>(dfn[seq[i].x]);<br>res+=A[i];B[seq[i].x]=t;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>q[i]=i;<br><span class="hljs-built_in">sort</span>(q+<span class="hljs-number">1</span>,q+n+<span class="hljs-number">1</span>,cmp);<br>ans[n]=res;<br><span class="hljs-keyword">for</span>(rint i=n,cnt=<span class="hljs-number">1</span>;i;i--,cnt++)&#123;<br>res+=d[q[i]]-A[q[i]]-B[q[i]]-C[q[i]];<br>ans[i<span class="hljs-number">-1</span>]=<span class="hljs-number">1ll</span>*cnt*(cnt<span class="hljs-number">-1</span>)/<span class="hljs-number">2</span>+res;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=n;i++)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,ans[i]);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h1><blockquote><p>定义一个数是好的当且进当存在三个连续数位满足单调上升，求一个前缀 $1-n$ 满足前缀中的数中好的数占比不少于 $p$ 。</p></blockquote><p>给出一个结论，对于 $\frac{B}A&lt;p$，每次找到一个最小的 $C$ 满足 $\frac{B+C}{A+C}\ge p$，一直迭代知道找到答案，迭代次数不超过 $log$，所以直接大力模拟即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> db double</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">110</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> w=<span class="hljs-number">1e9</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br>ll a[N];<br>Node <span class="hljs-keyword">operator</span> + (<span class="hljs-type">const</span> Node&amp;A)<span class="hljs-type">const</span>&#123;<br>Node res=*<span class="hljs-keyword">this</span>;<br>res.a[<span class="hljs-number">0</span>]=<span class="hljs-built_in">max</span>(res.a[<span class="hljs-number">0</span>],A.a[<span class="hljs-number">0</span>]);<br>rint t=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=res.a[<span class="hljs-number">0</span>];i++)&#123;<br>res.a[i]+=A.a[i]+t;<br>t=res.a[i]/w;<br>res.a[i]%=w;<br>&#125;<br><span class="hljs-keyword">if</span>(t)res.a[++res.a[<span class="hljs-number">0</span>]]=t;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br>Node <span class="hljs-keyword">operator</span> - (<span class="hljs-type">const</span> Node&amp;A)<span class="hljs-type">const</span>&#123;<br>Node res=*<span class="hljs-keyword">this</span>;<br>res.a[<span class="hljs-number">0</span>]=<span class="hljs-built_in">max</span>(res.a[<span class="hljs-number">0</span>],A.a[<span class="hljs-number">0</span>]);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=res.a[<span class="hljs-number">0</span>];i++)&#123;<br>res.a[i]-=A.a[i];<br><span class="hljs-keyword">if</span>(res.a[i]&lt;<span class="hljs-number">0</span>)res.a[i]+=w,res.a[i+<span class="hljs-number">1</span>]--;<br>&#125;<br><span class="hljs-keyword">while</span>(!res.a[res.a[<span class="hljs-number">0</span>]]&amp;&amp;res.a[<span class="hljs-number">0</span>]&gt;<span class="hljs-number">1</span>)res.a[<span class="hljs-number">0</span>]--;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br>Node <span class="hljs-keyword">operator</span> * (<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp;A)<span class="hljs-type">const</span>&#123;<br>Node res=*<span class="hljs-keyword">this</span>;<br>rint t=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=res.a[<span class="hljs-number">0</span>];i++)&#123;<br>res.a[i]=res.a[i]*A+t;<br>t=res.a[i]/w;<br>res.a[i]%=w;<br>&#125;<br><span class="hljs-keyword">if</span>(t)res.a[++res.a[<span class="hljs-number">0</span>]]=t;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br>Node <span class="hljs-keyword">operator</span> / (<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp;A)<span class="hljs-type">const</span>&#123;<br>Node res=*<span class="hljs-keyword">this</span>;<br>rll t=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=res.a[<span class="hljs-number">0</span>];i;i--)&#123;<br>res.a[i]+=t;<br>t=(res.a[i]%A)*w;<br>res.a[i]/=A;<br>&#125;<br><span class="hljs-keyword">if</span>(t)res.a[<span class="hljs-number">1</span>]++;<br><span class="hljs-keyword">while</span>(!res.a[res.a[<span class="hljs-number">0</span>]]&amp;&amp;res.a[<span class="hljs-number">0</span>]&gt;<span class="hljs-number">1</span>)res.a[<span class="hljs-number">0</span>]--;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> Node&amp;A)<span class="hljs-type">const</span>&#123;<br><span class="hljs-keyword">if</span>(a[<span class="hljs-number">0</span>]!=A.a[<span class="hljs-number">0</span>])<span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>]&lt;A.a[<span class="hljs-number">0</span>];<br><span class="hljs-keyword">for</span>(rint i=a[<span class="hljs-number">0</span>];i;i--)&#123;<br><span class="hljs-keyword">if</span>(a[i]&lt;A.a[i])<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(a[i]&gt;A.a[i])<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld&quot;</span>,a[a[<span class="hljs-number">0</span>]]);<br><span class="hljs-keyword">for</span>(rint i=a[<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>;i;i--)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%09lld&quot;</span>,a[i]);<br>&#125;<br>&#125;A,B,dp[N][<span class="hljs-number">10</span>][<span class="hljs-number">10</span>][<span class="hljs-number">2</span>],val1,val0;<br><span class="hljs-type">int</span> num[N],p1,p2,tt;<br><span class="hljs-type">bool</span> vis[N][<span class="hljs-number">10</span>][<span class="hljs-number">10</span>][<span class="hljs-number">2</span>];<br><span class="hljs-function">Node <span class="hljs-title">dfs</span><span class="hljs-params">(rint hh,rint v1,rint v2,rint lim1,rint lim2,rint ok)</span></span>&#123;<br><span class="hljs-keyword">if</span>(!hh)<span class="hljs-keyword">return</span> ok?val1:val0;<br><span class="hljs-keyword">if</span>(!lim1&amp;&amp;!lim2&amp;&amp;vis[hh][v1][v2][ok])<span class="hljs-keyword">return</span> dp[hh][v1][v2][ok];<br>Node t=val0;<br>rint lim=lim1?num[hh]:<span class="hljs-number">9</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=lim;i++)&#123;<br><span class="hljs-keyword">if</span>(lim2)t=t+<span class="hljs-built_in">dfs</span>(hh<span class="hljs-number">-1</span>,v2,i,lim1&amp;&amp;i==lim,v2==<span class="hljs-number">0</span>,ok);<br><span class="hljs-keyword">else</span> t=t+<span class="hljs-built_in">dfs</span>(hh<span class="hljs-number">-1</span>,v2,i,lim1&amp;&amp;i==lim,<span class="hljs-number">0</span>,ok|(v1&lt;v2&amp;&amp;v2&lt;i));<br>&#125;<br><span class="hljs-keyword">if</span>(!lim1&amp;&amp;!lim2)vis[hh][v1][v2][ok]=<span class="hljs-number">1</span>,dp[hh][v1][v2][ok]=t;<br><span class="hljs-keyword">return</span> t;<br>&#125;<br><span class="hljs-function">Node <span class="hljs-title">solve</span><span class="hljs-params">(Node n)</span></span>&#123;<br>tt=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n.a[<span class="hljs-number">0</span>];i++)&#123;<br><span class="hljs-keyword">if</span>(i==n.a[<span class="hljs-number">0</span>])&#123;<br><span class="hljs-keyword">while</span>(n.a[i])<br>num[++tt]=n.a[i]%<span class="hljs-number">10</span>,n.a[i]/=<span class="hljs-number">10</span>;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-number">9</span>;j++)<br>num[++tt]=n.a[i]%<span class="hljs-number">10</span>,n.a[i]/=<span class="hljs-number">10</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">dfs</span>(tt,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>db p;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lf&quot;</span>,&amp;p);<br>p1=p*<span class="hljs-number">100000</span>+<span class="hljs-number">0.5</span>;p2=<span class="hljs-number">100000</span>;<br>A.a[<span class="hljs-number">0</span>]=B.a[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;A.a[<span class="hljs-number">1</span>]=<span class="hljs-number">100</span>;<br>val0.a[<span class="hljs-number">0</span>]=val1.a[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;val1.a[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span>(B*p2&lt;A*p1)&#123;<br>Node C=(A*p1-B*p2)/(p2-p1);<br>A=A+C;B=<span class="hljs-built_in">solve</span>(A);<br>&#125;<br>A.<span class="hljs-built_in">print</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="城市大脑"><a href="#城市大脑" class="headerlink" title="城市大脑"></a>城市大脑</h1><p>给定一张图，每条边的边权初始化为 $1$ ，一共有 $k$ 次操作，每次操作可以将一条边的边权加一，最后通过一条边的时间为 $\frac{1}w$，最小化从 $s1$ 到 $t1$ 和从 $s2$ 到 $t2$ 的时间总和 。</p><p>首先注意到路径可以被分为两种，一种是两人都走的一种是只有一个走的，不难发现两人都走的一定是一段连续的路程，不然让一个人改走另一段一定更优，所以可以直接枚举连续的一段然后计算时间，枚举是 $N^2$ 的，考虑如何计算时间，随着分配给两人都走的路径的时间的增加，代价一定是先减后增，猜测函数单峰，事实上确实是，所以直接三分即可，不过由于路径一共是 $N^2$ 的，每次三分太慢，考虑优化，实际上对于连续路程一样的只需要跑非连续路程最短的即可，优化后三分的次数是线性的，可以直接做。</p><h1 id="按钮"><a href="#按钮" class="headerlink" title="按钮"></a>按钮</h1><blockquote><p>有一块可以显示 $5$ 位数字的显示屏，每次系统从 $[L,R]$ 中选出一个数字，一次操作可以是改变显示屏上的一个数和询问数字与这个数的大小关系，问最少多少次可以知道显示屏上边是多少。</p></blockquote><p>有一个显然的暴力是 $dp[x][l][r]$ 表示当前显示屏的数字是 $x$，区间为 $[l,r]$ 时的最小花费。</p><p>这样做比较慢，注意到答案不会太大，如果忽略操作次数大概是 $log$ 的，由于改变数字有常数所以实际上会略微大一点，不过不会超过 $42$ ，而且状态中 $x$ 要么等于 $l-1$ 要么等于 $r+1$ ，所以可以定义 $dpl[x][i]$ 表示显示屏数字为 $x$ ，操作 $i$ 次，得到的最小左端点，定义 $dpr[x][i]$ 同上，现在考虑转移，$dpl[x][i]$ 可以对 $dpl[m][i-1-dis]$ 取 $\min$ 当且仅当 $dpr[m][i-1-dis]\ge x-1$，为了保证能够完全覆盖区间，所以要有右端点的限制，如果没有 $dis$ 那么可以直接二维数点，但是有 $dis$ 的限制就不太好做，可以考虑枚举 $dis$ 然后把一些位置变成通配符去匹配，这样就能够做二维数点了。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> pos,val;<br>&#125;;<br><span class="hljs-type">int</span> dpl[<span class="hljs-number">46</span>][N],dpr[<span class="hljs-number">46</span>][N];<br>vector&lt;Node&gt; vec[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chk</span><span class="hljs-params">(rint x,rint y)</span></span>&#123;<br>rint res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">6</span>;i++)&#123;<br><span class="hljs-keyword">if</span>(x%<span class="hljs-number">10</span>!=y%<span class="hljs-number">10</span>)res++;<br>x/=<span class="hljs-number">10</span>;y/=<span class="hljs-number">10</span>;<br>&#125;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-type">int</span> cnt[<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">5</span>],val[N&lt;&lt;<span class="hljs-number">1</span>],w[N][<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">5</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;<span class="hljs-number">32</span>;i++)<br>cnt[i]=cnt[i&gt;&gt;<span class="hljs-number">1</span>]+(i&amp;<span class="hljs-number">1</span>);<br><span class="hljs-built_in">memset</span>(dpl,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(dpl));<br>rint n=<span class="hljs-number">1e5</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>dpl[<span class="hljs-number">0</span>][i]=i<span class="hljs-number">-1</span>,dpr[<span class="hljs-number">0</span>][i]=i+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">32</span>;j++)&#123;<br>rint wv=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint x=i,k=<span class="hljs-number">0</span>;k&lt;<span class="hljs-number">5</span>;k++,x/=<span class="hljs-number">10</span>)&#123;<br><span class="hljs-keyword">if</span>(j&gt;&gt;k&amp;<span class="hljs-number">1</span>)wv=wv*<span class="hljs-number">11</span>+<span class="hljs-number">10</span>;<br><span class="hljs-keyword">else</span> wv=wv*<span class="hljs-number">11</span>+x%<span class="hljs-number">10</span>;<br>&#125;<br>w[i][j]=wv;<br>&#125;<br>&#125;<br>dpl[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;dpr[<span class="hljs-number">0</span>][n]=n;<br><span class="hljs-keyword">for</span>(rint c=<span class="hljs-number">1</span>;c&lt;=<span class="hljs-number">45</span>;c++)&#123;<br><span class="hljs-built_in">memset</span>(val,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(val));<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>vec[i].<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">32</span>;j++)&#123;<br><span class="hljs-keyword">if</span>(cnt[j]&gt;=c)<span class="hljs-keyword">continue</span>;<br>vec[dpl[c-cnt[j]<span class="hljs-number">-1</span>][i]].<span class="hljs-built_in">push_back</span>((Node)&#123;w[i][j],dpr[c-cnt[j]<span class="hljs-number">-1</span>][i]&#125;);<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(Node v:vec[<span class="hljs-number">1</span>])<br>val[v.pos]=<span class="hljs-built_in">max</span>(val[v.pos],v.val);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-keyword">for</span>(Node v:vec[i+<span class="hljs-number">1</span>])<br>val[v.pos]=<span class="hljs-built_in">max</span>(val[v.pos],v.val);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">32</span>;j++)&#123;<br>dpr[c][i]=<span class="hljs-built_in">max</span>(dpr[c][i],val[w[i][j]]);<br>&#125;<br>&#125;<br><span class="hljs-built_in">memset</span>(val,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(val));<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>vec[i].<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">32</span>;j++)&#123;<br><span class="hljs-keyword">if</span>(cnt[j]&gt;=c)<span class="hljs-keyword">continue</span>;<br>vec[dpr[c-cnt[j]<span class="hljs-number">-1</span>][i]].<span class="hljs-built_in">push_back</span>((Node)&#123;w[i][j],dpl[c-cnt[j]<span class="hljs-number">-1</span>][i]&#125;);<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(Node v:vec[n])<br>val[v.pos]=<span class="hljs-built_in">min</span>(val[v.pos],v.val);<br><span class="hljs-keyword">for</span>(rint i=n;i;i--)&#123;<br><span class="hljs-keyword">for</span>(Node v:vec[i<span class="hljs-number">-1</span>])<br>val[v.pos]=<span class="hljs-built_in">min</span>(val[v.pos],v.val);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">32</span>;j++)&#123;<br>dpl[c][i]=<span class="hljs-built_in">min</span>(dpl[c][i],val[w[i][j]]);<br>&#125;<br>&#125;<br>&#125;<br>rint T;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;T);<br><span class="hljs-keyword">while</span>(T--)&#123;<br>rint L,R;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;L,&amp;R);<br>rint res=<span class="hljs-number">1e9</span>;<br><span class="hljs-keyword">for</span>(rint i=L;i&lt;=R;i++)&#123;<br>rint r1=<span class="hljs-number">0</span>,r2=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(dpl[r1][i]&gt;L)r1++;<br><span class="hljs-keyword">while</span>(dpr[r2][i]&lt;R)r2++;<br>res=<span class="hljs-built_in">min</span>(res,<span class="hljs-built_in">chk</span>(<span class="hljs-number">0</span>,i)+<span class="hljs-built_in">max</span>(r1,r2)+<span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,res);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="蛋糕"><a href="#蛋糕" class="headerlink" title="蛋糕"></a>蛋糕</h1><blockquote><p>有 $n$ 个点，每个点有三个值域区间，找出三个整数满足所有的点至少有一个区间包含了给定点。</p></blockquote><p>实际上不太好做，但是发现可以枚举两个点，然后判断剩下的那一维有没有解，剩下的那一维是对一个数取 $\max,\min$ ，这样做是 $n^3$ 的，考虑对于第一维进行线段树分治，对于第二维开一棵线段树，每个叶子节点表示当 第二维取这个节点时，第三维的区间范围，发现这个线段树不太好维护，所以尝试直接在叶子节点下推所有标记，然后看起来时间复杂度比较高，不过由于有一些减枝所以可以通过。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br><span class="hljs-type">int</span> mx[<span class="hljs-number">3</span>],mn[<span class="hljs-number">3</span>];<br>&#125;a[N];<br><span class="hljs-type">int</span> q[N],tt,Max[<span class="hljs-number">3</span>],rk[<span class="hljs-number">3</span>][N];<br>vector&lt;Node&gt; vec[N&lt;&lt;<span class="hljs-number">2</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(rint x,rint l,rint r,rint cl,rint cr,Node v)</span></span>&#123;<br><span class="hljs-keyword">if</span>(cl&lt;=l&amp;&amp;r&lt;=cr)&#123;<br>vec[x].<span class="hljs-built_in">push_back</span>(v);<br><span class="hljs-keyword">return</span> ;<br>&#125;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=mid)<span class="hljs-built_in">insert</span>(x&lt;&lt;<span class="hljs-number">1</span>,l,mid,cl,cr,v);<br><span class="hljs-keyword">if</span>(cr&gt;mid)<span class="hljs-built_in">insert</span>(x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,cl,cr,v);<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Bin</span>&#123;<br><span class="hljs-type">int</span> pos,tag1,tag2;<br>&#125;stk[N*<span class="hljs-number">32</span>];<br><span class="hljs-type">int</span> tp,tag1[N&lt;&lt;<span class="hljs-number">2</span>],tag2[N&lt;&lt;<span class="hljs-number">2</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(rint x,rint l,rint r,rint cl,rint cr,rint v1,rint v2)</span></span>&#123;<br><span class="hljs-keyword">if</span>(cl&lt;=l&amp;&amp;r&lt;=cr)&#123;<br>stk[++tp]=(Bin)&#123;x,tag1[x],tag2[x]&#125;;<br>tag1[x]=<span class="hljs-built_in">max</span>(tag1[x],v1);<br>tag2[x]=<span class="hljs-built_in">min</span>(tag2[x],v2);<br><span class="hljs-keyword">return</span> ;<br>&#125;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=mid)<span class="hljs-built_in">update</span>(x&lt;&lt;<span class="hljs-number">1</span>,l,mid,cl,cr,v1,v2);<br><span class="hljs-keyword">if</span>(cr&gt;mid)<span class="hljs-built_in">update</span>(x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,cl,cr,v1,v2);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs2</span><span class="hljs-params">(rint x,rint l,rint r,rint cl,rint cr,rint res)</span></span>&#123;<br>cl=<span class="hljs-built_in">max</span>(cl,tag1[x]);cr=<span class="hljs-built_in">min</span>(cr,tag2[x]);<br><span class="hljs-keyword">if</span>(cl&gt;cr)<span class="hljs-keyword">return</span> ;<br><span class="hljs-keyword">if</span>(l==r)&#123;<br><span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Yes&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d %d %d\n&quot;</span>,rk[<span class="hljs-number">0</span>][res],rk[<span class="hljs-number">1</span>][l],rk[<span class="hljs-number">2</span>][cl]);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs2</span>(x&lt;&lt;<span class="hljs-number">1</span>,l,mid,cl,cr,res);<br><span class="hljs-built_in">dfs2</span>(x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,cl,cr,res);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint x,rint l,rint r)</span></span>&#123;<br>rint now=tp;<br><span class="hljs-keyword">for</span>(Node v:vec[x])&#123;<br><span class="hljs-keyword">if</span>(v.mn[<span class="hljs-number">1</span>]!=<span class="hljs-number">1</span>)<span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,Max[<span class="hljs-number">1</span>],<span class="hljs-number">1</span>,v.mn[<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>,v.mn[<span class="hljs-number">2</span>],v.mx[<span class="hljs-number">2</span>]);<br><span class="hljs-keyword">if</span>(v.mx[<span class="hljs-number">1</span>]!=Max[<span class="hljs-number">1</span>])<span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,Max[<span class="hljs-number">1</span>],v.mx[<span class="hljs-number">1</span>]+<span class="hljs-number">1</span>,Max[<span class="hljs-number">1</span>],v.mn[<span class="hljs-number">2</span>],v.mx[<span class="hljs-number">2</span>]);<br>&#125;<br><span class="hljs-keyword">if</span>(l==r)&#123;<br><span class="hljs-built_in">dfs2</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,Max[<span class="hljs-number">1</span>],<span class="hljs-number">1</span>,Max[<span class="hljs-number">2</span>],l);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs</span>(x&lt;&lt;<span class="hljs-number">1</span>,l,mid);<br><span class="hljs-built_in">dfs</span>(x&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r);<br>&#125;<br><span class="hljs-keyword">while</span>(tp!=now)&#123;<br>Bin u=stk[tp--];<br>tag1[u.pos]=u.tag1;<br>tag2[u.pos]=u.tag2;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">memset</span>(tag2,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(tag2));<br>rint n;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">3</span>;j++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;a[i].mn[j],&amp;a[i].mx[j]);<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">3</span>;j++)&#123;<br>tt=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>q[++tt]=a[i].mn[j],q[++tt]=a[i].mx[j];<br><span class="hljs-built_in">sort</span>(q+<span class="hljs-number">1</span>,q+tt+<span class="hljs-number">1</span>);<br>tt=<span class="hljs-built_in">unique</span>(q+<span class="hljs-number">1</span>,q+tt+<span class="hljs-number">1</span>)-q<span class="hljs-number">-1</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tt;i++)<br>rk[j][i]=q[i];<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>a[i].mn[j]=<span class="hljs-built_in">lower_bound</span>(q+<span class="hljs-number">1</span>,q+tt+<span class="hljs-number">1</span>,a[i].mn[j])-q;<br>a[i].mx[j]=<span class="hljs-built_in">lower_bound</span>(q+<span class="hljs-number">1</span>,q+tt+<span class="hljs-number">1</span>,a[i].mx[j])-q;<br>&#125;<br>Max[j]=tt;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-keyword">if</span>(a[i].mn[<span class="hljs-number">0</span>]!=<span class="hljs-number">1</span>)<span class="hljs-built_in">insert</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,Max[<span class="hljs-number">0</span>],<span class="hljs-number">1</span>,a[i].mn[<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>,a[i]);<br><span class="hljs-keyword">if</span>(a[i].mx[<span class="hljs-number">0</span>]!=Max[<span class="hljs-number">0</span>])<span class="hljs-built_in">insert</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,Max[<span class="hljs-number">0</span>],a[i].mx[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span>,Max[<span class="hljs-number">0</span>],a[i]);<br>&#125;<br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,Max[<span class="hljs-number">0</span>]);<br><span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;NO&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="猜猜"><a href="#猜猜" class="headerlink" title="猜猜"></a>猜猜</h1><blockquote><p>有 $n$ 个宝石，每个宝石有颜色和价值，支持两种操作，将某种宝石的颜色或者价值替换，从某个位置开始取宝石，最多有 $k$ 个不取，每种颜色最多取 $k$ 种。</p></blockquote><p>$k\leq10$ 。</p><p>首先考虑确定了取到的右端点 $r$，那么怎么决策取哪个，首先需要决策的最多只有 $k$ 个，其余的都只有一种，所以对于出现一次的求和，对于其它的取最大值。</p><p>现在的问题是怎么求 $r$ 和找出不超过 $k$ 个需要决策的数，不难发现这两个可以同时进行，现在的问题是怎么找出 $k$ 个需要决策的数，令 $pre_i$ 表示 $i$ 的前一个和这个数颜色一样的数的位置，那么当且仅当 $pre_i&gt;=l$ 的时候才有贡献，这样的数可以用线段树找到。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">int</span> pre[N],col[N],val[N];<br>set&lt;<span class="hljs-type">int</span>&gt; pos[N];<br>set&lt;<span class="hljs-type">int</span>&gt;::iterator it;<br><span class="hljs-type">int</span> Max[N&lt;&lt;<span class="hljs-number">2</span>];<br>ll sum[N&lt;&lt;<span class="hljs-number">2</span>];<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ls rt&lt;&lt;1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rs rt&lt;&lt;1|1</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">up</span><span class="hljs-params">(rint rt)</span></span>&#123;<br>sum[rt]=sum[ls]+sum[rs];<br>Max[rt]=<span class="hljs-built_in">max</span>(Max[ls],Max[rs]);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(rint rt,rint l,rint r,rint pos,rint v1,rint v2)</span></span>&#123;<br><span class="hljs-keyword">if</span>(l==r)&#123;<br>Max[rt]=v1;<br>sum[rt]=v2;<br><span class="hljs-keyword">return</span> ;<br>&#125;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(pos&lt;=mid)<span class="hljs-built_in">update</span>(ls,l,mid,pos,v1,v2);<br><span class="hljs-keyword">else</span> <span class="hljs-built_in">update</span>(rs,mid+<span class="hljs-number">1</span>,r,pos,v1,v2);<br><span class="hljs-built_in">up</span>(rt);<br>&#125;<br><span class="hljs-type">int</span> q[N],w[N],tt,k,s;<br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(rint rt,rint l,rint r,rint cl,rint cr)</span></span>&#123;<br><span class="hljs-keyword">if</span>(tt&gt;k)<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=l&amp;&amp;r&lt;=cr&amp;&amp;Max[rt]&lt;s)<span class="hljs-keyword">return</span> sum[rt];<br><span class="hljs-keyword">if</span>(l==r)&#123;<br><span class="hljs-keyword">if</span>(Max[rt]&gt;=s)&#123;<br>q[++tt]=l;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> sum[rt];<br>&#125;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(cr&lt;=mid)<span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(ls,l,mid,cl,cr);<br><span class="hljs-keyword">if</span>(cl&gt;mid)<span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(rs,mid+<span class="hljs-number">1</span>,r,cl,cr);<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(ls,l,mid,cl,cr)+<span class="hljs-built_in">query</span>(rs,mid+<span class="hljs-number">1</span>,r,cl,cr);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n,m;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;col[i],&amp;val[i]);<br><span class="hljs-keyword">if</span>(!pos[col[i]].<span class="hljs-built_in">empty</span>())pre[i]=*pos[col[i]].<span class="hljs-built_in">rbegin</span>();<br><span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,i,pre[i],val[i]);<br>pos[col[i]].<span class="hljs-built_in">insert</span>(i);<br>&#125;<br><span class="hljs-keyword">while</span>(m--)&#123;<br>rint opt;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;opt);<br><span class="hljs-keyword">if</span>(opt==<span class="hljs-number">1</span>)&#123;<br>rint v1,v2,v3;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>,&amp;v1,&amp;v2,&amp;v3);<br>it=pos[col[v1]].<span class="hljs-built_in">upper_bound</span>(v1);<br><span class="hljs-keyword">if</span>(it!=pos[col[v1]].<span class="hljs-built_in">end</span>())&#123;<br>rint p=*it;<br><span class="hljs-keyword">if</span>(--it!=pos[col[v1]].<span class="hljs-built_in">begin</span>())pre[p]=*--it;<br><span class="hljs-keyword">else</span> pre[p]=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,p,pre[p],val[p]);<br>&#125;<br>pos[col[v1]].<span class="hljs-built_in">erase</span>(v1);<br>col[v1]=v2;val[v1]=v3;<br>pos[col[v1]].<span class="hljs-built_in">insert</span>(v1);<br>it=pos[col[v1]].<span class="hljs-built_in">upper_bound</span>(v1);<br><span class="hljs-keyword">if</span>(it!=pos[col[v1]].<span class="hljs-built_in">end</span>())&#123;<br>rint p=*it;<br>pre[p]=v1;<br><span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,p,pre[p],val[p]);<br>&#125;<br>it=pos[col[v1]].<span class="hljs-built_in">find</span>(v1);<br><span class="hljs-keyword">if</span>(it!=pos[col[v1]].<span class="hljs-built_in">begin</span>())pre[v1]=*--it;<br><span class="hljs-keyword">else</span> pre[v1]=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,v1,pre[v1],val[v1]);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;s,&amp;k);tt=<span class="hljs-number">0</span>;<br>rll res=<span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,s,n);<br><span class="hljs-keyword">if</span>(tt&gt;k)tt--;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tt;i++)&#123;<br>rint nxt=pre[q[i]];<br><span class="hljs-keyword">if</span>(pre[nxt]&lt;s)&#123;<br>res-=val[nxt];<br>w[col[nxt]]=<span class="hljs-built_in">max</span>(w[col[nxt]],val[nxt]);<br>&#125;<br>w[col[nxt]]=<span class="hljs-built_in">max</span>(w[col[nxt]],val[q[i]]);<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tt;i++)<br>res+=w[col[q[i]]],w[col[q[i]]]=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="今天"><a href="#今天" class="headerlink" title="今天"></a>今天</h1><blockquote><p>给出放置每个字符的概率，每次随机放置字符，当这个字符包含给出的某个子串时就停止，求停止的期望，需要对于某个字符串的所有前缀回答。</p></blockquote><p>如果是一个串的匹配可以直接用 $kmp$ ，对于多个串的话考虑 $AC$ 自动机，暴力列出转移的式子然后高斯消元不太行，不过可以用 $n$ 个特殊量来表示所有的变量，这样的话只需要对于最后的 $n$ 个点跑高斯消元即可，问题在于怎么找 $n$ 个点，事实上可以直接对 Trie 树跑随机链剖分，这样将每个链的链顶自己表示自己即可，转移的时候从父亲转移过来。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e4</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br><span class="hljs-type">char</span> s[N];<br><span class="hljs-function"><span class="hljs-keyword">inline</span> ll <span class="hljs-title">fpow</span><span class="hljs-params">(rll a,rll b)</span></span>&#123;<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(;b;b&gt;&gt;=<span class="hljs-number">1</span>,a=a*a%p)<br><span class="hljs-keyword">if</span>(b&amp;<span class="hljs-number">1</span>)res=res*a%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-type">int</span> f[<span class="hljs-number">110</span>],g[N],mt[<span class="hljs-number">110</span>][<span class="hljs-number">110</span>],b[<span class="hljs-number">110</span>],a[N][<span class="hljs-number">110</span>],ans[N];<br><span class="hljs-type">int</span> n,m,k,ch[N][<span class="hljs-number">26</span>],cnt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">()</span></span>&#123;<br>rint now=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>rint x=s[i]-<span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-keyword">if</span>(!ch[now][x])ch[now][x]=++cnt;<br>now=ch[now][x];<br>&#125;<br>&#125;<br><span class="hljs-type">int</span> fail[N],q[N],id[N],tot,hh,tt,tot2;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">()</span></span>&#123;<br>hh=<span class="hljs-number">0</span>;tt=<span class="hljs-number">-1</span>;q[++tt]=<span class="hljs-number">0</span>;id[<span class="hljs-number">0</span>]=++tot;a[<span class="hljs-number">0</span>][tot]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span>(hh&lt;=tt)&#123;<br>rint u=q[hh++],son=<span class="hljs-number">0</span>,gl=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;k;i++)&#123;<br><span class="hljs-keyword">if</span>(ch[u][i])&#123;<br><span class="hljs-keyword">if</span>(u)fail[ch[u][i]]=ch[fail[u]][i];<br>q[++tt]=ch[u][i];<br><span class="hljs-keyword">if</span>(son)id[ch[u][i]]=++tot,a[ch[u][i]][tot]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">else</span> son=ch[u][i],gl=<span class="hljs-built_in">fpow</span>(g[i],p<span class="hljs-number">-2</span>);<br>&#125;<span class="hljs-keyword">else</span> ch[u][i]=ch[fail[u]][i];<br>&#125;<br><span class="hljs-keyword">if</span>(!son)&#123;<br>b[++tot2]=(p-a[u][<span class="hljs-number">0</span>])%p;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tot;i++)<br>mt[tot2][i]=a[u][i];<br>&#125;<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=tot;i++)<br>a[son][i]=<span class="hljs-number">1ll</span>*a[u][i]*gl%p;<br>a[son][<span class="hljs-number">0</span>]=(a[son][<span class="hljs-number">0</span>]+p-gl)%p;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;k;i++)&#123;<br><span class="hljs-keyword">if</span>(ch[u][i]==son)<span class="hljs-keyword">continue</span>;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;=tot;j++)<br>a[son][j]=(a[son][j]+p<span class="hljs-number">-1ll</span>*a[ch[u][i]][j]*gl%p*g[i]%p)%p;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;k);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;k;i++)&#123;<br>rint x;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;x);<br>g[i]=x*<span class="hljs-built_in">fpow</span>(<span class="hljs-number">100</span>,p<span class="hljs-number">-2</span>)%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s+<span class="hljs-number">1</span>);<br><span class="hljs-built_in">insert</span>();<br>&#125;<br><span class="hljs-built_in">bfs</span>();<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tot;i++)&#123;<br><span class="hljs-keyword">if</span>(!mt[i][i])&#123;<br><span class="hljs-keyword">for</span>(rint j=i;j&lt;=tot;j++)&#123;<br><span class="hljs-keyword">if</span>(mt[j][i])&#123;<br><span class="hljs-keyword">for</span>(rint z=<span class="hljs-number">1</span>;z&lt;=tot;z++)<br><span class="hljs-built_in">swap</span>(mt[i][z],mt[j][z]);<br><span class="hljs-built_in">swap</span>(b[i],b[j]);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=tot;j++)&#123;<br><span class="hljs-keyword">if</span>(!mt[j][i]||i==j)<span class="hljs-keyword">continue</span>;<br>ll r=<span class="hljs-number">1ll</span>*mt[j][i]*<span class="hljs-built_in">fpow</span>(mt[i][i],p<span class="hljs-number">-2</span>)%p;<br><span class="hljs-keyword">for</span>(rint z=i;z&lt;=tot;z++)<br>mt[j][z]=(mt[j][z]-mt[i][z]*r%p+p)%p;<br>b[j]=(b[j]-b[i]*r%p+p)%p;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=tot;i++)<br>b[i]=b[i]*<span class="hljs-built_in">fpow</span>(mt[i][i],p<span class="hljs-number">-2</span>)%p;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;=cnt;i++)&#123;<br>ans[i]=a[i][<span class="hljs-number">0</span>];<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">1</span>;j&lt;=tot;j++)<br>ans[i]+=<span class="hljs-number">1ll</span>*a[i][j]*b[j]%p;<br>ans[i]%=p;<br>&#125;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s+<span class="hljs-number">1</span>);<br>rint now=<span class="hljs-number">0</span>;m=<span class="hljs-built_in">strlen</span>(s+<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>now=ch[now][s[i]-<span class="hljs-string">&#x27;a&#x27;</span>];<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,(ans[now]+i)%p);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="是谁"><a href="#是谁" class="headerlink" title="是谁"></a>是谁</h1><p>验证冰雹猜想。</p><p>由于冰雹猜想一个数的操作次数不会很多，所以直接模拟就行了。</p><p>考虑如何快速模拟这个过程，首先不难想到压位，有一个$O(ans\frac{n}w)$ 的做法，显然是过不去的，这个东西时间复杂度比较高的原因在于进位的次数比较多，考虑优化掉进位的次数，没有必要每一次操作都进位，实际上可以在处理完一块后统一进位，这样做的时间复杂度是 $O(ans+(\frac{n}w)^2)$ 的，可以通过。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">3e7</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> w=<span class="hljs-number">19</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> B=<span class="hljs-number">1</span>&lt;&lt;w;<br><span class="hljs-type">char</span> s[N];<br>ll a[N],k2[B],b2[B],r[B];<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">(rll x)</span></span>&#123;<br>rll t=x,k=<span class="hljs-number">1</span>,b=<span class="hljs-number">0</span>,res=<span class="hljs-number">0</span>,bas=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span>(bas&lt;B)&#123;<br><span class="hljs-keyword">if</span>(x%(bas&lt;&lt;<span class="hljs-number">1</span>)==<span class="hljs-number">0</span>)bas&lt;&lt;=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">else</span> x=x*<span class="hljs-number">3</span>+bas,k=k*<span class="hljs-number">3</span>,b=b*<span class="hljs-number">3</span>+bas;<br>res++;<br>&#125;<br>k2[t]=k;b2[t]=b;r[t]=res;<br><span class="hljs-keyword">return</span> ;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> ll <span class="hljs-title">solve2</span><span class="hljs-params">(rll x)</span></span>&#123;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(x!=<span class="hljs-number">1</span>)&#123;<br><span class="hljs-keyword">if</span>(x&amp;<span class="hljs-number">1</span>)x=x*<span class="hljs-number">3</span>+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">else</span> x&gt;&gt;=<span class="hljs-number">1</span>;<br>res++;<br>&#125;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,s+<span class="hljs-number">1</span>);<br>rint n=<span class="hljs-built_in">strlen</span>(s+<span class="hljs-number">1</span>);<br><span class="hljs-built_in">reverse</span>(s+<span class="hljs-number">1</span>,s+n+<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i+=w)<br><span class="hljs-keyword">for</span>(rint j=<span class="hljs-number">0</span>;j&lt;w&amp;&amp;i+j&lt;=n;j++)<br>a[i/w+<span class="hljs-number">1</span>]|=(s[i+j]-<span class="hljs-string">&#x27;0&#x27;</span>)&lt;&lt;j;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">0</span>;i&lt;B;i++)<br><span class="hljs-built_in">solve</span>(i);<br>n=(n<span class="hljs-number">-1</span>)/w+<span class="hljs-number">1</span>;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br><span class="hljs-keyword">if</span>(i==n)res+=<span class="hljs-built_in">solve2</span>(a[i]);<br><span class="hljs-keyword">else</span> &#123;<br>res+=r[a[i]];<br>rll t=a[i];<br><span class="hljs-keyword">for</span>(rint j=i;j&lt;=n;j++)<br>a[j]*=k2[t];<br>a[i]+=b2[t];t=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint j=i;j&lt;=n;j++)<br>a[j]+=t,t=a[j]&gt;&gt;w,a[j]&amp;=B<span class="hljs-number">-1</span>;<br><span class="hljs-keyword">if</span>(t)n++,a[n]=t;<br>&#125;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="简单题"><a href="#简单题" class="headerlink" title="简单题"></a>简单题</h1><blockquote><p>维护一个数组 $a$ ，给定 $[l,r]$ 和 $v$，对于区间内的每个 $a_i$ ，支持两种操作</p><ul><li> $a_i=v$</li><li> $b[a_i]+=v$</li></ul></blockquote><p>发现可以简单分块维护，如果一个块有赋值标记那么直接加到标记上，否则新开一个。</p><p>进一步发现如果只维护这两个操作那么实际上没有必要用分块，线段树就行了，标记的处理同理，注意如果一个节点同时有赋值和加法，那么加法一定是给下面的节点，因为上面传来的加法都加在了赋值上。</p><p>上述做法是数据结构写傻了的类型，考虑时光倒流，那么每次赋值操作相当于取走一段区间的数然后加上来，所以只需要写区间加和区间清空。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">5e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>&#123;<br>rint x=<span class="hljs-number">0</span>,f=<span class="hljs-number">1</span>;<span class="hljs-type">char</span> ch=<span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">while</span>(ch&lt;<span class="hljs-string">&#x27;0&#x27;</span>||ch&gt;<span class="hljs-string">&#x27;9&#x27;</span>)&#123;<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>)f=<span class="hljs-number">-1</span>;ch=<span class="hljs-built_in">getchar</span>();&#125;<br><span class="hljs-keyword">while</span>(ch&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;ch&gt;=<span class="hljs-string">&#x27;0&#x27;</span>)&#123;x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">&#x27;0&#x27;</span>;ch=<span class="hljs-built_in">getchar</span>();&#125;<br><span class="hljs-keyword">return</span> x*f;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ls rt&lt;&lt;1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rs rt&lt;&lt;1|1</span><br><span class="hljs-type">int</span> tag[N&lt;&lt;<span class="hljs-number">2</span>];<br>ll tag2[N&lt;&lt;<span class="hljs-number">2</span>],b[N&lt;&lt;<span class="hljs-number">2</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Build</span><span class="hljs-params">(rint rt,rint l,rint r)</span></span>&#123;<br>tag[rt]=<span class="hljs-number">-1</span>;<br><span class="hljs-keyword">if</span>(l==r)&#123;<br>tag[rt]=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">return</span> ;<br>&#125;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-built_in">Build</span>(ls,l,mid);<br><span class="hljs-built_in">Build</span>(rs,mid+<span class="hljs-number">1</span>,r);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">down</span><span class="hljs-params">(rint rt,rint l,rint r)</span></span>&#123;<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(tag2[rt])&#123;<br><span class="hljs-keyword">if</span>(tag[ls]!=<span class="hljs-number">-1</span>)b[tag[ls]]+=tag2[rt]*(mid-l+<span class="hljs-number">1</span>);<br><span class="hljs-keyword">else</span> tag2[ls]+=tag2[rt];<br><span class="hljs-keyword">if</span>(tag[rs]!=<span class="hljs-number">-1</span>)b[tag[rs]]+=tag2[rt]*(r-mid);<br><span class="hljs-keyword">else</span> tag2[rs]+=tag2[rt];<br>tag2[rt]=<span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-keyword">if</span>(tag[rt]!=<span class="hljs-number">-1</span>)&#123;<br>tag[ls]=tag[rs]=tag[rt];<br>tag[rt]=<span class="hljs-number">-1</span>;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(rint rt,rint l,rint r,rint cl,rint cr,rint v)</span></span>&#123;<br><span class="hljs-keyword">if</span>(cl&lt;=l&amp;&amp;r&lt;=cr)&#123;<br>tag[rt]=v;<br><span class="hljs-keyword">return</span> ;<br>&#125;<br><span class="hljs-built_in">down</span>(rt,l,r);<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=mid)<span class="hljs-built_in">modify</span>(ls,l,mid,cl,cr,v);<br><span class="hljs-keyword">if</span>(cr&gt;mid)<span class="hljs-built_in">modify</span>(rs,mid+<span class="hljs-number">1</span>,r,cl,cr,v);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(rint rt,rint l,rint r,rint cl,rint cr,rll v)</span></span>&#123;<br><span class="hljs-keyword">if</span>(cl&lt;=l&amp;&amp;r&lt;=cr)&#123;<br><span class="hljs-keyword">if</span>(tag[rt]!=<span class="hljs-number">-1</span>)b[tag[rt]]+=v*(r-l+<span class="hljs-number">1</span>);<br><span class="hljs-keyword">else</span> tag2[rt]+=v;<br><span class="hljs-keyword">return</span> ;<br>&#125;<br><span class="hljs-built_in">down</span>(rt,l,r);<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(cl&lt;=mid)<span class="hljs-built_in">update</span>(ls,l,mid,cl,cr,v);<br><span class="hljs-keyword">if</span>(cr&gt;mid)<span class="hljs-built_in">update</span>(rs,mid+<span class="hljs-number">1</span>,r,cl,cr,v);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint rt,rint l,rint r)</span></span>&#123;<br><span class="hljs-keyword">if</span>(l==r)<span class="hljs-keyword">return</span> ;<br><span class="hljs-built_in">down</span>(rt,l,r);<br>rint mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs</span>(ls,l,mid);<span class="hljs-built_in">dfs</span>(rs,mid+<span class="hljs-number">1</span>,r);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n=<span class="hljs-built_in">read</span>(),m=<span class="hljs-built_in">read</span>(),q=<span class="hljs-built_in">read</span>();<br><span class="hljs-built_in">Build</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br><span class="hljs-keyword">while</span>(q--)&#123;<br>rint opt=<span class="hljs-built_in">read</span>(),l=<span class="hljs-built_in">read</span>(),r=<span class="hljs-built_in">read</span>(),v=<span class="hljs-built_in">read</span>();<br><span class="hljs-keyword">if</span>(opt==<span class="hljs-number">1</span>)<br><span class="hljs-built_in">modify</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,l,r,v);<br><span class="hljs-keyword">else</span> <br><span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,l,r,v);<br>&#125;<br><span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=m;i++)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,b[i]);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="树上游走"><a href="#树上游走" class="headerlink" title="树上游走"></a>树上游走</h1><blockquote><p>在树上从 $S$ 开始随机游走，每次等概率向外走一条边，一个点走出去两次之后就消失了，问最后停在每个点的概率。</p></blockquote><p>首先分析一下一次游走的性质，显然最后只会停在度数为二的节点或者度数为一的 $S$ 节点或者叶子节点，所以只在度数不超过二的时候停机答案，假如以 $S$ 为根做 $dfs$ ，那么走到一个点时，如果它作为最后一个点，那么它的父亲必须要在走下来时消失，不然再次走上去这个点的子树走不完，而如果不作为最后的点，它的父亲是可以存在的，而父亲的存在与否是会影响到下一步的概率，所以需要维护一个 $dp[u][0/1]$ 表示走到 $u$，它的父亲在不在的概率，然后进一步发现，父亲消失了就需要走儿子，因为儿子必须消失所以至少要走两步，走一步的时候这个儿子是存在的，这个也是会影响下一步的概率的，所以维护一个 $sp$ 数组，表示这个点向下走一步的概率，这个是非常好维护的，还有一个 $f$ 数组，表示向下走至少两步的概率，维护出来之后随便转移一下即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ull unsigned long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p=<span class="hljs-number">998244353</span>;<br><span class="hljs-function">ll <span class="hljs-title">fpow</span><span class="hljs-params">(rll a,rll b)</span></span>&#123;<br>rll res=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(;b;b&gt;&gt;=<span class="hljs-number">1</span>,a=a*a%p)<br><span class="hljs-keyword">if</span>(b&amp;<span class="hljs-number">1</span>)res=res*a%p;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt;<br>&#125;e[N&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-type">int</span> h[N],idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;<br>e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;<br>&#125;<br><span class="hljs-type">int</span> n,s,w[N],du[N];<br>ll d1[N],d2[N];<br>ll f[N][<span class="hljs-number">2</span>],g[N],dp[N][<span class="hljs-number">2</span>],sp[N][<span class="hljs-number">2</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint u,rint fa)</span></span>&#123;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa)<span class="hljs-keyword">continue</span>;<br><span class="hljs-built_in">dfs</span>(v,u);<br>sp[u][<span class="hljs-number">0</span>]=(sp[u][<span class="hljs-number">0</span>]+d2[u]*d1[v])%p;<br>f[u][<span class="hljs-number">0</span>]=(f[u][<span class="hljs-number">0</span>]+f[v][<span class="hljs-number">1</span>]*d2[u]%p*d2[v]+sp[v][<span class="hljs-number">1</span>]*d2[u]%p*d1[v])%p;<br>sp[u][<span class="hljs-number">1</span>]=(sp[u][<span class="hljs-number">1</span>]+d1[u]*d1[v])%p;<br>f[u][<span class="hljs-number">1</span>]=(f[u][<span class="hljs-number">1</span>]+f[v][<span class="hljs-number">1</span>]*d1[u]%p*d2[v]+sp[v][<span class="hljs-number">1</span>]*d1[u]%p*d1[v])%p;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs2</span><span class="hljs-params">(rint u,rint fa,rll lstp)</span></span>&#123;<br><span class="hljs-keyword">if</span>(du[u]==<span class="hljs-number">2</span>)<br>g[u]=dp[u][<span class="hljs-number">0</span>]*f[u][<span class="hljs-number">0</span>]%p;<br><span class="hljs-keyword">if</span>(du[u]==<span class="hljs-number">1</span>)&#123;<br>g[u]=(dp[u][<span class="hljs-number">0</span>]+lstp)%p;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(v==fa)<span class="hljs-keyword">continue</span>;<br>sp[u][<span class="hljs-number">0</span>]-=d2[u]*d1[v]%p;sp[u][<span class="hljs-number">0</span>]=(sp[u][<span class="hljs-number">0</span>]+p)%p;<br>sp[u][<span class="hljs-number">1</span>]-=d1[u]*d1[v]%p;sp[u][<span class="hljs-number">1</span>]=(sp[u][<span class="hljs-number">1</span>]+p)%p;<br>f[u][<span class="hljs-number">0</span>]-=f[v][<span class="hljs-number">1</span>]*d2[u]%p*d2[v]%p+sp[v][<span class="hljs-number">1</span>]*d2[u]%p*d1[v]%p;f[u][<span class="hljs-number">0</span>]=(f[u][<span class="hljs-number">0</span>]%p+p)%p;<br>f[u][<span class="hljs-number">1</span>]-=f[v][<span class="hljs-number">1</span>]*d1[u]%p*d2[v]%p+sp[v][<span class="hljs-number">1</span>]*d1[u]%p*d1[v]%p;f[u][<span class="hljs-number">1</span>]=(f[u][<span class="hljs-number">1</span>]%p+p)%p;<br>dp[v][<span class="hljs-number">0</span>]=(dp[u][<span class="hljs-number">0</span>]*f[u][<span class="hljs-number">0</span>]%p*<span class="hljs-built_in">fpow</span>(du[u]<span class="hljs-number">-2</span>,p<span class="hljs-number">-2</span>)%p+dp[u][<span class="hljs-number">0</span>]*sp[u][<span class="hljs-number">0</span>]%p*d2[u]%p+<br>lstp*d2[u]%p+dp[u][<span class="hljs-number">1</span>]*f[u][<span class="hljs-number">1</span>]%p*d2[u]%p+dp[u][<span class="hljs-number">1</span>]*sp[u][<span class="hljs-number">1</span>]%p*d1[u])%p;<br>dp[v][<span class="hljs-number">1</span>]=(dp[u][<span class="hljs-number">0</span>]*d2[u]+dp[u][<span class="hljs-number">1</span>]*d1[u])%p;<br><span class="hljs-built_in">dfs2</span>(v,u,(dp[u][<span class="hljs-number">0</span>]*d2[u]%p*d1[v]%p*d2[u]%p+dp[u][<span class="hljs-number">1</span>]*d1[u]%p*d1[v]%p*d1[u]%p)%p);<br>sp[u][<span class="hljs-number">0</span>]+=d2[u]*d1[v]%p;sp[u][<span class="hljs-number">0</span>]=(sp[u][<span class="hljs-number">0</span>]+p)%p;<br>sp[u][<span class="hljs-number">1</span>]+=d1[u]*d1[v]%p;sp[u][<span class="hljs-number">1</span>]=(sp[u][<span class="hljs-number">1</span>]+p)%p;<br>f[u][<span class="hljs-number">0</span>]+=f[v][<span class="hljs-number">1</span>]*d2[u]%p*d2[v]%p+sp[v][<span class="hljs-number">1</span>]*d2[u]%p*d1[v]%p;f[u][<span class="hljs-number">0</span>]=(f[u][<span class="hljs-number">0</span>]%p+p)%p;<br>f[u][<span class="hljs-number">1</span>]+=f[v][<span class="hljs-number">1</span>]*d1[u]%p*d2[v]%p+sp[v][<span class="hljs-number">1</span>]*d1[u]%p*d1[v]%p;f[u][<span class="hljs-number">1</span>]=(f[u][<span class="hljs-number">1</span>]%p+p)%p;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">dfs</span>(s,<span class="hljs-number">0</span>);<br>dp[s][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint i=h[s];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br>sp[s][<span class="hljs-number">1</span>]-=d1[s]*d1[v]%p;sp[s][<span class="hljs-number">1</span>]=(sp[s][<span class="hljs-number">1</span>]+p)%p;<br>f[s][<span class="hljs-number">1</span>]-=f[v][<span class="hljs-number">1</span>]*d1[s]%p*d2[v]%p+sp[v][<span class="hljs-number">1</span>]*d1[s]%p*d1[v]%p;f[s][<span class="hljs-number">1</span>]=(f[s][<span class="hljs-number">1</span>]%p+p)%p;<br>dp[v][<span class="hljs-number">0</span>]=(dp[s][<span class="hljs-number">0</span>]*f[s][<span class="hljs-number">1</span>]%p*d2[s]%p+dp[s][<span class="hljs-number">0</span>]*sp[s][<span class="hljs-number">1</span>]%p*d1[s]%p)%p;<br>dp[v][<span class="hljs-number">1</span>]=(dp[s][<span class="hljs-number">0</span>]*d1[s])%p;<br><span class="hljs-built_in">dfs2</span>(v,s,d1[v]*d1[s]%p*d1[s]%p);<br>sp[s][<span class="hljs-number">1</span>]+=d1[s]*d1[v]%p;sp[s][<span class="hljs-number">1</span>]=(sp[s][<span class="hljs-number">1</span>]+p)%p;<br>f[s][<span class="hljs-number">1</span>]+=f[v][<span class="hljs-number">1</span>]*d1[s]%p*d2[v]%p+sp[v][<span class="hljs-number">1</span>]*d1[s]%p*d1[v]%p;f[s][<span class="hljs-number">1</span>]=(f[s][<span class="hljs-number">1</span>]%p+p)%p;<br>&#125;<br><span class="hljs-keyword">if</span>(du[s]==<span class="hljs-number">1</span>)g[s]=f[s][<span class="hljs-number">1</span>];<br><span class="hljs-keyword">else</span> g[s]=<span class="hljs-number">0</span>;<br>rll res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>res+=g[i]*w[i]%p;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,res%p);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;s);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;w[i]);<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">2</span>;i&lt;=n;i++)&#123;<br>rint x,y;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);<br><span class="hljs-built_in">Ins</span>(x,y);<span class="hljs-built_in">Ins</span>(y,x);<br>du[x]++;du[y]++;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>d2[i]=<span class="hljs-built_in">fpow</span>(du[i]<span class="hljs-number">-1</span>,p<span class="hljs-number">-2</span>),d1[i]=<span class="hljs-built_in">fpow</span>(du[i],p<span class="hljs-number">-2</span>);<br><span class="hljs-built_in">solve</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="树的同构"><a href="#树的同构" class="headerlink" title="树的同构"></a>树的同构</h1><blockquote><p>给定一棵树，找到两个没有交的联通块使得存在一种重新标号的方式让这两个联通块形状一样。</p></blockquote><p>$n\leq50$</p><p>首先可以枚举一个联通子集然后用树哈希判断。</p><p>其次不难想到枚举两个点，钦定这两个点必选，然后剩下的事就是一步一步向外扩展，这个扩展是很不好做的，考虑定义一个数组 $F[x][y]$ 表示在同构中，$x$ 对应 $y$，这样得到的点集最大是多少，这样的话就转移是一个类似二分图最大带权匹配的东西，用费用流就行了。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rint register int</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> rll register long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">55</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt;<br>&#125;e[N&lt;&lt;<span class="hljs-number">1</span>];<br><span class="hljs-type">int</span> h[N],idx,x[N],y[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b)</span></span>&#123;<br>e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;<br>&#125;<br><span class="hljs-keyword">namespace</span> Netflow&#123;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br><span class="hljs-type">int</span> to,nxt,cost,val;<br>&#125;e[N*N*<span class="hljs-number">2</span>];<br><span class="hljs-type">int</span> h[N],idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(rint a,rint b,rint c,rint d)</span></span>&#123;<br>e[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;<br>e[idx].val=c;e[idx].cost=d;<br>&#125;<br><span class="hljs-type">int</span> mp[N],cnt,st,ed;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span>&#123;<br>st=<span class="hljs-number">1</span>;ed=<span class="hljs-number">2</span>;cnt=<span class="hljs-number">2</span>;idx=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">memset</span>(h,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(h));<br>&#125;<br><span class="hljs-type">int</span> pre[N],dis[N];<br><span class="hljs-type">bool</span> vis[N];<br>queue&lt;<span class="hljs-type">int</span>&gt; q;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">spfa</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-built_in">memset</span>(dis,<span class="hljs-number">-0x3f</span>,<span class="hljs-built_in">sizeof</span>(dis));<br>q.<span class="hljs-built_in">push</span>(st);dis[st]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())&#123;<br>rint u=q.<span class="hljs-built_in">front</span>();q.<span class="hljs-built_in">pop</span>();vis[u]=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(e[i].val&amp;&amp;dis[v]&lt;dis[u]+e[i].cost)&#123;<br>dis[v]=dis[u]+e[i].cost;<br>pre[v]=i;<br><span class="hljs-keyword">if</span>(!vis[v])&#123;<br>q.<span class="hljs-built_in">push</span>(v);<br>vis[v]=<span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> dis[ed]!=dis[<span class="hljs-number">0</span>];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getans</span><span class="hljs-params">()</span></span>&#123;<br>rint res=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(<span class="hljs-built_in">spfa</span>())&#123;<br>rint Min=<span class="hljs-number">1e9</span>;<br><span class="hljs-keyword">for</span>(rint now=ed;now!=st;now=e[pre[now]^<span class="hljs-number">1</span>].to)<br>Min=<span class="hljs-built_in">min</span>(Min,e[pre[now]].val);<br><span class="hljs-keyword">for</span>(rint now=ed;now!=st;now=e[pre[now]^<span class="hljs-number">1</span>].to)<br>e[pre[now]].val-=Min,e[pre[now]^<span class="hljs-number">1</span>].val+=Min;<br>res+=Min*dis[ed];<br>&#125;<br><span class="hljs-keyword">return</span> res;<br>&#125;<br>&#125;;<br><span class="hljs-type">char</span> s[<span class="hljs-number">10005</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">readIn</span><span class="hljs-params">()</span></span>&#123;<br>cin.<span class="hljs-built_in">getline</span>(s+<span class="hljs-number">1</span>,<span class="hljs-number">10000</span>);<br>rint len=<span class="hljs-built_in">strlen</span>(s+<span class="hljs-number">1</span>),n=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>,v=<span class="hljs-number">0</span>;i&lt;=len;i++)&#123;<br><span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27; &#x27;</span>)&#123;<br>x[++n]=v;<br>v=<span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s[i]&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;s[i]&gt;=<span class="hljs-string">&#x27;0&#x27;</span>)<br>v=v*<span class="hljs-number">10</span>+s[i]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>&#125;<br>cin.<span class="hljs-built_in">getline</span>(s+<span class="hljs-number">1</span>,<span class="hljs-number">10000</span>);<br>len=<span class="hljs-built_in">strlen</span>(s+<span class="hljs-number">1</span>);n=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>,v=<span class="hljs-number">0</span>;i&lt;=len;i++)&#123;<br><span class="hljs-keyword">if</span>(s[i]==<span class="hljs-string">&#x27; &#x27;</span>)&#123;<br>y[++n]=v;<br>v=<span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s[i]&lt;=<span class="hljs-string">&#x27;9&#x27;</span>&amp;&amp;s[i]&gt;=<span class="hljs-string">&#x27;0&#x27;</span>)<br>v=v*<span class="hljs-number">10</span>+s[i]-<span class="hljs-string">&#x27;0&#x27;</span>;<br>&#125;<br><span class="hljs-keyword">for</span>(rint i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br><span class="hljs-built_in">Ins</span>(x[i]+<span class="hljs-number">1</span>,y[i]+<span class="hljs-number">1</span>),<span class="hljs-built_in">Ins</span>(y[i]+<span class="hljs-number">1</span>,x[i]+<span class="hljs-number">1</span>);<br><span class="hljs-keyword">return</span> n+<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-type">bool</span> vis[N];<br><span class="hljs-type">int</span> Maxd,f[N][N];<br>vector&lt;<span class="hljs-type">int</span>&gt; vec1[N],vec2[N],g[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(rint u,rint d,vector&lt;<span class="hljs-type">int</span>&gt; vec[])</span></span>&#123;<br>vis[u]=<span class="hljs-number">1</span>;Maxd=<span class="hljs-built_in">max</span>(Maxd,d);vec[d].<span class="hljs-built_in">push_back</span>(u);g[u].<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint i=h[u];i;i=e[i].nxt)&#123;<br>rint v=e[i].to;<br><span class="hljs-keyword">if</span>(vis[v])<span class="hljs-keyword">continue</span>;<br>g[u].<span class="hljs-built_in">push_back</span>(v);<br><span class="hljs-built_in">dfs</span>(v,d+<span class="hljs-number">1</span>,vec);<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>rint n=<span class="hljs-built_in">readIn</span>(),res=<span class="hljs-number">0</span>,cnt=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(rint x=<span class="hljs-number">1</span>;x&lt;=n;x++)<br><span class="hljs-keyword">for</span>(rint y=<span class="hljs-number">1</span>;y&lt;=n;y++)&#123;<br><span class="hljs-keyword">if</span>(x==y)<span class="hljs-keyword">continue</span>;<br><span class="hljs-built_in">memset</span>(f,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(f));<br><span class="hljs-built_in">memset</span>(vis,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(vis));<br>Maxd=<span class="hljs-number">0</span>;vis[y]=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">dfs</span>(x,<span class="hljs-number">1</span>,vec1);<br><span class="hljs-built_in">dfs</span>(y,<span class="hljs-number">1</span>,vec2);<br><span class="hljs-keyword">for</span>(rint v1:vec1[Maxd])<span class="hljs-keyword">for</span>(rint v2:vec2[Maxd])<br>f[v1][v2]=f[v2][v1]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span>(rint d=Maxd<span class="hljs-number">-1</span>;d;d--)&#123;<br><span class="hljs-keyword">for</span>(rint v1:vec1[d])<span class="hljs-keyword">for</span>(rint v2:vec2[d])&#123;<br>Netflow::<span class="hljs-built_in">clear</span>();<br><span class="hljs-keyword">for</span>(rint s1:g[v1])&#123;<br>Netflow::mp[s1]=++Netflow::cnt;<br>Netflow::<span class="hljs-built_in">Ins</span>(Netflow::st,Netflow::cnt,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br>Netflow::<span class="hljs-built_in">Ins</span>(Netflow::cnt,Netflow::st,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">for</span>(rint s2:g[v2])&#123;<br>Netflow::mp[s2]=++Netflow::cnt;<br>Netflow::<span class="hljs-built_in">Ins</span>(Netflow::cnt,Netflow::ed,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);<br>Netflow::<span class="hljs-built_in">Ins</span>(Netflow::ed,Netflow::cnt,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">for</span>(rint s1:g[v1])<span class="hljs-keyword">for</span>(rint s2:g[v2])&#123;<br>Netflow::<span class="hljs-built_in">Ins</span>(Netflow::mp[s1],Netflow::mp[s2],<span class="hljs-number">1</span>,f[s1][s2]);<br>Netflow::<span class="hljs-built_in">Ins</span>(Netflow::mp[s2],Netflow::mp[s1],<span class="hljs-number">0</span>,-f[s1][s2]);<br>&#125;<br>f[v1][v2]=f[v2][v1]=Netflow::<span class="hljs-built_in">getans</span>()+<span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span>(rint d=<span class="hljs-number">1</span>;d&lt;=Maxd;d++)<br>vec1[d].<span class="hljs-built_in">clear</span>(),vec2[d].<span class="hljs-built_in">clear</span>();<br>res=<span class="hljs-built_in">max</span>(res,f[x][y]);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,res);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>杂题</category>
      
    </categories>
    
    
    <tags>
      
      <tag>杂题</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python笔记</title>
    <link href="/2022/12/01/python/"/>
    <url>/2022/12/01/python/</url>
    
    <content type="html"><![CDATA[<h1 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h1><p>代码缩进表示程序块，缩进格式要严格。</p><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>数据类型区别于C语言，多增加了一个列表，和C语言的数组相似，使用前要定义。</p><p>列表可以正向访问（索引为正数）也可以逆向访问（索引为负数）。</p><p>使用 in 判断一个元素是否在列表内。</p><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>字符串索引<code>[M]</code></p><p>字符串切片<code>[1:3]</code></p><p><code>eval</code>评估语句，去掉最外层的引号</p><h2 id="I-O"><a href="#I-O" class="headerlink" title="I/O"></a>I/O</h2><p>输入使用<code>input</code>，<code>input</code>的时候可以加入提示信息</p><p>输出格式化<code>&#123;:.2f&#125;.format(x)</code></p><p>在<code>print</code>后面加上<code>end=&quot;&quot;</code>，可以让输出不换行</p><h2 id="分支语句"><a href="#分支语句" class="headerlink" title="分支语句"></a>分支语句</h2><p><code>if elif else</code> 三种</p><p>最后必须要加上冒号，注意缩进</p><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p><code>import</code> 直接引用</p><p><code>from x import *</code>全部引用</p><p><code>import x as</code>用库别名</p><h2 id="range-函数"><a href="#range-函数" class="headerlink" title="range 函数"></a>range 函数</h2><p><code>for i in range(4)</code>=<code>for(int i=0;i&lt;4;i++)</code></p><p><code>for i in range(m,n)</code>产生循环计数序列[m,n-1]</p><h2 id="数值运算函数"><a href="#数值运算函数" class="headerlink" title="数值运算函数"></a>数值运算函数</h2><p><code>divmod(x,y)</code>返回<code>x//y,x%y</code></p><p><code>pow(x,y[,z])</code>快速幂，对 $z$ 取模（可省略）</p><p><code>round(x[,d])</code>四舍五入，保留 $d$ 位小数，默认为 $0$</p><p><code>max,min</code>对多个整数求最大最小值</p><h1 id="Turtle-库"><a href="#Turtle-库" class="headerlink" title="Turtle 库"></a>Turtle 库</h1><p><code>setup(width,height,startx,starty)</code>设置窗体大小</p><p><code>goto()</code>绝对坐标</p><p><code>fd</code>向前<code>bk</code>向后<code>circle(r,angle)</code>以左侧某个位置为圆心，画弧</p><p><code>seth</code>改变前进方向<code>left right</code>向左向右</p><p><code>penup,pendown</code>抬起/放下画笔</p><p><code>pensize\width</code>画笔宽度</p><p><code>pencolor</code>改变画笔颜色</p>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机导论复习</title>
    <link href="/2022/10/26/jsjdl/"/>
    <url>/2022/10/26/jsjdl/</url>
    
    <content type="html"><![CDATA[<h1 id="绪论"><a href="#绪论" class="headerlink" title="绪论"></a>绪论</h1><h2 id="信息"><a href="#信息" class="headerlink" title="信息"></a>信息</h2><p>1、信息是用来消除随机不定性的东西。</p><p>2、人通过获得、识别自然界和社会的不同信息来区别不同事物，得以认识和改变世界。</p><p>3、香农是信息论的创始人。</p><p>4、信息的主要特性：</p><blockquote><p>依附于载体</p><p>可传递性</p><p>可处理性</p><p>共享性</p></blockquote><h2 id="信息技术"><a href="#信息技术" class="headerlink" title="信息技术"></a>信息技术</h2><h3 id="信息基础技术"><a href="#信息基础技术" class="headerlink" title="信息基础技术"></a>信息基础技术</h3><p>1、微电子技术</p><p>大规模及超大规模集成电路，将大量晶体管组合到单一芯片的集成电路。</p><p>现代电子信息技术的直接基础，当今新技术革命的基石。</p><p>2、光电子技术</p><p>以光子技术为基础的综合性高新技术。</p><p>光电子技术是应用到未来信息产业的核心技术。</p><p>超高速，大容量，低能量。</p><h3 id="信息系统技术"><a href="#信息系统技术" class="headerlink" title="信息系统技术"></a>信息系统技术</h3><p>1、有关信息的获取、处理、存储、传输、控制等的设备和系统的技术。</p><h3 id="信息应用技术"><a href="#信息应用技术" class="headerlink" title="信息应用技术"></a>信息应用技术</h3><h1 id="计算与机器计算"><a href="#计算与机器计算" class="headerlink" title="计算与机器计算"></a>计算与机器计算</h1><h2 id="数字与计算"><a href="#数字与计算" class="headerlink" title="数字与计算"></a>数字与计算</h2><p>最早期的计算机雏形——巴贝基差分机，ada的算法——最早的计算机程序和软件。</p><h2 id="计算机发展简史"><a href="#计算机发展简史" class="headerlink" title="计算机发展简史"></a>计算机发展简史</h2><p>目前是第四代计算机，这是按照元器件划分的。</p><p>第一代：电子真空管<br>第二代：晶体管<br>第三代：集成电路<br>第四代：大规模和超大规模集成电路</p><h2 id="摩尔定律"><a href="#摩尔定律" class="headerlink" title="摩尔定律"></a>摩尔定律</h2><p>计算机第一定理。</p><p>价格不变时，集成电路上可容纳晶体管数目，约每隔十八个月便会增加一倍，性能也会提升一倍。</p><h2 id="计算机发展趋势"><a href="#计算机发展趋势" class="headerlink" title="计算机发展趋势"></a>计算机发展趋势</h2><p>巨型化、微型化、智能化、网络化、多功能化。</p>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>书摘——情感向</title>
    <link href="/2022/10/03/booke/"/>
    <url>/2022/10/03/booke/</url>
    
    <content type="html"><![CDATA[<p>人生不在于遇到了多少人，而在于遇到了多少愿意留在你生命里的人</p><p>多么希望命运能定格在初见的那一瞬间，你在时光里站成永恒</p><p>所有的时光都是被辜负被浪费的，也只有在辜负浪费之后，才能从记忆里将某一段拎出，拍拍上面沉积的灰尘，感叹它是最好的时光</p><p>假若他日相逢，我将何以贺你？以眼泪，以沉默</p><p>爱，在那一刻，改写成爱过</p><p>我们要继续光鲜亮丽，声势浩大的爱自己</p><p>现实与理想之间，不变的是跋涉<br>暗淡与辉煌之间，不变的是开拓</p><p>我们可以输，但绝不能放弃</p><p>见过生活凌厉，依旧内心向暖</p><p>生活从来不是按照某个模式进行的</p><p>残缺反而才是生活的常态</p><p>过于完美的理想就像精美的瓷器，被现实轻轻一击就会支离破碎</p><p>活的让自己赏心悦目的才叫英雄</p><p>我们终究被风吹散，散落在天涯</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>思考</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>书摘——苦难辉煌</title>
    <link href="/2022/10/03/bookh/"/>
    <url>/2022/10/03/bookh/</url>
    
    <content type="html"><![CDATA[<p>历史的奥妙，在于它可以包含无穷无尽的假设。<br>历史的冷峻，又在于它总把假设永远置于假设。</p><p>武装革命反对武装革命，这是中国革命的特点之一，也是中国革命的优势之一。</p><p>时势造英雄，英雄仍须识实事。</p><p>利用廖仲恺被刺案件，蒋介石指挥党军包围了许崇智住宅，指其涉嫌廖仲恺案，许崇智仓皇逃往上海，胡汉民族弟胡毅生与廖仲恺案有瓜葛，胡汉民先被拘留审查，后被迫出使苏联。</p><p>国民党二大，蒋介石被选举为中央执行委员，有效票数249张，蒋得票248张，248强于249，少的这一票是蒋介石自己未投自己，给人以谦虚的印象。</p><p>中山舰事件一石三鸟，打击了中共，苏联顾问和汪精卫。</p><p>鲍罗廷仍然沉浸在自我营造的梦境中。<br>蒋介石早就行动在自我营造的现实里。</p><p>中共的巨大号召力，坚韧战斗力，顽强生命力。</p><p>中共的信仰，在这个非常时刻，变得如此廉价。</p><p>星星之火可以燎原。</p><p>南昌暴动，是中共独立领导武装斗争的开始，中国人民解放军的高级将领与这场暴动紧密相连。</p><p>革命失败后，是黑暗的，但黑暗是暂时的。</p><p>什么是力挽狂澜，这就是力挽狂澜。</p><p>敌退我追，敌驻我扰。</p><p>历史正因为不可预测，所以才充满机会。</p><p>历史是一条奔腾不息的长河，给予个人的机会极其有限。面对不可预测的历史，能够凭借的，只有自身的素质与信念。这种坚不可摧的素质与信念，最终汇聚成深刻、敏锐的历史自觉。</p><p>有强烈的吞掉敌人的企图和雄心。</p><p>指挥员的勇敢集中表现在歼敌决心的坚定顽强上面。</p><p>闭上眼睛面前就有一幅鲜明的战场图影，</p><p>化冒险性为创造性。</p><p>要勇于穷追。</p><p>要跑步走，快步走，就是爬，也要向前追。</p><p>像铁锤一样，砸到哪里，哪里就碎。</p><p>要面对失败，总结失败。</p><p>在关键时刻，要学会撤退。</p><p>性格、思想、意志，不能不是钢。</p><p>国家改革祭坛上的贡物。</p><p>某些时候，泪水比怒吼还要疯狂。</p><p>中国革命的前途和命运，被压缩到了广昌一隅。</p><p>一旦进入某种他潜心琢磨与思考的角度，便会设身反谋，易地而思，其思绪也会变成一条江河，从口中滔滔不绝地汹涌而出。</p><p>却有一个高于智商的因素，平衡。</p><p>世间许多事情就是如此奇异。</p><p>钟山风雨起苍黄，百万雄师过大江。</p><p>高等的忠诚是能为其主化敌为友。</p><p>眼前的失误源于过去的失误。</p><p>辩证法：打开就是关闭，关闭就是打开。</p><p>没有谜的历史，是索然无味的历史，历史的解密过程，又往往容易弄成将谜底复杂化的过程。</p><p>差之毫厘，失之千里。</p><p>湘江，不管是为它浴血奋战也好，还是以它谈笑风生也好，即使浴血奋战的人和谈笑风生的人都不在了，它也仍然在涓涓流淌。</p><p>这是面临十字路口的抉择，把生命和热血留给自己还是交给党的抉择。</p><p>革命的理想，战斗的意志，像一支不熄的火炬，从一个人的手中，传到另一个人手中。</p><p>给人以火星者，必怀火炬。</p><p>位置越远，感情越近。身体越远，灵魂越近。</p><p>一个人的生死，不过一劫。</p><p>那道塘岸使张闻天萌发了一个终生不改的志愿，做老百姓的命塘。</p><p>那一次，他失败了。</p><p>中国革命是一幅立体巨画，凝视哪一个局部去赞美整体都是冒昧的。</p><p>1949年中华人民共和国成立之时，他说，中国人民站起来了。<br>1935年在遵义他虽然沉默，但历史在说，中共站起来了。</p><p>实践在导致会议，实践也在证实会议。</p><p>变化令人眼花缭乱，没有句句是真理，只有步步实事求是。</p><p>人最不能避免的就是失误，人最可贵的就是改正失误。</p><p>伟人从来不是不犯错误的人，而是犯了错误能够迅速及时纠正的人。</p><p>失败孕育着胜利的种子，胜利也包含着失败的基因。</p><p>它是不死鸟，它是火中凤凰。</p><p>真理在大多数时候，并不是一轮光芒四射的红日。更多的时候，他可能只是黑夜中的一道电闪，甚至是遥远的前方一缕若明若暗的微光。</p><p>领袖的英明之处，并不在善于提出建议，在善于采纳建议。</p><p>中共的伟大之处，不在于预见，而在于实践。</p><p>胜败往往一瞬之间，机会从来稍纵即逝。</p><p>一次次脱离险区，又一次次面临险境。</p><p>泰山崩于前而面不改色。</p><p>山雨未来，风已满楼。</p><p>真实的历史是荆棘，而不是花环。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>思考</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>seerc2021</title>
    <link href="/2022/08/29/seerc2021/"/>
    <url>/2022/08/29/seerc2021/</url>
    
    <content type="html"><![CDATA[<h2 id="A"><a href="#A" class="headerlink" title="A"></a>A</h2><p>比较字符串的字典序可以进行贪心，所以用一个指针从前往后扫描，维护一个计数器，对于当前字符，如果两个串相同则可以累加计数器，否则若字典序较小，则统计答案，合法的区间左端点个数为计数器累加的数，右端点个数为右边剩下的数，若字典序较大，则清空计数器，因为以后的都不满足题意。</p><h2 id="B"><a href="#B" class="headerlink" title="B"></a>B</h2><p>不难发现加的操作可以直接使用可持久化线段树维护，对于区间覆盖来说不太好弄，因为区间覆盖后无法很好的维护列，考虑列实际上很少，以及可持久化线段树具有很好的合并功能，所以对于每种可能的合并情况都使用线段树进行维护，如果区间覆盖就直接在没有这一列的情况下加入即可。</p><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><p>容易想到一个看上去时间复杂度很假的做法，枚举颜色，然后做树上背包，实际上用到一个结论，在树上归并时，如果限制子树大小为 $k$，那么最终的时间复杂度是 $O(nk)$，这样的话最后时间复杂度为 $O(n^2)$ 。</p><p>下面证明这个结论，有两种方法理解。</p><p>方法一，考虑将两个联通块归并时，这两个连通块的大小，第一种，都大于 $k$，那么归并一次的时间复杂度是 $O(k^2)$，归并次数不超过 $O(\frac{n}{k})$，第二种，仅有一个大于 $k$，那么每归并一次就会少一个小于 $k$ 的连通块，这样也是 $nk$，第三种，都小于 $k$，这样可以先合并出若干个大于 $k$ 的联通块，每个连通块消耗 $k^2$ ，最多 $\frac{n}{k}$ 个块。</p><p>方法二，归并时强行假设枚举的点对是 dfn 序最接近的 $2k$ 个点，这样点对中两个点的 dfn 序差不超过 $2k$，最后得到的点对是 $nk$ 级别的。</p><h2 id="E"><a href="#E" class="headerlink" title="E"></a>E</h2><p>首先 $B$ 数组的顺序是不影响最终结果的，于是先将 $B$ 数组排序方便处理，不难发现我只需要知道前一个数是多少就能够对当前数进行决策，而前一个数最多只有 $m+1$ 种情况，得到一个 $N^2$ 的算法，定义 $dp[i][j]$ 表示当前考虑到第 $i$ 个位置，这个位置上放 $b_j$ 的最小步数，若 $j$ 为 $0$，则表示不替换，转移只有如下几种情况，当 $a_i&gt;a_{i-1}$ 时，$dp[i][0]=min(dp[i][0],dp[i-1][0])$，当 $a_i&lt;a_{i-1} $时，对于所有满足 $b_j&gt;a_{i-1}$ ，$dp[i][j]=min(dp[i][j],dp[i-1][0]+1)$，对于所有情况，$dp[i][0]$ 和所有比它小的 $b_j$ 取 $dp[i-1][j]$ 的最小值，对于 $dp[i][j]$ 的更新，采用贪心策略，$dp[i][j]=min(dp[i][j],dp[i-1][j-1]+1)$，这样做是因为如果当前放 $b_j$ ，那么前面放 $b_{j-1}$ 一定不劣，这样做是 $N^2$ 的，考虑优化，发现可以将不替换的单独拿出来考虑，这个时间复杂度可以接受，只需要考虑替换时怎么维护 $dp$ 值，发现需要做的只有将整个数组平移一个单位和区间对一个数取 $min$ ，使用吉司机线段树维护即可。</p><h2 id="F"><a href="#F" class="headerlink" title="F"></a>F</h2><p>不难发现如果要使用毒药，那么一定是在最开始用了若干瓶，然后又去抵消了一个前缀的回复效果，只需要枚举这个前缀是多少然后计算最优情况即可。</p><h2 id="G"><a href="#G" class="headerlink" title="G"></a>G</h2><p>因为 $w$ 和最终答案的和都是求最大值，所以可以直接去掉绝对值，这样相当于给 $n$ 个数负号，$n$ 个数正号，使得和最大，显然，负号会给到数对中的较小值，正号会给到数对中的较大值，考虑什么时候给正号比给负号优，设第一对给了正号，第二对给了负号，那么给第二对正号更优当且仅当 $a_1-b_2&lt;a_2-b_1$，发现按照 $a+b$ 排序然后取前 $n$ 个即可。</p><h2 id="J"><a href="#J" class="headerlink" title="J"></a>J</h2><p>根据 $A,B,C$ 的数量，我们可以求出 $AB,BC,AC$ 各自有多少个，以 $AB$ 为例，它有 $\frac{cnt_A+cnt_B-cnt_C}{2}$ 个，由于 $B$ 的前面也能接，后面也能接，所以我们优先处理 $B$，如果存在划分方案，那么将 $B$ 的前 $cnt_{BC}$ 个和 $C$ 配对，$B$ 的后 $cnt_{AB}$ 个和 $A$ 配对，这样一定是不劣的，考虑 $AB$ 中用到的 $A$ ，应该是距离 $B$ 最近的 $A$ ，$BC$ 同理，这样剩下的 $AC$ 一定可以配对，否则不存在划分方案。</p><h2 id="K"><a href="#K" class="headerlink" title="K"></a>K</h2><p>如果根确定，那这题十分显然，只需要根据叶子节点的大小去搜索即可。</p><p>现在问题转化为如何确定根，考虑对于一个结点来说，它要么作为根，要么有一个父亲，考虑与这个点相邻的若干块中，影响这个点的只有最小的叶子最大的那个块，比较这个叶子和当前点谁放在序列上更优即可。</p><p>具体实现可以从最小的叶子结点开始往上找根，然后依次更新答案。</p><h2 id="L"><a href="#L" class="headerlink" title="L"></a>L</h2><p>实际上最多只要两次即可实现，只需要找到一个前缀，让它恰好包含一种字符出现了 $n$ 次，将后面区间分成两段分别覆盖一种字符即可，于是依次判断能否用 $0,1$ 次来实现这个问题，$0$ 次直接判断，$1$ 次用双指针即可。</p><h2 id="N"><a href="#N" class="headerlink" title="N"></a>N</h2><p>考虑对 $a$ 数组操作不太好弄，因为不一定每一个 $a_i$ 都会向下产生贡献，而 $b_i$ 则不是，如果存在 $b_i$，那么它一定是需要被抵消的，所以每次将 $b$ 数组往上推即可。</p>]]></content>
    
    
    <categories>
      
      <category>题解</category>
      
    </categories>
    
    
    <tags>
      
      <tag>线段树</tag>
      
      <tag>贪心</tag>
      
      <tag>可持久化</tag>
      
      <tag>动态规划</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>回忆·和 Youyinyue 的往事</title>
    <link href="/2022/06/13/memory1/"/>
    <url>/2022/06/13/memory1/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="8ca94ad575186d4a36dd8010ecdff5060aea3501b05707f99baf5d5b263cbc65">62b7248b4a59bba5d66e9ed9daa72a6830fdae20749d56c4da5e26c218f9a8fed89d7fe16b1e7fbd4e7dd11f98a767956e276701b06cfb2a851f2c85223207e263cd0d04bf8ff72ae28b26f6d74eea9db408feae38158bbf7541dfadbb3ed83d16ed9c246f291b0a8e5b08f883d6cb9102ef813ccaaca73c135a9e819e2942cf1b29660017103aa55e57e16015126f7e9d478136ed67d267bdfd4b638c06ca62a489c1f1cc8823e89afd6fcf40cb82b8d92129aabf0827e41ed33a0e8cd60a1cf8735850c204e7d41d35d423d739dd582be794c572bd276d9e47c432574fdc34880920e24394a1a3bd9e7604786454680c4f9d99250052787a6812a630df198e684152446784572229fe204d7bc0ae9f681c82832344da25e19cc2e21ef897c1e0d30a2f6686dd631bcb41d9d4e30e5effc13f5329a4d5e773110be9cb26aa7f80fb0dc8780c52f7347dd65339d4fcb01f594abc04d2f87e632cf4f7c1ad8ba2bb0d3af0df08fb81039d5bc2b8446702d016c14bf67c51af920b0768654414399ac525e8bf338fbd54c67c4f01b7ab513063df9322217464d41957cb439557f47fb5b64a565ed79df69f2335416cecbc0a056d20e315c644434937cbb4d36cfa423c5a1a170ba195c935fec4feb26f64e838d7d3677794a320ac0cc3333dfb2dde98c6cd5a88774770f4cfd01c8a73f4422b30b24566c3aea3427dfb9d5225dde49e068819e45a2650b019c1428dce7654be47acb2f719889ccf35669fa2a11e037253217d0793b4e1d1432cfbd96c5b3cd5b7f485d1770d63737908969477935f3d2f57af1beb2157a101618953e8b1a0356ee3520205e6de4bb0f2b568347241cb3bd7b49db28aceaf0dced8d6aa90517fc17f9bcdd05580f4aac660953d1409e1395cf584642e7ad0b99f34314cf7311f644b77bd1510b22eff55bf4d7351a8ebeb4193cb0e6c931cf40a37dac28c5616e3832f2b668558194d4c49880ad5e7062c362dc0518ed78901cc7674a6c04e47bd427b38238de6d9e0dabaa054034dd1d9bf5749b428d23706ec6958ba68db0d196809282fa0acb69610e9902a259040738d69831178d463594b06996228b6894b92d8de0a51356d46f9e402f91db6089d8f3b423de1b2a56f6f4faf51a1d3966722a5e5291ee5edffc9676642ec9fcc1aacf07a58bd28e0f6e9962de66197429f84c30f9f9676316df5f41e462702ee19747d257d8a0a3f01b448040278d573bdef04db0824a19b6461a5a7ef8fbbad0bdbfd835a6b57afad09eb4ce0cec35ac1f0849ea74ad9daf7452ae8d2f12585483730f65cf2bf4a1d18ee46447f7f3a32aab8e95f2d76b78adf47d625bf35cf2cb66c376f0fc24a0a0cbcb40e19921588686a24eb7c798f2ec75cbb9c03b4fadcf4bb61953deebfb9258aacd481569cfe84cf3095f7c177e8bbaed09575b99769d988ce604dff6a0005f7427ed1c2d75671bf7689f067588bbb0536c63c67faf279f831cd193dc817ecaeabe9dacc9f17e2e5abaaa4e45d7934793eb2ae19ca714f9b5f271e3315f2070c3914623d2563e4eb373e593f4b06b1648e2444f7aebe1ff25a3d85ac9694cfa731b7da69043f93b4b208d7bfb2afe6b16e8e0f80af689b44c0327ac5d8ad48d1489ba091f976c007fdb474a24531400d5a9f09c22e4193bf58bf671cd69abf9318b00f24ca320a33dd84af5a58c1360dc2aefe63d8db00835c42a79563357dabccc2d810119dc05dd8a78e727f89fae20464c1540c871ac926c038994a06a42199357079736b3f7456b2a0a790d77c73c10f3783dca8134c218d380ef21764a546789641969e939c7f92453539951e0c173c3d742ed694facccd504d3be810435ad99f9218c980a1aa1e491c0fb1410020d929b7a341df7a24a5f3429f6a3d528e7f902bcc0824878871c753102e1e0c70030e7ec22dba7ede0344186ece29a8cc178113c22c4bed0f292e56ff5be0ef3692cfa4cff0d158c7267ff74e41e80cc5a66ba46f9ec6ddac0bf269b52cdefe99bcfc5d440dee8d231f4e91b66e6b239d989584d8c5814e782f5e1e08dd859707ade89457a39b96cd6c6560ed482b2d43113d5f4448f3258f488799a5c2ce8a3274ed89a9fc5f5989ac1150a5b87a9d5ff7aaaa7ab00a24775348afa6f73477ad61c39d72a92fdda6b7c0772d8491103d2479c977a833ed22737a68f137ec14f9e198d84945c084f72d100d19557815921d74e0fd27a1ad7c715bfdde58d5cde9a6f89468ec6a2b9df972049c66a3b2ad0a08ab7462e24bc9a7f4f304111269b7d5f3475440f24b67a371e3316ac399b331db817a57f5f7eb131897bc4ea73e54c9a1699e5b645beeb87d27d323629a49500122b0db32a55763a2779ca26c2b83af0a12b67ee2a092ac5811e67363b6a4bd762b83582d29d5ad128f763036decf8dbe3fc00bdf5e73ff00ed5b5e56a764b2e1de2921a16890b5936f55c02834554f50d815f84eec8137004ca1c6b264d79ab8cf9fa379d57665808b4501334ea50347504611b00a63b31e00bff61812eb34675fa4f90c3bbf65e177cdf71b603ac4646b7c4fbb8c26ab1d2a777e35452fea1c9897bb5537e117c3031474ccb54dc078e2054fca1267da14ff7bcbb230f35ab6a9573dbcf5df4c246cb3c300ce272aecd93e9e38e1a96c01686d9acdd5ab8aaf425e4eceb8b1e7c248f7f72ceff6ecd13ab6b62eb343927f44d817120c8484094228dc4a5243cfd508a504a984b59a4f21ffb8626b09d6b485fa2454415e50e4a41fcc25bd581ab586087266397cd9e9987af94457103c6164faecebaf18aafd8b5d49ad032d620ee157bcf7a0825cded17f9437b5d5b09e9845e485c544340619b36d065528eba129c8e73bfe66e0b4adba85394b543adb2372a27a5ed508536a76a5e8ab188a167bd20fad12285fe4b05ceee7739eae4b7be2899bdebcc2f1207fc4752b358f2498586b260a39a34aeae489e87e7498685aa46cdea80d07f52f3f8948900b750eff7564a635d1238e2aee42d16631b4fe01bca1a40b87de9bf6243f2e0c1b70f41b9a06e307df8bacf249b6a65228c7098073c0e8563834db8990806f0ec5c1c7162ccafed9433fb966ac7703b07d7d598c8c2c7ae4f4d037d3fef90c93a88d965cb0c7b727bd290831a022e94af0fbf8069ab6fafe4b40b134271023f2cf7658699e099dd93a6984449b93c6be79d6cbca3456d60c67562165c43b846efc0452b2e4a196030be2db7f5f382529cb96f3282401654d36e66f52678f11620e1b38811bf7c3bc83fa39a5d831b23ba05ef222fe51a7915a6896a59dce1627a3d650525fa091b3114cabb4762fad55d070b123cca17b1f31244620e4f17a45e892a63352ecad106ee5eb533b9e9769abd96026084c5878622765e5738174a1a321b360d087c76f93f1bba5067ef86da4fa789eba3997c9848315d35692972b6dfe12719ba60efadfd4bfa7624018e52b2b2bdb5649bb79a702b82a32072f91562fe4bffa2852695c415be6a7f55d29ace4eae701826e4de015525a641917204d98ad4c64ebba7552f1c555c531144be5540aaf026a029d54d3112e3bc8448ab9e67f44801b940f3aa913237171eee6440fc51aab4db0fd6b7262f204508422f42c9f0ad303f7de618aaffc2d038b27a1f25d9e358c17bcc1964d4b971db6feca228cc04086477aecabd6f4940579830694c2c029c64cf9f13c2ceb6e7f2188f69521090232dc7d436d0dc9d6dc4b641ac29a0e2ba8bbe4cd13250fcc20a332d24b81215d0968d0d1cdb7f47eec0704f8764220ed6f445d62faeeb689de6756d1d7f85479400e000e495a5b4f74f471875bd7854b3a9aaedb160a7336d2e0755833f3a6b27c51c903d1ae880f8eba8aa1c7f2cbd705d92d813658a5dcf5f7522596017d877c57621aa8023a21533356e47c8bad12a792b94f0380bcbf852373e96430b7ef54a8dbb61ace9190cfe2ceb7da477b4b505948e67df4945909064a4857b1550442bfd763f12e73d758399308d7cfd13d59bc44ea8d4d2f128c41a44abc0e588d4ee0d28c59c2598df167b24904d4f67dee6f935e36f1172f91e05aae609cfa60c698c7a45a79ee766c871fcdbd14761b057fdd67c84ecbcf4e06d7bf2266ad9e329e76f7b560f0c8a48e4c0ba8ee78d6b68b7f2f0a56245ceaeeaac3da44fa6131e89e68eaee76ab6d4feebb3adebdbf990fc968907e6de7382aa609bc5f62e395e1fe6635bfdfc62611f9500ac76ec5c148f8adca9758a439ff795e126f4bc0abb015a3d175ef01167ddbea961597f7c8e9157a0c4b68be57af51a068e5638465ffb4bce645ad72c993fdf61cbca836cbfbd598e3118c875ebc4c1a51e21c16ff865a99607ab23face352627e13e1fad4ed71e8583d33303670cf5718afbce208ab55530489fb369049d8113cdbfef7d1a946cc286ca7023fc90910e225db3ecbd05062e2e5601861b38e8d09924d0b6151d039a1fd4f72436716774f034cfb17449d4cff19e02d38feac50f9cc938aa38842c3464d634491dbfbe491d1b32f41f8a5b8888ef175786079d72217ea3e6460b2d09985333cd669d5d69e14b16799ce3cfac1d009708dfd58687f56f7bd30c2627ca621047a28aec3ac166d4ecb2b39dd3dea61c9a677737f4d28b17a78b0e70e8a87154ec280796cdc3190687f1c9d7970aaeaa5a480c37f26de82f165c16edb85af92d76ecdffda129840e5bed0188d7a095465ad0de751b70c929bdbc8eda7012d88b70ef94e9f73b16d6b726473de207c32ef63d7fb737021840f0d61c2d1998682fef8cd289c1d39a074718a1727140c73c80eec694a8569f81d1e4500cf0c6cc5e2b023c16247a5fbf5399d6ec6821dcfab5d9579da521d710dc14c14e81c86c424ad4f5b8c63b96dd8729661c8c344c6d3013a7a96aaa4e84f51a15cca4e7ff3e8703ec42590c58a0855635ab3ad22aeabe4f28efdd842c9237607b6e0c66743701028db4fc694dcb74c444524663dbb0e76f307e49c304649ff6b533c2d5de718e0f3e7a28079e03808e9ea3a1c98b826a33d2a5161fbeef9964b3ed8505ec4465a9bfe7d8625de2e21016eb2a8f2a1aa4b14393d324d7b3b2ce730a9a76f7c8e0e2d182e12c68073cf6e9ae22893861165530fc7eac27c99be92166d4955937058f670340214e861f826c218c48df25ca2a9a08fd3832d0787d6db3096847c13fe8d90575d454a3c0abebb9dae99628beefecff91e6adf8bbc86ce3fdfcb1afb662055afcbd7ccdb57ad68af7d96fba484ec5a606f919e259f4d54781dfa0a34048cf5abe30dab346621adeed39b0fb4bb385d3ada28b163c410b3018262952681579b3d5a6923e710f6ea006fc4dcba13e06bac7df143c24c9de46ec6b8172aef1b5a5baeea1c1ea4eba66cde05e36902ac0c4b5d08bbc41e62b1e729885e0710362d217c8be38630a39507964e0ed152766bb1ca7456ed7ed8452b9c60848625ddd4ddb08e4e76bb7b1cbbf62ba36a8f87f59aebdfca7e92a580121e5451aa7ab591cba2b62fc3af38015469f789febcd58f3e8952f58e45da68d306ee2d82e1e689d34587f43462d910e7637711b1ccab6cc2575fc06cae3593106c2b60958008bdfd571dd7d12be13a417981557fa4e09d318eeca94fe68ad0b579198f11463ed59c5f25d16b5a022b8fdf0d75462161a3c86d3affa258a8855aea5a2ac3c176b3083b083286bfe76bafaf0902dffd564a15a2719c8923be712d7dacf2528eb21a9ef265d30d875674c8589bd98ed6abd3c06cde2eac0cfe926f672344b5ae9b16c481f70e852aa1483cec45d48fa5835d71d6ce4254bee0e679c1dc79765b73c6e523e9c01a0b4385b5bee8f1af1afdb331717cb4ac07ba215d0d79c97e94499ac7cf4e0fadc9a0298a7d186f7cb7dbe7b3fe6a505e0f0d4f77bf9c5e39dd2c1d3d593e26fc1d9d667e91aa1343134c375e3ba6529890e75b6344d13b9b978aabece0c2538f76f87ec8b97ad8f709d277d044a6602698ddbc31b6cbde5c2494e4a091a6f63dfedfa851ccae4c28962c344a0500779fb5c844c0c99897889d6b35f6ca25161935324053a32a29e174082829204b86874c05ba273b49392b79cd7f95e21cbf5745fc51a7f75fdc4dbbfadbfa82277d244d5d5b3a2494374751f563fcaad94977c69ecdf195892f92b3f57966ebadf7b015387dc6169c46347658b5b4e44a3c5dfadf070152e1004a959e0fa53177db5aecc5de06e5d3ecade14ac3b78f380a93d9f78080444b83ee06793d3399a1e0d7cbcc9399d6466d2acd6da3e976e2c6bc77c93dc33f50d0de09c47c60c19b9a1f7de26eccb0e9f9b58c5bcf45b61c1798fffcbe5904633386c1453f8924a51f5103220e4b35bddc8734b8366d16e2c5d37a6d7d106c339593cb3111b5943a72439f9a964e2a39e6066392d5fd7c23b6aefe6b9c7b5e3d99fb3fe80ac957803c7b6747e5cd4d75c3bd79495ca1a33b3baab40d722595a5f84f1bf2d29ca3ea731f898b85bddb92492aab92313d6165d9da2bb31d1051d798f5c8337b0c02a3a301c076f341220338bc3c1fa9f34e1c0d2b90df519ff6f2a4f3ae53d199f5895a9cf51823a48b851ca7385783aaa8f3b765ec0c2636dc80bf70847563c6092ac2579b14d1343ffdd933d6c23d257442a9eb82145951ae26f7b7e49e488cabc5d6235139bd2bf9893de23613e0a0357421fc08889bc9b0de6ca9633c2a7834eaee8a3c4c98faa81e9aee43f934de2fc8b17f68b22d87d6118c661ae6bdca4e53920df011735a76f1fc143776c05b8be632277fb25c87af44134f943946868ddba76d5ccafc8700e450df47b4c5bbd3b35269e9b36915ec3b8a6373ec4e78a36052a455e616b2c37f9e1d16666b54bed34bb3d1b8ec3fdf0fcc837aca362577829fc67b7cea46adc39d0ff3678a683de65df08aa434e7bdfed182a91781f54138d017aaa06c1008580cd2287ba74590aa81c22364f9154f4561702c0634be4c154317071b8a15c9164c87c4b4c68a4089de8c173b45ccbc61bedb49567ec559ea47895a9fd9c805bf206bddaa61fa25e40c346c7a85ec7f6d9eb0503f774c2f783c254ccba97ad8c28529a8eed4a593c023dbc526096eda269b7b72cb7118a2732cdded0bbb851831bb64ae36308efef1475c9bea5ac3a156e425daeb1074049093ff40f3d476fa0be653a2c50554b009f63f5c1d50b118bb9016edc08963d2ab74081102255c355112ec0658fe201fb3a8d0106ab0912c0e044e7d538f254da79fce15d65f69f30043bc2ab0056446cf01b7665390c3451eb4637bb5e840c489b2a39bb39a1ede9859327d0ff2c21475a473106135ba47009d278ecb5419a5c74c28c80c7038365e30766255dc2e39bb27dd3d923609393f0a5c95863acca37fe7c089ae5f223a937c57eb01b23922fd1ccb152394f51bc1d126e2ec9d331d517b4e2b3a293d2a491ff55353821c7c9bae80c92d89c6cd0b1062235d8c8b9c28f4916f2459dc3511b8218ffab8270413644a749ecffcefe47f3a6391164bec8f5ea4e8690a8aa79e20f805ce60f9ab8da953eb781c78cddd0cce2ccf7d8556cd6f34d16bf9b7d1ae70794b9960f7a51b30e88534bc208d2a21008b3004daf5412af1ff14ff3ee1fd9661d9ce273cc5350b15dd7ae0eaa4c8f4a579b8fe3c563c1f384b720f0b2c09e18106433a923a5c26071a93459bfaccfd4e3bb05075010b32b50309146807fefb19dc7e57985e51173fec210df67865ef16f48bc84f9fb7a490576ec48d8f23bf0ccf0bba24c5e9db50d167e95a20cb006aca07eff349e33cd0d7f46dd9b01f7c86b6b5f4a4bcf1d142eea5a90aff9346bc832c6d00044286919510d66a1ca13d67c982afea6829181e2ace20d357f0399c3a84766eed8c87f568c4350ffb5b51f7d767d3be92780ce300892f087552fe37d4fcf0f3fc62679f980f5669d8ac2d32ee9d1f7f0d95adde8ba6af76b5954dc41ae72433bdca0ed372b279adee89bb3b42115f90aa375525a61c94844ad9eb55762ecc54c19a5eabc13db88aeddac23ef6ef77a21116e194491eaf8b76dc75f57df417e440b39c03d8df721c12ac86a16d537a4225f23d481e90b8b2084ed9fd9c78c0a579de78ae2240d6fb2e8cbda1760b266a59c5bb15976c3cc5125fb5670e6a82dd019f558441c46be8fb8497f67a7e7057c4cb024ca07de241e9689fc4cf0f094a5fba1398ca59022cae341d1982c95bcd8180fe0cdf3efb32fcc708794dd4de9d0ee1d53adeb12db1ff42eba793012037e8d2a41ffca067d0f2d0bdde3e322313b4b04e9dbb662c2074be80217f1e46bf9174caa72dd598ba68eebd3e6ddffe8a22614a2f7a44e08d9422e6eaff14a5e896723247d186df6b63367d5e7141ad30349e044fad421ddf320c4980cc60193b90a4e14e63cee7d65909c7826788b885817c329f0afd6741eb31b4235c60105f8ec2efdb44f0bf16867fd1f0c7e0222ddaccb6a6aba239f6ad29aa0021780b69ffbfe02981c81030663aa8a951837fc188d08ad8fdc1444786d4ee29f95b7a543c8b0a6682a4807b3a64f7fe19f475ed82e5a4655c53e6f399f0d1392b5f94b80d36fd1c3a7356a85ae6cbabca2cdb95e916c6954d75577f677e45d0bf2dc5317441d1f0ca4bbe2d093265d9e90b8f5d7e54388e46dcd0ff078cf98ef923ab670c67f493a1411baa2af2d29c07145c2717925567522bdaefe29de9fae66db8bc0f399126180d8cf61501570fda11797e202d953996553475c06ce7800a0a64425eccab58b9e3f120480a292a095c792b6fc0a0905c286eb59ef3105967209ad6ce660b174d47650beebafa6dec8d677072871229a754194739c21885e1729ed8ef50018c78fcc172b23f82614c4ffe909908c9fa956978ad8012fdca0b5f3e37a2d1690310b4750bf53cb0f53b0b43247105c959ba72ab8182ec7fbc60852e5dd5d583da7de9e66351d7ed174d81335daca1883132ce8f293a2fb63ceb21aaaeed93a6e93a65e6793619006f22f628e834ff6dc8823b7f0637d63c9d0ae279d6f725c00d2cc2f74f0e5006553449e7c0334037393f1ab0cb0ec0676108571562ee68b4995ca52d8e5e7bea83e3c40fcbc00cbca7d26c51330013f7b597d3a82c13599d5b0a9f8ae0ce5574c06c557a7ec6a8697bf61614f0dddae6</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>回忆录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>回忆</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>回忆·过去与 Kaiser_Kell 的那些事情</title>
    <link href="/2022/03/20/memory2/"/>
    <url>/2022/03/20/memory2/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="822f29efa3bda58337787a7aa3cb31325c82f9cd0ac7807b8e0842e9d0e543a6">1df3539302db6534c2a34b4384cda467a662741b4b979d94629d79242c65f1ffcdf6abacd4d7cac121d0e0ab92da5697003ab2fd385f9887f84987b5f13f3545e7be69295ee4fbb972b0883fe0ab8a89207c2e85432d2acb82d160d3b42bed10663e92f8865b641d6cb812e786baa464b8d41f3fd5c382496bef68050cb0063cf65b5e6955a76cd7a969067daa2079e6540c089ee1989870bde7c2222f85c30833cae9128534295ab7ffdbfe5d93e9a758d26bacea9204b79bf51a9ed8ff4f5e2e3808d929d567e37b76c27f612f8c7e7161d655f57895e76087e12fd4f716379df1195d893e3d8aa71422684d854c196da1453db32762879e7093c75b047b6916c60beeea47dd0c157b092a1ca9080aae54c1bbae54370b66fe528cdbd5f100b114f8f7a786cf3d0851a6b78ebd1a9625f135d7179f0e65e2fcc926bc7e9f7a2bb49f33477be6abc31d0fb3176bfa02a7e96a52c0b8ec919ca91556d76d437b583332ae7ffca7524eb52bd7b16208acba515fa5e07088faff4dc31e1bd2efa38045ec22d30b14e96be0a1eed53dc35c92c5c983b1619cc4441e7cdb7bf3e83f6857f12c1c85f5eeaa5b15c97f8b104ab1636e1c61f8d489a939fcd663c03cda535d841a4ae9662484b0bca744cdfd9570d1d7da2e80f790d41bfda1e0ced1b347122b6e3425361e520bd7ba9e7abf517d042d6694b8875b473b707ba9d01a2d225c7fb8865aaaffcf3a3408f7bec13e121206e5eff7ace8b64b513e2f8d50b1814f9ad9626fb7ca259086e1896e870e2a2797ee19d4b2fbf3c8719e9ae1cac345e72577db72d0342caa7a0fe4e50b3c85c4acd68a545ca849d06364d48f2b33a71127bcea56703e930267c09d5aef172e1866096c46c9d2035e8886f668d104119b2639ec7e0f6eb6972511efc8c7ea45269b00d96091042a2bd0242011790047e2c112596951e11a8687dfc36813f1b936da1849e791a24d813f7c93f0661d6f61cfa467e682a7b802f8c71929f0d8cd51be9ed3a0c37e54a2a4e17a3d88592a7a572f7432234c33060f1ee71039591bed3e8d81cc5d16e3341ba2907efab71a33a716807d2d614f8bdf6dcabd73b66915165287d0b4ff7c99868e975c17507ed9a00348320d90ab4ab59a065fb4433797d54b35942d412b144eba4d1bdfd5002853c94fd897d97fd333fbd34f2158d4e84347541b7c22e14ea856f7c65f6a7d09bcf44aed851ac7662b9c3f76740b6a349a4221888aadd80ac22df761a5fcb0d19cbfb55962163b467d3a8927dba4a6ed7a22b2b0a6239162d842d2a83825c2174fcea42024d99b140276a8201b908cc2c4cd26740f72ae4f1492e95724008d4d86ed7226ba6f6f416957acad435676c000793ef2a18030a7499b0188b81c5ade3feecb79c793887314e8b32203801764d3938db7f40c2b0d7940fe7550bfb0440dcd3328ff9d6d5a748a876aae601d27612b47e2dced42146c5e031eae72d73e1145d2bbac70d6924571874a328fda5be90a96fb87cdec31441d41ef7e159508466dc663933e04cb8ae3a824067162cb120c50ba95a76b8481850a8f916834aa0b7aa616b4863dad2a0b98bede4a63e222a0474aa5e1e62101f37ab67d522e9fe6bd5cb893c4d89bae1ebefeddd64270da72c9c3c9af2fa13925d3b7cb5a10a8cd7bd8b8cd444431edee461108296fa493442382df31911c853f617a684ae59dd94ae227f48f22647d43db0da6e78336467155cec3f64b39b8a1884cb6e4f5577c20e7455cb17b23f62a473ced69e62202d9541ae3c790e24a18b22a55c1817b8747ddf8ee550bc8e7f2b553f4a05c904b82367a70ee01e6eff3a51f5234250890033fa02cbd9307911d18f1b53e2c7492cc8db74dea7db1a83640693fb483cfe2b0b1172e6f56527c441fb37f7b890233e1953c022e8e7989fa6306a5b1d72996f2bb2d82389c96a5da7c8075a06cd06cf33c211307d63a8f57162cc58109bd41b3595aeb26b1b5975ba47062975cfd597552d7195bb25b4b4763e975d700d14b9dafb2c4d24111c5c84a75b8cb8e6d14d72621e283cb220b5f4ee5a07957806a6bc4fd6b26fb9cf604389ef5cfcfabe1cb7b0da574c362009b1e9aae9979a64fb74a35b96f6863eb6240212fe03c5691a8c3289c74e8d63d7cd3d83c3b14ca38daf193741eae4494308b2ec7c8735de9f190a2cb6372a957ae368bd560fe0f2c4289e375145b1b9cac0db1fb6cdc5c24766dbba137d8ee2588729fca924c3cc8ecc4a05f246d03141f61e4689562d85f8ad47684ee8b22be567650ca4feacfc425ff200d814931c50714cbf3327927a4d5c8cd8970bd93fa7a6018db3ed7908e57d72256b69931b24c8db5ff5b245187718cda4a73ab28611668874f5c05de3f7b77bd0734fe938b8db89195eef350b0955a43fd3987b7de78fa7f227420eccc7e005492e7c32b4f5ff0f5d263e2d2e24763514d214031917603e9f2e4be6cd2468e4109eb95fce16b152bda10122fa00c67ca41531ff25ca6fd06b6546abe898da79962a893678878ee76c76d5df8a25272fbe3ef7b1ad27cb160559174bc1f6e551578d9b6293278a042ab89bbda6bab2a00ccfb617c3c6669f1fc0a9944f4dcb9f0e0af445f26939eb59a848da52437aff59fe6712fa875f7cc1db9cccf5e213acdc6cf7eeb203f14e53f12f5d0db7828b767d886b56ac4af95014e9338ba7ad8f3928cfb2d5529cc19135f9f122a2eb6f6e3539f4ab77588514afea3c0eb54150557710559c8e7043c750391b72508bae6a5c8543e7e2366511f296f8405b732116e3f601b592695d26f66805008822a6f44c239991759bfeb626bbf3ed18c9a2268d1a4756471211858d091b248ac034033324a57e553318a5c4793be8b54161866b209fb2e83016a72df1d9efc6646e9cc0895120d3651058c5238ae92b60a7dd1b5df2f6b9e1191618d9c1328c252eedc4e0e6302ccb7ab28b68e3b5e9166a9837a11901b727226a5726af88aded322005e8b091973a61c62696c9a2d6e32e9b66c31e47b727442d3908ff498b496b9a001b6dbd507df4f5f60440f7116609d2da5d7cc6917d93ea2bdeac9a29b18df83066208d6752ad312cfa92bc9ffdc6ae52ff51eda2cef702fb0c4cdbf8a04e1aa4e74c04032fcb97bdca8a22676b35fafa69a24127aaa6480a9e8803a3feebec4a08c5c73ac43332470c284c6f57a5d3dfe15bd61b98ad7b1e5e0e5c78545380219405495ef77fdd64b089101d2148c858341baa72bc184c2e2dafe090bee53c722373f3b9e4059df6d42a74822e6cf23a798cca060d75b93a62691cb13f60eb6330de44922f83281964e2977fdbaa8412d8aeb62634928be2a327284fed7a0e725c638ddd7923ad41b3216a71fb40617bed44ab59aea53755ff483d700898a4f2000ba2b6a8e463a593afe5411512ac74b894b97a6cc9f71c3038d63c4c11d3a1178d3a83225d894f9bdb6379355f68e343d4bc67ae905ba1f9a206e5e327315b7370f81aa728fea34e53abf3d02c9e8ba2cee96c3666e1e7c5c6fb658aaf7ec37ffdf5ca1b3afe0c52050cc94959a05611258e8c6907facee496c71336530d07fac589475c3bd8f1a750bc83e6faf4f527c93389793215396ecb2828db5409c06ed99802ffa02d3fd5cbf535ccac4cfcb2d1d2d4aac4e3b0108d47a4e541a66368aa3d0f822fe8f29a75c1d1344be220248f72a21c5003be53a4c2f9092b76c9d6ff7d6a26f6d798721599f25050c35656851e946d317e40154630d729cb321fd05a097fd888033846b2a0c32bcee9060912eeac8827e20727e3d20a382e4a31b0ebd1fee45660a9b4e2379ca4293486340d44eda429a4e3cea3beaf77661d5a7a8c7d258721b7c20bb25be838e0d61e8f671ef510fb7e5f7d0d0189cb1168a8b63e3e92c0ebe46935bbeeb06cd4627a0e652f7e52e8c0b25f0e69cbbccf4c7e05aa21c79f119e79d050805ac451a140c7a1bd7a1dee4e6bb89e8e22946dd4c40f18f9c3e2216a7eb87e31f825c9b819e628ba06d65c95aaf8d1ed65c8e926539ccedf7ee7f2b974362744b42c40d4c6e1dac0c48216767c8d69857365268b67f8c5ed8967d1fdfb626811fe288bc8d38afd635341d78d51596b3f42f4e7fadd6fac40c7ab775cd8cbaf9c1c6b564bef2411fe1d043f290e7dc576ad9dbc79f73e5c6894f49f477b7434f05b91ef4b425114b38722fa3c5303b6e7408fc5037bff42a5fd9f5059aeea3a7a1241eef5e13a6e730cb5dbe171d81e7ef4c68d7668112a63b6391e40b74d7a538ac9d32efc03d8a0f9b671ba88ab0f49367a3f1d48f579e62d1a73de381f4479b22a73deed03b43d93c32a8d021cb6e1882dc9d099b9c87fec21d254bf4fc92f756f3156f86f557bccd30acba080a09a4cff3bf39e4302ef898520d0a44a23c4ab8058ddcc96552048d9b69942765221bb47c79252473863489d74e77b35492a29730241995e1f73d7cf40afc01005817190d0b39f50f9fc3cbb64f5b6983a82facc6e9f02d6763f6e800099ab02607189dd1039048ef2bd232a47a8548bb6f128002cebd8c282c1c454624134da6e12a193108faa2b4c1f56ccc8c68f7bbe22021fcff1197b15e4694b11ae638a2dc7250911d045c5fda9c0ec54ff186c13b81e1d389c841e33b27097df3a3b8cd1f7884c6b5cedb0a07570d27d98bb4e40b170b8e9d28fa79efddd8c22f971de93904500e2aee4dc57e5a37366f65163c7bbd4cdd983e5a1ef2875b3b50423c37e57e83259afafbc0f996e8f31e58c06a783ba0cb1a1298e75927c1c32b008e346564393a3d75c6a4463a1975b3650135f01be451c03a1511f00769eb754834dc2a060622ae555dbb4517d0aa13ffcb3007acc461fe7305353dc9cb6a0fdccd81f53d186711b00630067e20a1b6397fae9c117f83873f0ebb56ded320ab86cdad216cc7779fc49b162789d83c8028d88be6541ca374414e34a4213fa771d9a45e45f5904fbe17513ee644929ae9394e1f060af5a3c56fd81d5a042dead785e407708a30b0f9bc27ce448dad60ab968bfe0250c7455e9759672c439418fe89e3ea379e74ae1d789a38ab9412ce0b3635d9869f4852ef139a78650de5b916f58dacff5a0b5a8a1e5a30fa3504a22189f03f8b71443c7144e94b306f1d3f65101612a8b708c8c5bd7cb145a9088ab760b6374076030ce190ae4d0be17e9a774b5469132bfde81675a6b0d92bbe98c9ae2e57b1dee7c4cbf0296aebddc5a9ec854486daa6e9d19df6767995927bcd7836b59cb35648119affd8e31e458d7563f619bb1d8eee4748ffb326bee8dde3c817fae57a137f07f8abf622e7fdf8d3966ed4f9661c7b906fecb08140030e18f3a9589f4033997e7b1b0354e5a0a7d6bdf20ecfabd6645d64e355a7689a0f54167e20499ed86902985d426e54459cc665e9b61a650dd11062e267ce31d152321e86783363887587ba11d096f488bf15b934412dc85654277aab15023cf1af0f2e362a3cc6bc94671855b55e5c4b9999a93f429399ad84caa3dcf1b9cd266fdd7ed3c960b996d55773a3b838c8fd23943a4396302341d80e27037a47bbe044e3163a5a62f5dca927646ef02c03ba55f1d870f6770b8afe8945517a3509a8a05276bbb79c3c4bc8c3e12e3e3dd8854e5b6734ad956cdab04a783d470316ccf233ad7682979d36dc436ed19d21e80b95c207f5e045710527de1997d9b5985fe542570f9a2f44f71ff880fdcacbdb8feac5bca8106931c9295641056dc084e27ceb86911ccf00ddafd8ae68512633fac10f4ec230436aab975743aaee02579df173e649bc2182fc01a3117b25e4ae070f0b95f91738a0f49d568e275757cb0940c85623ccfcebefcb74933f1b5c3142a0066afb8f4cd94aed6b95e4028b204712d8667ff3ee595d7763fefbbe39f60472ffb5abc42c8576a75025a9d543025589517007311160cacf54319321c1ff58b8e630c52ab0ef42842331ff5d577530f48917678eb0f3ba5f0e24f24b1dfe2f09ddef4da1c2d2859a67ff435fba67f3f9881fa1ae39ccc5ddb4954cf6c354c1517c7e5d97f494bfb8cf704e970b2c2febc9f9268a1d079f9cd89a72ea86b58f6ca4494d561aab2b1502d476b82aa44ee238650c5e2e5ee48182e0692031696d649b468de4e423accb8fb7dd499bf00a3669aaf757b9d6e156aef89b5c72042ff26611a16e8b6b6fa1b4ae4f3fc32e46da15555b6c50feac1902ec96026a3378907ef38232a26cc4abed1809bf4b026332ddeae832b23871c3ecf9c2440af9c32a80475799c45420c685fff59a1cee82dbc671cdc26999da837ebb8f1e9068a135337d51b8e33f5da7b1a9594c6c7b3ba19802b681701ddfcf282d907e7aae250e8d6182c5f6dac0e39694616b521d44656ab7ac4c0a942a3b26d972abe3503aa90ecb48cd828c3357a0de77cd61350bfd904d8e2f76c52a29d697a899d9e0863bb8dd9c09eac9901a0be3136057e0607337526d9c4d20aa5f03cf2129d889b6e73069a3c456d74a88559dbc2b72d3338315d2278648f7158efb2c090508c4276cd0b8d216eca65ad9e178daaafabbe7e1bd4e0dfb40967fd5146b35137ab6e767153c903404d67cd5bda73dd90203e371ef0910bc50557d5366137443499a5bbfe1ed16ebaa0d79fd363777c20c75923609f19abe5aa11b61e11a4fce87a9f2203bffe1947a39a50dd261229c62ff386f74e3dbf6e2e7325287970d0b3c7b7bf9043c45708c0f8cc6ee9f2a3218beee773719a7191b90514a4641c95f9c4e8697b3a031c29a0d29e70d539ef0a6aebb0aa06374ee85733e327f2f4b62ae9c54e1515acfbf8b060159f1307e158dada58fa3437e9003170d8a8110b7520f9d7a415f5c9499799a4fc00311954998d01bdec4b2bc104e4290ccfdacfb8f6021ed3342ffc0409a86d371e26f842eda492a58b6ad067053de63c014e9cea5f48b327dbfd9c4259335fd0d61d3327c827cfdded9cf7dbb37d05c8d1f55ae33e716520c04240c0c2ce1f00b51b1518d2cf145df057b7c66e7de12350d0548fb081289590a0ac216e2a772ccab0d42b02904cf8db70244124c99e2ac17fcf616d169c2bd22d8f71d436ee1eed1986955e5ff324747a7e713c4d7974f8fb9169aadfdae07099432469d25133e49dd56774ceb40020e7c821273f4347a24b50b7430d515a07135c2d711e2a77f228dcc3e499464fbf0f0f1c3d7b93092cf0cc729270e59fa0d069036dad1d743b1ee622ce9e543ff314191cbacfe69957ae479f0fb923522e46e78411a13bbb9ff194b88d0b29f2d897578a0ef469e2f39459cf96f4a319c57ca8ffdc2e03859310eeefd18d1cf4a4c706508a7199f6583ec0a97941b98202db0cd188d429c03ac7e411f92328e16781a9247b6f2764f3d632efab6b50c6b4f98fd17bb17c698082915fbda97eb403b129277d01691142fbcdd76892971fe5052f4feb624e323edbbe12aecf865a9dd33edd3fc15563c64c5210d52fb37584bfcd42804368f5dcc5c5d9d7da137451858e53661c720923e2a0ad1d6fc9844afbae17ee4d6bdc1c9760a59bbc5dad91a348095931a0d66f5a4ffa38c87affe5e4a5a2b19b0e25516bd1ac38e0df8f406a67a30e7708c20611771b7dd26ebb039bb30c2db31a5d12ff0e5e645668c59c0139531859975aec583a6648fb693fe616ea9689175066fcde857be51b7ced50c95ffaab601141c7659e44ffac38de9da5152061e3ff00444be9236c879287139a52348c3d6ddcaf1fb4d6938cc0c8f6f6ce81638cf7f757eb642330232abd8a804a3b5510d069dd8f4d5f3496e94ea7cb76c360242f7c3dc7e32f594f2508b93785423647d261a453a487947da70182851e0bf64bb0a8e31fb6e252996eabb100d8a1316bf726039860d0a1acab2097ee800115de0e8efccffba90e84c161c35d15ed0b614d1452526186f292d09cdfca239650869c3875fc8f6096253702ad16628d867099108d15bdae5e5bc7b4a361dc81cd447987e215b338b9dd928d3cc4c526240b4f68d84bd428ba08d34c545058ba80882a1a62f654eeba8a68a44797a0d672ada306ec3b19b57b0c6d64ad969003f3b9d49526c91e77ecd1032a26bf4982f84ed4246171e1f04b3e194cb5c857e91553c69b28681741e899d0f2a6942bee430695b65cfd37f6d58cf74158950b29f25c31d0581b6e54044e4a107282aca715349df96f7a581089b6e0705c941a7cfffe12db112e6cd3dfdc9a69b7dcabbc5f780ef7a3171ecc95342924502d32ef987831ec4ff03d590b6fe2b6dd8c19f5480c83e2af2e832a2030e4f25f3fefab9c0568cc9a663fe0aa6008bbb90bd0effd8e9df4d28286f4a86e2bf972bb76b3a571a5da529c0357899f850e19eaca13f91d0d4fbcf024b650006db5cbd626b146624cd71506dc9656bd95f1b6add7a3ec8efaaf5ef01289348bad4b3a37f0cadace89531324097f5d59422b538ba592001e078a94b72a66bff87f74a8c50d6fe09d6efd26793bd52bc5bdbbb360016b0c82571dfd75c3bb73aaf0aa927f6e474f6629cc464084efdb7119cce01a1747fb0030dddd0035c23c2899f8fc0a56859a9246b4650a4c7a2440b76b0bfca0e7ac2cfb7d203f4401e731b00a6548d1a5af37e6337ea6f87f359b52510c14cf5b584650f903a3e51d909296ba91658e5974e035244445e2b86fbe718fe9cc59460a8c69d8ba820245ceffe33c411a710ca0477c5f56f6072b121086e3a02a7340a49442a2cc4a5ff1bb8fa3fa7c93871efe652580bb51b108fd7d9d5c98f3a5892bf4c55b85114a4fd8afbdcd052598d62fbd413cfd7093a832a81253975e8bd5697aabe9f8d05905b2c4adb44977c1397946bede238078bba56fb46f7785906e729fe1a88c9936fdcab6a5e6c0c7755c1591b1cbd956c34a4c2b42ab642dd78e83699e9b581c1109a24a9dadf39ea5888e675ba48c9402bff4506b71856cd7898bc091f2b8f1e7a0c6c1caebc8a7f0e8ffca231dbddce8fba18ca24bf08cada6b6504f8b427b3dfc2ea876d5144e87027565a1731e803550033ca56a74f88f9e700fc9f43563071e946927d54002f2c3718d85603efe86fdac298353d799a7bfb06f546ceea805ca83a57c103b5b9ee31ee85eb82bcb1d9537bd2272406cc033323abb1d40774ee3a20be268312a50f1de41beb3a4568c2276e00c88ca6d0d82ee08c00b33dd076f1edc5a56d77d88293dc8515f1298a0a91b0b7b79ce2d135b52a7b684af436e6eeaea5bb5f98d19bdad5b3f9a7bace4b3457be3432fac3ff323fc82071f7ca68f9cd88a43b5c2c2d44a4f058481d472c23cd372e9819bc8ff7208b826624518b80456d06be45d53c14c3c3308ff6b3655d211ca5f02f9ce531960264c9f957b5a20d4652cec67c621945ce0d63988234091e50225220cd57ed44c170e60e2920b2dc9c53c1ed2f2b10e8d510faf41ab5dacdce432db6466fccf8e42deacb9223268c03d1af6610d5743f882d7e49d0fceaa7b9afd44cd222b40df884b004a9b28c66ff8769e316d3924fce4e09c61da805c87fdf2dbf8824fbedaddbab7aba0ac5d6979e31f636c1a07a9e55ffe8040b75ace9e8da035f557e2ba96593bbba39691678de1797417979a300dd8bf89bd5b03d6fd2ea64175e338c78ee91d45cea9ecfadd5ecd6da11ec9b50257e949174b49dbe8525f0997b3baff95f7032baf87b70d48edf10b860503d96afadf97b2a5564be040c30e35bce230e33ee09613e4898d358c8e136cf9e731fbd65d63697f6f32c80657f9a515ddbdf1b70374d1476226afb9a90d6cdd63d8c1ad852c8ea9f57acdf6a692dcb38e579883f459bd888659c6fc512b9c72c92beb26bb9c93e63f5ee2125cc7e388c71286eb5d2ad78d0dc1f418eb224a39d49954da2fb595637ea71e229d0c0bb58a12c632a3773dc7ca414802559de9fe39d5cb2e6e4203fc206475593aa1689dc9e971fea78bc39eca24824a37eb18f885e4a064c7f420d5ffed495e30c48a360081b657c83b1436f5aa41f790d8a5df401a6d7ab6ab386d1caefa0929ebd802ba6c5f7adda1a7e208f9d4dd45259c81f6a60aec4e4d56f9985ce54acbb040d3545388d098b9c367140f3b02979a24cae7b13e3f445dd65495204e45743d4cc6f21399d05b5a93bcac41f3cce9d2601a477a0358719a8ea928bc674c751e50fb63195c60f88430d04996b9e3127c86b855d205eb974ebb7d9b9a5cfe394ace5a1662a0b5be359a2e6abbc444088106a885b263ea4873b968a90d95f785383e6ee42dd84acea260b2303a10a39303283503be293f8bbff1cb54ce8b28226c2e067fe1fe86c2347aa634185af389dc09d22479a4220145849cb944d56719d9cbde25dae1a5620c13c252c9a48c9cf56d4330905c875127e28963054df27f0f0f2b8e71c8d1bfa1380995224718e1a8910f393dceb48d7ad42622fcb422b12b8a5212d530e5b45e60d149ed9b852e7ab9e6d6a45517092a4d294029ad768eda6e0b1abab19ada311690d90b107edfeae776daad801aaf762066b682c07e10fb91e8e9fa6e9f9201421e203b08a0a586406dc93539951b8da5508b00599f0650a4451e947bceeab2a0519d27b96918d30766611ebfd25c83d2302efafa3db8c210672896521faa7fb2ebdeaa042babdd5de07221bdc6b811e29a643edd2846c21f781d9f69b73a8d3b70d3cc3c1ff717b77f27d8173ed0a82242dece63177e363991bad468844cd88a4f6cd8ce44280d67fd10abb409e1e3c7147957045dc46d6373c0696c7850cc1b4f18b85c52dc20e4c152f60c9df72df3f2ecd2f443057db7b713ce5d3631180946ec49723581da9ab8d4cfe2f5874a7ffa4c6c6f60f9dd541077f5dc2f41d2e961bc8dc425e956c64c8a61da4e4d30cc62f98cb5d5b3c1ea7ba444d642e6a696944e3147aea47a4da064599944ecafbd3e9dcf87f52cb28f0ffadd6a66e9ec6619fb07d8eba97ed6abd25dad2bbe295ab2c9b5a65f05ae88c22c1b681611a87fb4cbcde5e9cfe9cc339d95afee728df0626189cf7ff0d585023d41144bfb070434f81f1414c5ad0ce409663aebfa9fe4d92812dc08980445b4778eb0ed26d96c913a61c16a25afcae786c9f2dec0f7dc2d274e70dba3f1f8be944a2918fa6dacbd78104f82d7a6a30b56049da96395003b6871ede0ebf96bbe7a4d3b1d3352e4dd343405cb34762255ebd1f51815d70ee103bfee711b0427dff81ddea967e9b690e6402bd8f352af5ec75970d142cdb2cfdcee3d8752c052f8c4ca4cd6566277c512f2b66ef64140bd2cae3c949a8aa84f489cbe1a97f86cab873bc163d2179acbd0f54726f71299a8925822ab5a00b6181688fef50fae1bdf83860f439cdaa41f21cac4281fd655354f647bd33efa816705e389db6088a702ab49918f72eea4cc2c722e9648fec210b2a525650faa0d629c2aedd8835bb624362bddd006d17c8e5fa597cc9d044ceccdaa3bf72c7943327f5fc2185bf1604a2c5504619d477d5f826597ff8745fa752797514835084d116ef89c88b45895db0734cd698d3e2adfcebdce2ab6d7e9cddabbeef9129a397e4cecc158a08d7947b1eb8d942aae1b7b218c1383b33c8890d5094cb57956903d7cb4e2fc4076a43d9acc6086b3835271faedd74473e0729f262ee53ee227e60ac846962cf2d1d0330b1ccca2c75a6b4048067e52c23d3a54d15ed746a47b9ee01828223e04df50db23ab65599300af110e39a5aa368a394a47067de3d25f514c964304c07d1b89abcd9f1b66746c79941e93a4c443cb9819b41d1f294e11e8f9b13245e2c707433a5e36ad01c42bad6e876303eee8d228dd4a1524d47cd4074f364b244de5343609251f8644c07cebbd3e53433937bf579416368b6fde8aa4e2797e67a65a811c268e0a37f04b2584815866803844900e07f54204d8c159a20ab3650d2032a583c03a01244538cd530191c0e59e972529d20fddf154cbb40284de8f034322b41c1443dcdaab5a03c5b7830426a88a8bbbb20abfce1e2c4451494edfa0a10209d043ce8e97b4c7edb6d56808b89ab4cb88feebe6a370dc397b4fa743c5449272f2587c1bb6a3f3be622d06814b1b1c15c34d9a300d2cc5bcbd90086617136241c8cc0cd22e7d926173dca444f7f5d8811011d583b8f7398038b8d59ee59f933f0a62ea65659086f7ce888fa97c770a06ea73f7b938c87383e31627cbfbb5db718c58465bbd1cd634b2a2b32e5dc0f33d53ea176378332e21d14f4f9e7ee659da24a7418e26d212625744b9c390415b0ebb5c3eac63ce914f7116a9e938a7597e578955c6e5a5e11987d8e497e553a3a77ffe4102349d7d6ad42ff7dc26b3ab670e79bd451c47aac405bb0e1de305eb6e842273e13bfa85bce333c5abb29b7719d08f3650019365092e1c6b25d15789de1bf78cf184cbf8ebeb43e65885902b395025609cfb68f1e1442638a1137b39347d52f98b045fd67842f551f9872bb881cf5ed987b10c330ad671a93c74382761a9ce83093517c75a830ca2d460afd5b457b108fef93d79467e42c5fd61426a712f6cd3c777705a3d62eefb0258ea6a83546d350bc0b461494c784c1490b88f08663d438553d34bb366ca5f8d2f453e793044590640557f004b86e3c310c48c3f1728e8efa3eca47dc7462d4e5297bbcf24b84ef03bf15f60265ac53b3ccc4b8d338dd5360f9d8f684020378b7755b82970eddcc7d7b0d28d3864eede01fe634e5f877e1124ce56ffa044c13731d962a2bd150eae837a603824ffb24611295203227f51acb5cd1142f99c0d266661b0daac6ef3a2f87014840e6b663cf833f64743a83035676160410c44d84f01b7574c4fe4998c5fe17f6604358bd7001911e183ee098fbe6d75dd396cbf5dd240141544d1c20ac46e8e6a42492760ed01819c771da9bba7e59838f2c6411734b1c8eb7ffeb9c17a943ac0433338bde9dbac0d66df770026437f9277097b4d1dec63590c45c3385c815f5c9a224ea691ae38e23d1bfc256dafe6fb2608f66b1db711dc05bf7afe6e220d429f56606a2a0f6d7ab028153c4d9cda05e8525751eab47eacc7b74e29f3553d219079d350e1cc423f53474a9a157d3dcc96916368a105791daee01469343aa4eacbf48517e09c7fce029c72368564795ad9bcc00034afb5f034fdaf6d6bd374f8dddf3d89a8fefee47cecb26ca9d004994da73cc446b4c739caebe8079caf4e3354b0fd99022f3d7d5e9cf7b47d72764d1ca8c71f51c510df94c26b9a83e65f969331bd05c9dd98444dacb224a083bbff60e9e34a47e098352bf26c9d485cd19384f57a81b75e1cd648717de92b6dc4a175feb75e1a597009c8ab12991b3512d291342ed4edbff23aaec73d4fcea7d6d7a5efcb0f0b65f1f444f5d40c873cb15cbfec03cccdee44151efe8e0fa11eb9436b862d9a508c6368a54dc3cf0b60bd806aba09482887800009e37058a9f2872666ac60b6417d39b9b6cde02a0e4a2152ccf446dd7821dd8187a7802096999283e660e236096b343194832afe9e1f058d702ebfc7d241ec3bcd9e472cac2124b5e81c18088c5415dd19c35cf52bf2dd7c00a2b9fcb95aba6e91abf155cbbc09d2d34b9987c612d61c8bb825cc0ec5afaf9258718b272d829f8031a9e38ab340ba0bcd9205e77e34e00b7097bde1a9976aba1fe443ddc5741fa9098023b48cc09f2e3e365adad7ffbed163deb2690ad204d91a55f08c2652da591a85e1d4718570b6d4583475112f29c6c65d6355fd4d2f8295836464d42d1d8b2895ecb7108b728260fdc7d33d90f0ea67e2b482fc6163d2eb48a2735be65f2cfb540f1956c945c9b7a97eae267502611955a45f7fa6ec25f2fc7d246f91000336969df2fdc936e06d41458f8b37023c54675ed2bab829088dd82dcf9598874f420001570207cdf37ba11034739c20910f285a9e875d38167021b7fe10fe3b1f52a3bca5577727a0442b4ccb03e1ac55ffe723ae97e24bc2ce689ff3276f3006966449a35402851594ff2f5cc252963e456a92fbb2db567ec5f955759ec3717cc6e61a59b81793313c891ed265ae69cf10693100b1db7e029528b19293349fe2f13064fa9df118e221cd0586d7625865d0ad22154eff5da880f2a2ccd918ce470bd3eacbd01127ca5f22bb3abf1dd08c83ab5a0b32a8bc1b4135e9c4b27f9198a625505b05fa3175cd7694aac11814fa2c68d46982f7196b58550273fb662d5f4e3a0e3559f59c6e3e0738af519c82f12466674a7a97bc2fe814faf78ff05af34d5e42d55c37096cd1eda318555d745e7fe31c1cc7b5a7e17dfc5fa018ffb84c190ab36c487f50304ce4ebdd30683c0dbcac3c87e4edd3f219938f5f3757ecaa8ff7834920ba151d04b9dbbfffac171d78e1a89ac59c5c817703d7738b224c1f2f607f6dd3cd4c018c805fb0542b347418f58a4f1f40ee7f749120a674a5ed0bfae3199cb60d6e90c7f3cb3db7c026357aaed9583a595f67f3d6c14482f2b24146f382e286bc65d23541f0f3f5c379b2a68c03d1c806849a973be0ced8f463371fc46b0bc0d91e02608236c668f2687fd6c6cc511fbd4a548dd60e979fd12e3361ffb6e9b7f7b90ba855c24e5df8e36136126d2233b58dae7baa9e307b7b679ec67f98f631d5a68f40fb448d290f3ea7e4103dfcfed7de95cded7643ef6ea8f1537fedfeecb2ff38a41956558e2ecd5f67c9db25bf4f2215785a5e2a8e700b988af8fe1fa12869479385f714d8c9183db2fb92a17af92586cd16d848012573c0ce74f01ede08e8b1397542f93649d92ff735f37be5208387f7a91287f04654c3ba2c158ce013fdaa4861fde6e0cb9ed478914d6f1cafe326096d507970068a6fc7098c5ad5341e686a84f81e819dcc0ca1d3925f64d9dff4d07cec9cb0e799e93e455ab424b7b998f4567b1f2a54eeb3f555acc80b4174bbc0e089e026f9c798d28748cc4006fdb3826613bb3f0c88c0fd50a019c4f648a7cfcd71823c6abbb7327d8ea503d6f79292dbbaff2b2bb599536d51c2d42d2b01cd715ccead675ee1ffa99839f6110b1de61a7da092209558771869615a0cb6e0adf17842bf0ef7635b54f1ec5c9346064aa620fbd54da5074f12f88799d7d7c248802fd7c79178d6ad81f253eda676379a143e508a2afecbb41e1a96188f0bc2bcf8186c6055009d1e90a17a373a3c1449d5bb2326a8613022e579f368ef8388f4c893a204241f724992f248ebedd1add57432b89d30ee14b3e344caba7b7f4f04267466551652afaadfdfeef5d68a1ff72f66f2f91542a831425f77de34d8a909bea175fd22b775d15235098e8af1f6472ed8bac55780e4d0e2e8dcea0e89b886c2241b1d87fd049c83a84003ace32bf1916cf7150ee9dcb986e90abe0596a528aaab87aa4cbde51d7de588095713dd3080b8a0bac7d486c953ca7c81e8f05ef52d433807ab4cb94595d0b799741845cb79e19f5ca022f0f356aaa2d751e233c4857606e6e9138e3cd18d94f54c1beb36e0c9e29a7b823f3af826329cc0246edd9adb40a0d603ddb1901fd403b34770999acdd3386c558035a7aa940e40fc389140ee53fddb17135787b9ac22330b7933be4aa3f3e73fc1c06ea09e661d124b7510a7cf7485c9cd62d3c08223972d7ffa3abd83cecd93c6d850ec52c17e085db45e45c0e028efe43f23840d0b94c3b80d1e0a2a00273ebff359ce354f5eb904b17a31aa0b9c07f3dd705f755e7f63fcff617b82ed6e0196b68118e1b72d70f34ad9570c1b76a2c2bf5e1a53399b05613ef509627487ada5482cf77d38577228deef3c72620b637975fff76d542e9253fdaa6fe2253a790239299981eda0a6111ea1081a778d789f8c7832354ab2fde50e4a4e68bf68404e275edb583b80c19e3b6cce43a8e641bd648d49d897bdf25d0381e3b5a9affccfa0abb9018b7025f49340868ea91807fb27c131f75a2dd63b51aebeab58ec6db2630e0455c5c7ba10d4a11ec0d86353bf6c192891aca0391007a69d6036ce4bee1cbbecde987ccee03a3d66964383d53ad56022cdf54bdd85afaf89fd5b4feec2e7f77100320d05aae0bd0e002effbc222fcac91d85a28a461a39159a9914538d18675ff9cb1fa44c682aeb1a35d6210897af78b399f2779cce06c858bd4c7211bdef8a17b0f59d6185d43259a2605a748390bd1d184bb6cdb6d26426aa26dd67246c75489b26a59c24973ab0d540a09d2661db5f9c53e45e3423851ae4b94a2b752f1ff96db87bd5827e5c2bdf24c2700eb048d246d1d4b9eb4c71aca20ad9cf197</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>回忆录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>回忆</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2022寒假“集训”</title>
    <link href="/2022/02/27/memory3/"/>
    <url>/2022/02/27/memory3/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="deca4e0b8cc3aac12e6d2029efeb8ae4f43dbd1e3180575c8a0c9edfb5748541">a3b43ee095fbcd9e91236dad33383d28d5f7a0b6e9d38e84fbf6be72440919677f88149f9a702ec89fa0236bc089d4cf6b2ca3f0b08a2c4b7efae2a5c99d5cb0d54646e8123d54af15936520c0eb80b0357937d0aa527c45e3bed42cd9a224e8eb72ac45625d00176517c9d6ecf5de94cc9c02f4b18b183c224fc8bc7a63e373cc517edd0c371f0187345e3b1c7762f62a054f188c74a3c23fca90e928e87190eadc7d5b7441533b4b2412fa7e1958a43614ff5f594680c7ea95d2457c9b52246cff2792e2e14f8b2447e3a908e08fbedb1c7d2bbb5cc6c321180180868f3be33f10eee9719c2c4fd12761e515276662e3e8ae0fe0e57ea964de6c19764ad145a0a0e7b9fbe2ef334acf5ab8c58b1b0ca0eeb82e68c21f3fc933c5396db06928ff33fe19471e060ce2aec71af438db8d64521e6ebfff7511b3578365daa3f52f2f3968f9d99b319321e79d1af32fcb7fb98bb6a353ac3b29424403d9147ba016be0042bb920e0665d85e1285f68041768090b6bf4f8355603d25c5da7720a6ab769e6f2c31630b42d00ad3ae29b62e6795aa431133e70f36a89a39e04a9430017fcf8190342e62c82eb62e6b1795f6d5505e3b66497357ea6267f5a5d391305e8ba2a2165b2afe82f0b7254ec00978a769c85ec714866154b92761c2820e435160fa3543d0bfc224f800499220cd41cecb78fb8be2cb7eb8e870010ecc4089a8fdf74347284bf8c451116f64c58b5a2532c77e0712bdc1a455e58ba4a7c835f4a49196674a80c5ca4f89711ce09cfd3d8108de9161a7f966a20c12647d79f007a5054f928251e7e076e0d7141c98bc337038ac408972c74d2f5094277b287cbc8993d5e13b2d056a1de9db6ee7598eae7e34f21e7b5b54953be8cb7b1c484c28376f618d2d8c25149979cfaf7dd2ddfd1a329bafeea6b30d080f39a71cdc08ce1132175224aaa1e3bd4fe90462d49fe0ed9ee3693c792954d6def50e27af7a626606a5308550fc4121da76f9861f8b3aeb581926ea33c17448a956dc141f52b72c1ce8fb654281252bb5bf95434d4c5db5fcaca3097cb2aa8f7aabe856c7e9111a77b475616d55d9ba0db3588531454992f318a3da6e981b87a31ea4f0ee913cc1ad6de317ce480661f8f507525ffa16dc111c1aa8b675db6a1a4acfc6d2de43e4d7dd651712522787d3b25aa44362511a05342ec0aed3c930d827d7844a86134cc6f40846202c683c79badb48fed67ec386a02d86dd130e90432fb1cc7fe09d79c6e8f09c226be76f875e4857ca4b468b7676e8f06aa95c0775fd190884c798b1fe3f5e9c9168000d3e422b8b2014ba6bbaa085da9d0f2a9c51a3e5d8f297e1c16a7ed10586ef46ca5fbdc0f66fa2f825fca8ccea793e4fdc2f4495d9511dd5a9156d94516216dc963d3ce15a6e3d1e47ffa9141e52565c52ded1af3fe109ec8e3b95af89c908f4402509705f336789341127fe3ab3d12db32c6c9755cbcde92fce4cdbc517b491bd55ba53fbb967e95654af9dde3eb4c95940d39d75adefbef61c04d010fe452932dc6c47a31cd03e1a694ce8b86acd0cc4ca31ea1b73cb857bff4c9bfa6ea532b3ca45b7095651ff03b1c7e6b42cc1f499fc14833e2962c768523a5aabe946a78c38a4fffcacdba92bb3763c31d4597b7a43f41ea066a20ff93055a19ce1ddda838cf4b55e454da8b2131ee7fc963da5b16613d1bbc9872723a82b6b6929245811a7b42d67cb80ae8db0fbcbd40a8fdc9524faad4260d0b11b639f874889d9ab60d5d63a70ba60780ed5fee1fc059c7e9403255a30f8f0d4abd3f968b5d60541004e935d9aa1532506215b0eebffbca28445a0a056b27e32be87342b7ad6bb194f22b860ddfdfe5437b19606118b9fc4fbf3e61b35e8f7fcc89d852742bab626e685f0cb22fbfd43fc036b001d0ebe8cde397d46d2ae0ad1b03f6041609dda76e5434b544b6be31670590271cb4ad6d6cccb6e0bb248c51c8f8d661be02ae597bbd0dc6f5158dd5dbfd5baac6debeff43b1b1a4773713054075fe67ebd6cd581187848b004bdf619ac8f5ff45f55a977df31cc1572f6d3bdfff14c9762d1d42025e4269eddc83b0120c4ca3c912abf42515c31114cc75852767552ee8f67f08cb9e771ecc5f24b20240eb40d6326bdc7dd228aa101f1ce5fb63efbe25c7deee13fa41017bf79fdb723b48c8dcf3e4849bb2b22daa4d759022bc73cb344995039ea3fc5e448630157e4adc4fac02d8b623af25196d0f12b26bf2fd7f6fdc5a95740f8c55ead60214400bbf3b44a6238d87dab1184dc15e821d10e596e89c607a1883ca365be2a650b223d10434ab4d2d58e092aa41a34bc2e028b9104b22b8e7a71df46265b3e0728e0989fddcdd746c44c2f6bb4800076b06bc6ab78e4e65e2fe04a3a7345766fb5eb60f2d29c140f971b942325f0e74e5b3bb1a63cbee12b6ae6dc7cad619c17adff046f196aabce96406a7395f881baf755c1932915c0c18f6d55518e8c806f35a83007f936e674600b667066670022b76b13b3efac45dc661f82b74ecd519343732c4733aa79bef0505a0178f880b705759d455969a3464be151b0137e9e4a259689dc00b93811e5ba72a680a447abd6fa31864657b57acd49e21130c4e5188a0da65e8f6b1299fa0c8c9dd7764583da5c9ddfa1627f36ece3c7e1f437b97a79a86063fcae7b8cbb25cba0bdff8295d9c93e7663d85d52a33242ee4041ef27e44c5adb6450f15d9d908db1cc3d95f546d2b56163e991ca3fd4d019e57e6df4f3cb9fe0e4758602fa239358f9042a243482a445eea76aa158c8644e8de2c23ac5a3cebfe43c320b861484b8c5dd875fd25c8f44cb6025de15debe43cd09f8b0f323dec066a26cb31c343d7ecff20f692a70d554cefc830401176db9988e424c50ce2ce42435717c9f8a4169b07be1868816f5d706675d7785b17aa4393b1ac67ccd955d92d9ea5072c2947d3b8458dd68153ede02b5cb50a0279b5166666cd86747928a4420c7e086ce8b7ad63c36de2121271f071e9b9841b7eb624c10bb5f6597aa682dac7568dea9d2ed011cfeedbb47f1e9fae3ea6d9d57b40055b947d431cb56eeb9b6e27b6bd368575fbae1a639d3b4e7c89d41933f6deac8cd2ea5f2738e76ebb8100fbefb7786b32307d44208797792d736bccff6576f70fd275c5ec825f48170632e494c1e80d23ee692b46a75ed17477b0a065aa34ea75090188e874654930756b055f498a9f0f4186013934e9d59ee986c29f8ea658ccf75a8f5569313fcaf34683048ac55f44f878425c7d3034b4327ee35ac5ffb55dd1e99a226e6f07a0dfb32d5b739ff5283542a5a4d4297c1bd1dae370e7a8d978468e4702bd8b17f2cd18953102349c9d1ddcee81403d2859aeb4bb2efd05ffae98dfd8cd613111413385a9f9e30fa02e998a57a439ee563aebd2051a3ce89bcf720a0d19ffb650cbfcb8bdb2c73e3c970deb57d8e78855901f042a80c555a492daea9b3a52f8faa4cb6c3e5789908c83431cf57309a28e7e7817eb342e3942d86de5df369e3aed2713c2afc11101b789d0698408ed2e92e634b6c36bf96ddd9439fb840c879052683580ab0b43cdd700b522221f461116c9388553ad4ee7ff496bea06d6fb8e13a55d8843df91a1ff8737b673bf162d4217e1673a564dfd408c04b95132610bf2a74cd0927d9b8377d0a62387f0fad48bda0ce1b4e3440fa60df09ba605df4ba8433693b8e974be3ba8136d8b51d48e2ac4b719d06fd55b51d0f216616540a3315ae15a554fe966a97aa3b19793a1697d4be801a9b21e88730062beaf85ad464734ec08c7ea18f155d2b3577a98057cc15301af0c193a072e2df3e1e79b8b072b926ad4d84355792f9e6c89647b532b7c15b3d9ccd26327e42207251d586942de38c6c7a769cf0eb7764041bb18ba682041cd88ff9b08949d02e662dff0ef70b2978882e7b0f7445d9b3edf483fc85f06e25fb34607529fd9467a1f7d03100f2475d921e820d2121237b7eec60e335328b82564f78835014dcab11ef255a3654eb5c393d3d2f5bc23d3f1fb50117119318e9725d8f6d4e8ef32c3b55263005a1dc5832e042a0c979d239371987b9a4dc5531d3ad2ab97e7c702265c7922ade79af4f0651643778ddf7266b15093f4f8595330d2137c4faef25ca425b0523585ac32b6ceea505393e32df7262de933cae978274bf7bceac2e7e8bb572de6d51be1e3532f172f72b6e38ae1c930332c196fb3db774c2a379a45077120e98c1889691ea531f297d5edb4be3263e01e94464d08b794bb9cdd0b53aa9104c430318ad49e9080e82ba5e2b39a9663e6781d29b01cdfb994dc300aa6fa73c972428d4776e19103aad6a7abb4626e4bf7d5b41acaa069207af4d5d3151a0397b465b5a96749fa4114aca185821365196f93b1d891d2cd96bacbdb4c190e197ed6351b7afa9e0a65683ab62a491b9db64e2d1adfecdb7362372f50c8dd2f5f1b4e3c0ac1e7ab60f49dfa88dd62875636c953561b7c3ec8a8ce3a1e08732ad24e5033cb416d6b3e3772a9d1d6feae4d1417b673e589c3264e195bc3ef47494eb614e15d15485626f5277d62c3757c8aee8d51b0c5629fb67459bfa91e0213f8805fe4e0920e5327fa5b071ab60c765510724805ae2537eef43950af9029e65abc2b8c46d29ad969ce46e9e9c8a743380396bc831a0a3e32ddee9f33232017352e98e7694b6a5926ec72536e123025fac75d21fc70868a36ca396ebdc389e4b66cf9d4ec9ae1c333744dc00b2a9e1ba43678367095b2ff14d2f8e3a5ea4cc14d50cca82fe2c515e3755a061cc96fa688e2f2adab3582c99d359fbde337345044af1ec366978a7b033d0b230fe14a99701ed1ac4e8695c47480ad85d515ce8f19b8f8d6c3961d801b57544908f5f0d098938deedc537ac89e447ba450683cbad1e367f92c92e45d4425eddd0f3759bcb76bf2931b34fe6675efe3e33b439362c4931b3611923a3df271aaf9953717ca6d5beebcb70adcb6b4277a3870de257a94dda4185910ce5c8ec190e8b227f7d00403e7074558b42c79dc08dacb2048f5ff4fd3ec0fc6f40841d40cb635cb983dd90f7afe3382c862c62c4550a1cec9af23525fd3177725de52110f4aca9ca30f66fefae985333970c3ad2b67ca3a90bc2fa33a548bc68913d4b40aa8c0cd68b7cdbaf54ff37dfaeef47955316f027591df4b828becb99db16dc624f0c0706bf77a55b78ef14385a1c89974eba5e7abb96f269a90cf850b1d4106abe9b3eef4d9b25114f54fb052b89486df9dcb602f070d031b829fc3c1eda780589485ca810fa73165ced66b3cb3f71e6f1b399c29b1ab712b71a694849fccfcc55f42ffebdfac9e7b688f739d7bf2265edf61f1fca8fb3ea6e3bb565551c8be8a6829cf4fa04a84bd4211d4f9ef74c012247acb0ffb51192779da53fe181aaec9d96de952cd1f10d16d72e9227ff379be76c5491a65f85e271cb5dbdb2d9eb14b89626397b5c66a285353326e93e0b5571c135fd83a27cd422df3685ad9a6e32b789eff14ea804dc4182611ae09f3d420a7759ad7798746340394f0d772111a4dbc588253ca243be876f67180040d620d621e29f8bc9f5978b4bfaa0fca890b8ad252f85735fda0672226995c36a45408118f6127c9d880841526c965a8c3b11bb7e12038552180a8754fba1c385f3ed9c24df4e0cbc6e127397d4f2744d30268de1e399bed25ead17aa76d9dd86f35d3d9501e3a3c0ba89b24fa56c155c76f7acd48c581192b9abeb07f745d12ec666e51a81c2c841ae3c6d3ea8bd14736a73ff039178821bc153db005abb6f66f69c77a4ac9d327b684f2a92c01c8fdafd3dd0f945d9c0a99b696019642422163534d46a6a0755072013fdbb930aa3dc341af8356f12aabd2756e80913825248d94a482603ba5e4c02c33d7bceed41dd26e854c72adadb1f4550cc42ffe06364adaf85d53b3a7f35dbe0676285f655fbb93ee5a4a039905e69c1688e2db04b2d785bca2d9e5e388d54d52f57fba6f408d0bfaabd9c31f035a0a32ddbd1a20c2baab14b4bf253f9e8b719ddf31a7055f8f88eef071378a7c8516ae843e226710f7a36a53db319c43d8413b44534531777024ff4d254a49e9aa1d1e5dc8fd2e81afdd0f2b3a26c87f6abeb25bc48b455de50867d1a0971ab2b44ad1bebee01dde21ebc1b4af39c89c854db4c0e4d393148733c1d36a0400f5e54d80fcfc60741730f74cf0f53afa803632ca8b91ea193001c48e01f7b0f6d64002be608547e97535c37184cd94d955f8398fc92bfe9ddae93f3fbaa0d06aaa48c8da75c5a6ccdc8ebb7135540d7921fa8b6f8db5522bb3ef8bfc7a2fcb1a912ad9f2be09b6bf241f77e9dd0dd1b5088ec26fcae5973007315328c00de58ff3f99260d090ecd5572fa6b58101403aa0146e62d5048b0ba3e9cb02800e5b28e5f4f8e68310bda758dbe046f28a03e44262734deda029ceb6a6c1247b4499c8df152f76b3746858b650b11f6f5bb81e646feb6c3802443e7841e4e2ea544215f48da0307624e7133843e46ec1a240754088e91c2c72f334c9c280c5bb67dda0a0a0a4697a0441b0d9fd8a7364e3c1adeed0aca23926046c55d5b6edc1172f2ce567cb21835ad40e12d43d65ea7978bc3017d218e20adad83d33882db4ddac1e8880f49570259653edc0bc37181e122c9d980b66fd000a7b18cd565798787f3cf59b6d8001e1cd0f0f4a8a0d3e92a7a80a451d1b7422fb95aada7b6b933948bccd0705ce41e4ad0465dbb6e3cc1e50acd1ea9ff66d136a3ba2c7de8eb7e7facf980217d970a90fb8c56797c2bd1995f4d23f179f4694234f6b9e2ecb5cd255cbb3f5edd0964e16cbb7ec6bb6fd72e1fc5e83d8039406a85b59ffac19bf7fbe135b8facb5d5facb13cad043729c9d8a2a55b383b7a18102a23dcc2c797b0e80272f034559824f3ead2fa699b3f906167e72a317aa30e0726820c5623a6da7e70f9e729b5fc619b03df3aa6f849eb40f79c0aa299cfb7f909aff85327fa305cbadc521d56df62b17366f216099f42f1291c283f1c47b152b1ba03be3450ef8ee31ca878abc45db97147e0d51219e6d81cb1ba6e3acb25c9fa62224493079bb7248069b91ef9b32555afe9d4e109b4feae3b1311b252e44eee2ecba94860ad66cec88e2fe2aab76a07f07363a8c476afeb24039866908adc08a0c194a9eec44ffcac48b4e01814778ea8ee842a920877aed5692cb8f29fb6b57ef3a14c9c984a12155c2d8da662140978e74fe740972618d7d9e427b507e56da4605ff0883ccae8fd91a95b83ef9da4923111468e9d181a415db195ba75777f5478fa8fe0d4c9c1fec7be440a79f40647a2c33497468a7a2d56f44feba5af2d8717d9e2f0eb81f54ec6867f370c3bf10a273d3240a2f4324bbe52f755cf0648b736fcc79f2215745ea21871a9bc63204f91f471c6de76e7a50837cc6067b56c91355633dd80a0834304fbffd217c7d8adc8252e39d61d1025e090ba26e77a40a03155b0d728baa4a05a684ef0258c19f488676d583bc752f8261b607c2b3c1c22b4447fe48b1c5b0701d5bf91b4daf82509333e1c5bbb7fde4c3382ed7fb201df4e059f83f2035c4cb236f92ebfacc371f6b409b08476f91f669903860164b4b56065fca28c21697936e69fd6406576b4965eeb834a8854bab7f6419cdafe3d96dca33092d9b8feb09ccd698ed7bfea7258ee20f3279b2ebd5f0557332c339628dcaaaedadd3a4b04b57a78446ccf6a7f4f4c81aa3566b0d2994c39216a5c35398802875579e6699488e9afcefb74e3b50b5e61869a20d0dbe40edc36e01852543afe065f63183b652135bf6eb0accea8d290b362d89674519e1a44ad1cd0773e475b6c9fa9b95f51882b15cd053973f6574033776df89ca95b48ce1a410ebcd65b1b7321d79aed908734194889e1adf210fb81a2a100028175a4216530a02e0a919ce2026ec2ab21b455e84c59e4618ba9c371dc8e0241644884a8e6e2bb27fef366fdd5bb035aa0bfaf4e473b6effd966f416118edf620ad48617fa3f596df3726d79bb0ff868b9163697550bf65c2e10b0ccb5c024e9ead8b93764581116074e615ec265eb829b3674651b41450b79e49df60a48a0ec96d6e8aa32b86fe6d118167c5e3b2233d7beb7540bc3a3b3dc0110cf53786f87e6c225987ea29f37c027e4f1187638d286428518d45741a669e5ce0262e9ff3d2a4a80728bd6cba113daa40018ded0cef22aacdc1ebb4b44347bf6444b568c72c32e0aa4d68bba03ec16025f47b041ba68a35626989fe21ee39d307b288f331fc4ccc090a06da8b1ff61c309309c29cc5ce6d7c39986911855dd6f2f9d609f49e5503e0ad465b20b42c67dafc224f57a678a0763d385ab444d262a575597eacedb0b69c4deb8a68f07cc19f8423798bf46fb543812c98b3aba857d58e40128a43f98160dd0896b150265b0a3068d21c78182f04579102bd5f0ca9f4b7de5b3edb647fdec5ecffc01b19128939a71d77b8e5b52ea5c771533c79a1c403106be6f9cfae51e7fd0ad8bd633098d589e860d026f0eb3fa389752dcd3e3de00b5ecc55961735bc176a359de4f5c6c5607edb3a966ff5a665b0ea2f47b01eca00c124c45c3597e6e0c0ae0517cce644c73f0d2ac2c06813bc3ed142f4882ea4532582fcb0517890bb6f102b5aa218cd7d47ba95f23e66b832d532ef818308c728e2703a521afa07eeee11fe0d55c4a5d99cd794d2ba503dd5f97357bae069ae6f21219b50ecd788c2789c21980c587be5bbc102a795d1cf392b6be272904def98d152a7b36537412567c2b4cc59424a194d679e970552d6b3dca3bd72d6684cc1e7d90d1c27c1e4abbedaaab493c1a4f4de1c2262cece3efb2bd8149de2a2608fede74b8e95b418b7236d64e24e63cabee32b42954ea5083cc3b4661009e69283553a77a40f08782b8921f390a18fe5ae13df9f0a49b832e200d881fc11a382bfcd4e1e7514aeef7d6de96741675d4a88a60bdf2d376658875bd87cd736e4a3d4e3cf6ccbe86b4927da7619d222d2bb550ee1b4809717d311e9899bf24fda11b4c41606fad80d56d8bbfba8bff7cdf0a4f2ce0f52d09921f6215f4f9ed6b8604a22abcd3c987a2bc774a1bffb95f8e7afe39bed03109ff75a2b5c334f61dff173133c71d84621595f451b326629427fbe323efbb0b6811ab060357efcf922219e75e0e1ca07f3133e756a8e089b29004a07c8266de1579821457552964cd163f509ff9cab18146f48d2c31b04f8ba7b6f119f50c4753b3071c3a131dfb2cdff56e8a0098ec5abce103cb0736ebb2f22fc9c31c7ecc49a9ec75d6f9924b3e5b2108ab90cddab6f28f450b7fbe37dc1fcba20591b2dc20104c513ebfb33d2fdf1e28939db4f2f798aabd00c3389d64fc08bc3fdcc73fd22297c94d31472b919701ba8fb5d91048ea40e53333c38675f9f14b1a8a9b867409a013ad53182ecec6d1757d17eff546d9934ff5c78fd0cfe428904d865798e2479cd97613050556b4e1daa21179413b1bfae70b863f89a8450fa593260d45a9f951f378160e362880d5c33956e520e495498c24f932058b3bbb1415d866e48eb87d814d7a2ccc04a463381f58615ee3253c73b01f2c1e27ca515c192f44653ee29105c4a6b37f174fa908a83b1825514795db57d2fea7167bc980c732fc484fc6c0c9a3d18a6ea1d7045af1fd0b370620058fbbb8ea59bbf9d9a8ca43c558bfbbb03d3547aeaa6eb730b0be6d5181197488f955fdb3531709846bca390a0aefed2eab122cf23320831e776255241dba9fd0866083e67f84b0c709596746fb5a0a28ba6f99ce641846acfd98d1d8f9338f5a4964485980377abe6f0540526e91a20e47162bdf52518a36f73edc7a4a06ff5a475f9ef3aed8eacbf06e864cdabe3f3890da73ebe2cfcdab9cedc1cde34c2312226a73da85c4beb543f091a5123823f55ba53bf6a510dfe1ec59e3020d818f2de425b7a30a8c3eb74fdc1944686ff1f2f465a804d5318c5db192398b703708a1eea9d10eab1a24f4094bdf8f9e019acadbc30bb54dbf2d7b28e205c23f19695c9f9ee241069f24b32e9045a55ed1939e3741505531943a8530dcf13a6e9e1e3bd4df08f7943de9cfb2d413fa223217aea0d63a6db4676bb31c5d371c17faeb8f56c5a33d70597148749922387c01a6d71cbbbe1761118df2f483a2969d4d34805793d33b1bcbd9604d0cf9696821c7e85f4cfd416876b234fe0952df5abc077d41618c7c83ec0fd3f0b2cff9720fc370e5babb90bedabfff9fe950415b9908c9fad2ca455a701b97ad49fa44989a232cb000bf17d9bc4633d5e42363c8c46ef06e0548964a2a73832132b2259fdce643b8c55fa13ca7e64235833828e1260280898893a9a5bb78d35c00cb0c32eb713306b342f7f3b3567425afb34f1aa851155ca49bf9b0a78dfd81c3126715245b8426cca68116d90c5a221f7bbaca07e39fdcc5555a1bae23714644745551323ae2cc47c654e94746fe373e79ff6434ed8be399dc3993e0aad2dd4ed09bdce853642db5b407a10b2781c23e3585fc3c29a5dcf51cc0a8dd0d29f14ff9147d4ee70d8201c64902d938fb4cbacc4382e049b30fde827cc79648268514f0ae607e3e9f90c048425fec5cf2b3903be6c88aea058f42fda67565aa8d0151a7832a65409434841ba7e714f20cef3aeb2c87c1e56c8892f2d908fed7bbc3219b47f34f2dd415f4f1282672c62bc9c04cece8555218d1451d4f332f5da43fc64e0e9443bf4264d040dc18e5c58640cd9c0e1d1d21dfe49deb3136ffdcf299714019965142b234c10018c685bb3347db1fcf3df2bc527889a26c95647adc6ca9c98f20c32723e6f0e375cb81b9a3785ff9a2315674bda1c34582978de26b18e903a513de5c6186cae638eb26bd1d83927cd5c671685f7788f7e04bc099f51dc9052e55b0fa42609bceaa4ef0d3a383243b3cbd1427743dbbf314798392538aa8bf997b06273d5a4a1188493dc7c6e740eb30b5a83280240a07f671a8b01738dc05754d1d1450073d9404a710f7e60a98d3fe759bdd56a0e4f3f67d2dd1f8eaebe2b4dc81c99f30c3ad0da8030cdb40b4e802962c9f30b08473209749fb26af9e1b1f460d13b6ce782be643e1fdd5b81706426460c54ad488424fd4950be62892c7c2d30f13e190a885c4a6f66763d4a374499f69b83d2d9dbf3090ea7fda00fcd83a6f9c2a31c477f6accc5230a73c635b749154738727170f6f931519118b96ead7cca02f545c8c129603475e98905def3e4b1c1460107c0d71856ae4e8ed36ef6b908d7b0837f63ae39f1e5298adb0a40e2aaa5c1e588ae7bff486fe91752e27044e1cc31d3efa4ff3b27713ed13b60c91f0b910659a4ac613323d5d53976318eb92f0d173fadc4b3d58b5103027372c771241059c59e3277b691c52242f7d5085a06c01c2aa01c4174781fe54c5892037ac1a0831700170915201fc56ab4bab9c3ac0fdfd3572834bd4668c67e81a36708be654af6ac1b883fe2516ad7e0d34e9ddd594599403d43b5f75d963d87c208501ef2e3903529a0c58887de2e888e2617c57329150fd0bffd14c3f0e501d8fd327a2c2af4a39a40616e0252c6855c599163cb1a627394e7abbe7b2bc3893172e5993fb915a2d82f34292c3bf68de555d8f9be714146ab2eb7c7b5d2ae34ae460324710152303d1e3eb5c9ded5e933b0dd13ead22e224ac5fc66813c1b14d050c4fee5b8acf703c1d7d6edb7c5aef8bc92ef9f7cde7f37dbd137dd0c98be66145d415fd2a0536e5dd1a63fe25720a16486999093b25618ab289f2a84967eb1e615e1b827800bd8dae8d89bda608a083c660132ec0e7ac016175518910c52af6a4624b3035a8efa0a207c84259de2e83588dea9d475849dc2c4037c9aa5ed14e7e79f9593891f1930171f28d4a67c0f4162bbbad99cff1468f3871809c78622b15e78379d3ccfbdc06212d6d07c761d5e3c56280602103ead48aea0b604bf2c368cad0e96071ab59099979a24316820fcb1050f3d1d5019e5570b6fad0526c3e820c13da5e04c4f5b1235c7f664003485ee2aa6cfa08d85dae7fad06bef9772ed4544a912e203f8f714aa908e292e335800d4d6834943b896d6231ab92f9e9d089a6a185ae14caef424082070ffa556dce86ba583c45a380975008d27f83b37e299bc649cbd0c8d2d91faaa5d3d34435e2b01adc54719488221507582abe18034008766c56f75298f58240adc7b98b95f4e2f58e9bb1d1b9a488b44cf4e92043381569d9902a42e02767899317011a0c57a7c13200ba42152e9d57531110f032d5995b53d05c80bdc1b66f0edacdfadcb93362881c8de3e1bcd697ae93ae5ec6d92d5c4f3c3bc30e9794f71e90c8bfe173a561160f2b3409a36985f1ca8241ce4a32505d545c377ad83ca7b03cb529e38db3e8660042398c2e5b15510658046c726f3f216680c6874ce8240ce5cc7a5bed352cedab811900b59cfb874919f96bab028f754bb925c5f32450981a01bd45ad540209fa13224d83881514267f12294451f9be9724038f319d2bd340aaeded9b8ac80b56a79c3984b9d27a97800197d555b30094709fff38bd1d8ca07dcafca81f62d794c493888c814ce7cf559abca23fb9084db43f9f0fc23127d9cf87e008fd94dca52334617392947ab89eb6d5a73b8b3de16805652525c3aadf947103bda690be7ea36b72666d4fc15d5dd7448c353bffc5aa8e4e93d713e1a8eb784a89fe9de5bf5706b3768714534acf4a897aa5727f14e5846b17a28524e1aa5f6965b3eb3b7d4585188e1dc40dc7d8b833ffdf5547ff766ad34374a1be77984b09f43d796e6b503cad5e9651e3ea79d30b5dc99236af8b0b842fdbf3ca3f47fa6c279516dc9416f08cf19e171e663b4663137611f622f45aa307a7c406528a51462cb718ae27ed5b355a2381704399cc9b819d0390db8160cda22c005c9aa779aaad9eb8238198867affe8182255f42c2b0003dff40aa032e510ecd8e0e07288921a334788b4aec38efd0d56eb9750248bd5935dd63c9185abe4ce836bb67ac3588a0678659913d01c34fc4e623d24d018e5c72cbb3f175dc5e1cb1d99c6ce1cbf602ab86208106b03923a4fc27926dedb966382eb8a996bb92eddf3acc962d03e1d65f13879d1b71fad21c1316b4558c8dc584ba4bc1ef3d661c8cd19473703302404486c07394860eb20f5c446c25f59f1418c342c2f2dacf3668c4986a6fb5c4c5ca70fa9d4a029826383b0df4ef56afffd5302201e0a13576f8587bf55061518f3edd52691eb3ce4ef2e6faeeffaa9c8f0de3fa0b3ea73ab5c27451b13f703f5638f3601482148e3fc5fbd51bebb2b600b09d3b0dbb3beb164c78c8f205138181db335b2995f8b789999d81e108d3a6cdf5e31c3711e89dbb03d14c32a3bf35611b933fb09657784bd5b7d3b89387aa46dec7bd6799231cb0c3b1735aa146e95ebfa6ceb868dde5a22092cc65ba84ec7355b0572b21a1e9654cf42e269ab1f7e3926cdfc9df92c1840235d8acbfd60e3799801342d385e9d7980f773a605d3e5086f2bed2d7a9c46dbaf233e7d5ae642d0e8b7dab7d2cd312e623361ce41583b496a6de4a570581a53002c11f8a8cac2ab011cb4a4e9646424fb766c21eed0ee44871f206c218343a1f2b5154b012a8f825c5a021aaca06efac10e17baef10ead397105ec188f25ef3bf52102e47176f4cf6478f1dccf80e17b790fda8812fa400e504cea1deeff758aac1adf09e8991c3e0f255b8c57936e963e12b60127392d6e1a3861dc00455a33ec0644b95766162ef58a7d68814c8a48ed0ff7c8e284331e88e671b29b32b0f9cc894ab94c18b7e5de780b4e4560fc6e313d8bf88b3382aa8e8a8c631e0ac12073b722a9a549fabb06624cee447c895c5245865ff3a59769b27f07b2c6a481a81057ed4c58d8d274f3958b9c5ce659487b7abde88d582df318ce375c332dbf6671b326fa63d6e00cacb9e3ca23836fe2f779813f941f3d5e11944fdc33f3c9fff002e4040595e785546f762d54afe8d6de0ac07d99be2142a7d1e67455006bd89eea0a3c4d7b8be269a3b316fc657d10b3b55f86f01bc80938e17f11576be9830726f22cf2aa2643feddc21a195a31332601f983d74c855a88e82a6ccbdfb0cb26c6fd711a26cfb33139ea36d470ed6db60470706a3ccc33c89e4757c62240330acef92fa45fd05a4e1a9b1ae9558d1e2fa3769a5bf3fb3a652dbe34ed10ee3b43d3f1f9c72557c069a2df05b635968b436c130f6a44e656e2d59654e884ec0f0fb51e0dcd085493856befc778174f7e6e0fb6defe92aecd316fd17f50cec0a5387d2f5a868582fd7a6ec10104c486ab1fd5afef5858b66304ab44f4ba424143dd911697180017c221dc48eb67237f7dc8020d174e5b518f38af418573512be407183cb53ddcbb624a83064fbc438bea3ef497560b4a0352fc30cb5ea75f83a6ed7fa97d912645850b2909e5d09f0cc0754207ea50298213bcc98a19e10f07db5861ad4507fa7d01bf0117aab4bd6a121ce6e8a65d6af3ad9f526c2cbd948906e06074788e872eb7123333b25f28473008743d1d10d6775ecd4db780763562d7e3c396ca3572fabd2faaa16430383aad5a974f1d54ad1faa1baab4844bc1330699494ff7d59aca9a233cef6dbd03468bbe251632de23512e26408b73aa930ae86c038a73292c91131fba841c81c2ba3e65e1263e23be71d3094f3a8688b08e0b8c36db5a1ca65f2fc93da79485acd9e97d0333b2d7958815e82ac414e170dd1a450dabd0d7ab4e72fb1b9e49cd3be2713fc509ff3a76103bbb1157a279c471a3c85b487888b9cf6d8b3c2d51e475db0bf6bab9db8a8cee6a7d293b4bde76b19a49dcb5763c60e4a95d90ef9b74670ca566037adf9361ac3fc28493bbe0270e328a07a3150656e6cd93c825d0c36592d0e4cff3a27dad0771df855600856eda8860a3e798f8495d8c79db45ef83c7e7e1389fa90b0e593c0eb4a8b9516c19062098420e61383db82c0a6b91524997ecf52fd599cfece084e136ca22cd5ab293034d5ed9f39915fe12d939980ee6b1f5385892afc5798a2eaecb9c606c78188d1604052d9cdb57908f98663ced5b55c9e882108d134be16f5a618265c3782d024d8f3206b038e71e309fcc241</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>回忆录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>回忆</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>回忆·贰零贰壹</title>
    <link href="/2022/01/31/2021/"/>
    <url>/2022/01/31/2021/</url>
    
    <content type="html"><![CDATA[<h2 id="序"><a href="#序" class="headerlink" title="序"></a>序</h2><p>2021在不经意间就溜走了，退役之后一直有点遗憾当时在信奥的时候只留下了一堆的题解和学习笔记，没有写什么游记，所以打算在2021结束的时候写点东西，留住仅存的一点记忆。</p><h2 id="一月"><a href="#一月" class="headerlink" title="一月"></a>一月</h2><p>刺骨的寒风呼啸着从耳边吹过，我默默地站在明月初升的操场上，我是谁，我在哪？</p><p>由于一时的大意，我在 NOIp 的考场上犯了一个极大的失误，导致我以倒数的成绩留了下来，准备参加省队选拔，那一段时间真的过得挺痛苦的，一边是沉重的知识，一边是省赛失误的痛苦，还记得我当时每天早上6.50去吃饭，因为那时去就不用排队了，可以直接买，然后用五分钟吃完跑回机房考试，FFT，NTT，平衡树，反演等知识大部分都是在那个时间熟练掌握的，当时考试的成绩都还不错，以至于我对即将到来的 WC 充满了希望，当时除了奥赛生和高三的同学，学校里几乎已经没人了，我想，努力了这么半天，总该有点成效了吧。</p><p>怀揣着自信与紧张，我踏入了 WC 的考场，省赛的失误被我牢牢记住，这一次，我没有再出现任何失误，可是，题目我真的不会，即使拼尽全力绞尽脑汁，也只是获得了一个大众分，最终以一个铜牌收尾。</p><p>不过当时考完之后我们一群人聚在一起吃泡面的场景还是挺不戳的，还得知了自己只准备了不到几天的学考还撞大运的全 A 了，也算是寒冷中的一些温暖吧。</p><h2 id="二月"><a href="#二月" class="headerlink" title="二月"></a>二月</h2><p>春节，我的心情还是比较沉闷，一直在想，如果进不了省队会怎么样，我想，我大概会很失望伤心吧，大概要调整很长一段时间吧。于是那个春节，为了避免那种情况的发生，我几乎只在腊月三十的那天晚上休息了一会儿，跨了个年，然后就睡觉了，印象中第二天由于疫情原因并没有拜年，起床之后打了几个电话就又开始学习了。</p><p>现在的我貌似也挺佩服当时我的定力，或许如果前两个月我没有那么拼，结局可能就变了吧。</p><h2 id="三月"><a href="#三月" class="headerlink" title="三月"></a>三月</h2><p>春暖花开，我们开学了。</p><p>省选的战役也正式拉开帷幕，这个月出于某些奇怪的原因（其实是我忘了）和 $Longdie$ 的关系开始变好了，其实那个月大家的关系都比较融洽，后来由于和 $ LC $ 成了同桌，经常一起打一场比赛，或者刷一点水题，有时候 $Rubyonly$ 过来说一句，我给你看一个神仙题，这时候往往有两个结局，要么它真的神仙题，要么就是一个sb题，然而后者居多，经常被 $LC$ 一眼秒掉。$Kaiser_Kell$ 有的时候也会过来交流交流，总之，在静谧和谐的气氛中，省选到来了。</p><h2 id="四月"><a href="#四月" class="headerlink" title="四月"></a>四月</h2><p>临出发前，我们进行了一场十分水的信心赛，好像大家都 $AK$ 了，到了 sjz 之后，那个酒店的环境还是不错的，试了试机，感觉不是很适应 windows 的环境，不过已经到了这一步，也无所谓了吧，和 $Longdie$ 住了一间，为了攒rp晚上睡得都比较早，希望省选没事，省选的过程让人怀念，结局也出乎意料，由于不可抗力，HEOI又进行了一场加试，这大概是省选史上为数不多的加试吧，出于某些原因，不对加试题进行评价。</p><p>还记得考完的时候，为了避免再次出现不可抗力，决定这次用U盘拷贝两份代码，因此大家又等待了半个小时左右，那次确实是挺累的，从上午八点半到晚上七点多，我感觉最后那半个小时真的是度秒如年，出考场的时候，lin老师问day3的事，然后得知他t3推出了式子，而且出来的时候不知道是隔壁机房的谁在楼道里来了句t3挺水的，我当时一片空白，就有点心灰意冷的走了，因为临时加的赛所以也是临时定的晚饭，不过饺子确实好吃/赞，以为晚上可以在宾馆颓一晚上，结果被告知要连夜赶回去…………坐在回程的大巴上，和大家说着退役的事情，真的是十分伤心而又无可奈何，大巴弥漫着伤心的氛围，中途借学弟的手机和我妈打了个电话，讲了一些可能要退役的事。不出所料，第二天零点多才到学校，<del>你见过凌晨零点的hz吗</del>，第二天多睡了半个小时才起，学生会查内务的时候直接以得到年级主任的允许的名义把他们轰走了，略有一些爽，然后和 $Longdie$ 去吃饭，他当时的处境比我差很多，可以看得出来他心情不太好，吃完饭后他说打算回家准备 whk 了，不知道说什么只能安慰了他一下然后就自己去机房了。<br>到了机房之后大家开始用网上的数据测试全省的代码来估分，出乎意料的是，我竟然分数还比较高？更加出乎意料的是，lin老师竟然卡在了省队线上摆动，不过如果加上他第三天的那个结论题，应该问题不大。凯爹的分数好像也并不高，但是和大家的差距也不大，LC 的假做法拿多少分要看数据，我Day3基本没有分，这么一分析，好像hzoi只有$Kaiser_Kell$是稳进队的，那就只能等成绩了。<br><a href="https://suzipei.github.io/2021/04/12/heoi/">关于省选只补充了一些之前没有写的</a><br>现在还记得当时大家在机房焦灼的等待的三天，<del>为了缓解氛围，还经常互奶一下</del>，CCF可以说是咕了又咕，依稀记得当成绩出来的时候，机房里悲喜交加，很多人的退役让我始料不及，是啊，有些人，就要说再见了，而对于我，好消息是进队了，坏消息是$Azusacat$凭借Day3干掉了我于是我就去了 B 队，从那时起，我几乎放弃了保送的希望，毕竟，对于一个 B 队选手来说，保送，还是很难的。出分后的第二天吧，我们就去了北京集训，见到了很多厉害的人，并且遇到了sjzez的同志们，这大概是及其罕见的两个学校一起集训吧，有了HEOI的感觉，在北京集训期间，明显感觉到做的题难度上升了，而且一个题一般要研究很久，一般一天能改完三道题就挺不错了，然后和 $Rubyonly$ 以及 $Kaiser_Kell$ 的良好关系逐渐形成了，<del>一个学地理的同学带着两个方位感并不好的同学在学校里找食堂</del>，不得不承认，他们的食堂确实很不错。</p><h2 id="五月"><a href="#五月" class="headerlink" title="五月"></a>五月</h2><p>回到学校后，过了几天，便踏上了清北营的路（尝到了lin老师亲自烤的肉/se），那是我第一次体会到了竭尽全力而又无能为力的感觉，也是我第一次感受到南方学校的强，某天考完试后，我和两位大佬走在回宾馆的路上，前边貌似是ZJ的几个初中生，其中一个说了句，今天的题<strong>挺简单</strong>，我直接人傻了，晚上和 <del>学弟</del> 学长出去转了一圈。回学校后就开始时不时纠结两个月后的全国赛，万一拿不到银牌怎么办，思索很长时间后，我告诉我，尽力就好。</p><h2 id="六月"><a href="#六月" class="headerlink" title="六月"></a>六月</h2><p>我们迎来了一个高考小假期，不过对于我们来说，其实和正常的生活没有什么不同，高考完我们也就成为了正式的高三，不过唯一和之前不一样的是我们几个人搬到了同一个宿舍，于是愉快的高三生活就开始了，第一天晚上，外边的水管漏水，虽然漏不到我们宿舍，但是，水滴声导致外边的声控灯一直响，我们宿舍简直和白天一样亮，为了好好休息，对，当时晚上基本上都是按时睡觉（，我们把门玻璃用硬纸板全挡上了，这就比晚上还黑。第二天下午正在改题的时候，突然得知被通报了，几个被子没有叠还有一个没被子的，我们觉得这可不行啊，内务不能被通报，于是后来我们每次出宿舍都顺便把门锁上，从此之后再也没被通报过了。</p><p>之后的生活也比较枯燥吧，考试-改题-吃饭-睡觉，偶尔趁机房空着的时候聊会儿天是非常不错的事情。</p><p>后来为了调整状态，安排了 sjzez 集训，<del>深入敌营</del>，第一天到的时候因为是从学校去的所以身上还穿着校服，可以说是回头率极高，然后出去吃了个饭换了个衣服，期间还借到了 $thecold$ 的校服，成功转校了属于是。</p><p>大概半个月的生活终于不那么枯燥了，除了考试外，还安排了几场ACM赛制，成功和zzz贴贴，由于zzz是Au爷所以我每次都是躺赢，sjzez的饭十分好吃/点赞，期间一直都比较和谐，只有最后一天出了点小状况，由于第二天就走了所以前一天大家都走的很早，第二天来了之后发现，<del>钥匙被锁机房里了</del>，最后是lin老师帅气跳窗户解决了问题。</p><p>临走前的那天起的很早，或许是睡不着，马上就走了想满足好奇心去他们存真楼里玩玩，但是没有理由担心进不去，于是想到了二北的四个人住在了上边，然后打算以找他们为借口溜进去转转，然而过程极其简单，<del>我在没人阻拦的情况下大摇大摆的进去了</del>。</p><h2 id="七月"><a href="#七月" class="headerlink" title="七月"></a>七月</h2><p>NOI要到了。</p><p>为了提前适应环境我们打算去镇海集训几天，然后十分不巧的是出发日期和UNR撞上了，于是开了个小号打UNR防止掉分，接着心态就炸了（，一 个 题 都 不 会。</p><p>在镇海的状态也还可以，基本保持每天过一个题的水平吧，我不求超常发挥，正常发挥我就已经满意了。</p><p>值得注意的是台风“烟花”即将登陆，而且风力越来越大，CCF紧急通知，可以自备救生衣，我？不过大部分人都没备，首先不在沿海应该被冲不了，其次真被冲了一个救生衣的作用也不太大，就没管。临近报道前几天，CCF又紧急通知，由于原定报道日烟花登陆，报道提前一天，好在我们已经到了镇海，去余姚挺近的所以没有什么影响。</p><p>报道后第二天原定报道日，一直的消息都是休息没有安排，结果CCF在中午双紧急通知三个小时后考笔试加试机，因为可能明天台风强度会更大。这直接让我无语。</p><p>不过台风的影响确实挺大的，北方人第一次见那么大的雨……而且雨都是<strong>横</strong>着飞的，十分壮观。</p><p><a href="https://suzipei.github.io/2021/08/01/noi/">NOI游记</a></p><h2 id="八月"><a href="#八月" class="headerlink" title="八月"></a>八月</h2><h2 id="九月"><a href="#九月" class="headerlink" title="九月"></a>九月</h2><h2 id="十月"><a href="#十月" class="headerlink" title="十月"></a>十月</h2><h2 id="十一月"><a href="#十一月" class="headerlink" title="十一月"></a>十一月</h2><h2 id="十二月"><a href="#十二月" class="headerlink" title="十二月"></a>十二月</h2><p>利益相关，暂不更新</p><p>二二高考，衡中必胜</p>]]></content>
    
    
    <categories>
      
      <category>回忆录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>回忆</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NOI之后的碎碎念</title>
    <link href="/2021/08/01/noi/"/>
    <url>/2021/08/01/noi/</url>
    
    <content type="html"><![CDATA[<h2 id="序"><a href="#序" class="headerlink" title="序"></a>序</h2><p>本来想在 $NOI$ 之后写回忆录的，但是感觉写了会比较流水账，如果只写 $NOI$ 的游记又感觉少了点，所以就随便写写了，每个板块大概是独立的，不过总体还是按照时间顺序。</p><h2 id="我是怎么进入信息奥赛的"><a href="#我是怎么进入信息奥赛的" class="headerlink" title="我是怎么进入信息奥赛的"></a>我是怎么进入信息奥赛的</h2><p>初中的时候侥幸进入了衡水第一中学，然后又侥幸进入了夏令营，夏令营主要是让我们了解五大学科奥赛，记得当时虎哥（也就是我后来的教练）的宣讲十分给力，让我记忆犹新，当时对编程也十分感兴趣，所以想报信息奥赛，不过家长对奥赛不太感兴趣，不想让我报，最后争取了一下，还是决定试试，在报名的表格上随便填了三个奥赛，忘了除了信息还写了什么。</p><p>开学的时候被通知进入了奥赛班，竞赛生涯从此开始。</p><h2 id="联赛"><a href="#联赛" class="headerlink" title="联赛"></a>联赛</h2><p>由于$$F响应国家政策，NOIP 不收费，所以和往年相比我们还要参加一场 CSP，毕竟是第一次考试，考前还是十分紧张，进入考场后就好多了。</p><p>对于拿到题面时的场景，现在仍然记忆犹新，第一题是一个大模拟！我记得我当时读了很多遍题，来确定我是不是读错了，当时希望读错了题，它是个sb题，但是读了好多遍后，唯一确定的是它真的是大模拟，不过好在我调出来了，很多没有调出来的都挂了，带着过了大样例的兴奋去写第二题，实际上第二题是sb题所以很快就写出来了，但是挂了分，一些细节问题，这一场考试考的还不错，让我增长了许多信心，告诉我简单题不要轻敌，然而我并没有记住，NOIP又犯了致命错误。</p><p>NOIP的分数会被算到省队选拔中，怎么看都比CSP重要，不过并没有CSP时那么紧张，拿到题后第一眼就看出了第一题是sb题，然后很快写完了，很快踩坑了，这个坑直接让我的第一题从 $100$ 变成了 $60$，四十分的差距，当时看来是很大的，第二题很快就会了 $84$ 分的做法，由于正解想了很久也没想到，浪费了很多时间，所以最后两题都没怎么写，这一场是考挂了但是也没彻底考挂，搭上了去省选的末班车，在留下来省选的人中，我的成绩是倒数，压力很大。</p><h2 id="省队选拔"><a href="#省队选拔" class="headerlink" title="省队选拔"></a>省队选拔</h2><p><a href="https://suzipei.github.io/2021/04/12/heoi/">省选游记</a></p><p>NOIP之后，留下来的十几个人备战省选，这一段时间个人感觉是学习效率最高的时间，学会了很多算法，在模拟赛中偶尔也取得比较好的成绩，中间参加了一次冬令营，不过是线上的，而且打了 $Cu$ ，第一题其实很简单但是没想出来，现在想想或许有些遗憾？</p><p>四月到了，省选如期而至，在去省选的路上，我闭着眼想，如果退役了怎么办，大概会很伤心吧，怎么调整呢，大概也不会调整吧，总之就是感觉退役感很强，到了宾馆后也没有怎么疯狂颓，基本按照正常作息。</p><p>省选的第一天考完，我拿到了大概 $194$ 分，之所以说是大概，是因为没有评测，由于zzsz的原因，大家都没有提考试分数的事情，为了避免影响心态，只在回去的路上简单说了几句。</p><p>省选的第二天，我在考场上估分 $245$ ，感觉可以翻盘，那时候才长舒一口气，这一场几乎是没有什么失误，中间的一个小插曲是第一天代码丢了，所以加试了一场，加试的题目异常阴间导致大家的分数都差不多，除了一些大佬。</p><p>省选完的 $n$ 天，出了省选成绩，我进入了省队，既开心又难过，难过的是 $\color{red}Longdie$ 和 $\color{red}Liuchang$ 的退役，不知道怎么安慰他们，只能在心里默默祝愿他们在高考路上披荆斩棘。</p><h2 id="NOI前集训"><a href="#NOI前集训" class="headerlink" title="NOI前集训"></a>NOI前集训</h2><p>进入省队之后，教练认为在自己学校学习的效率很差所以要带我们出去集训，大概经历了两场集训，第一次是去首都师范大学附属中学，第二次是去石家庄二中，实际上恕我直言，在外面的效率不如在学校的效率，更真实的，在哪里效率都不高。。。。</p><p>在石二的时候和石二的省队拉近了关系，这或许是集训的最大收获（？），也意识到了省选完效率不高，所以会去写题解和给别人无偿讲题，可能是因为这些导致 $rp++$ ，颓了这么多国赛还没挂吧。</p><p>省选完后每天的状态大概就是，上午考试，下午改题讲题（×），大部分时间是颓，那段时间也比较开心？</p><p><del>顺便简单看完了几部电视剧</del></p><h2 id="National-Olympiad-in-Informatics"><a href="#National-Olympiad-in-Informatics" class="headerlink" title="National Olympiad in Informatics"></a>National Olympiad in Informatics</h2><p>全国赛最后还是来了，由于台风的影响所以行程飘忽不定，还好我们提前很多天到了浙江，在报道提前一天的情况下也到达了余姚。</p><p>和 $\color{red}pl_er$ 还有 $\color{red}Azusa_cat$ 一间宿舍，体验良好，第一天到了之后和 $\color{red}Azusa_cat$，$\color{red}Rubyonly$，$\color{red}Kaiser_Kell$ 打了半天王者，大概国赛的闲暇时刻不是在打王者就是在打lol，（不颓我也没事情干啊），哦除了背笔试。</p><p>有人说小道消息，笔试可能会提前一天，所以略微有点紧张，因为上午还在颓，下午笔试感觉会很惨，结果下午还真笔试了，中午十二点多接到通知下午笔试，日了狗了，然后就赶紧准备笔试，默念希望笔试没事。</p><p>笔试的时候$$F不讲武德，出了非题库里的考试题，好在有惊无险（都蒙对了），最后笔试成功 $AK$，这大概是唯一可以 $AK$ 的考试了吧，接下来由于有台风所以会有一整天的休息时间，然后就颓颓颓了。</p><p>实际上我是准备复习的，然后上午觉得下午可以复习，下午觉得晚上可以复习，晚上觉得明天，明天就开始考了？？于是开始复习，并且奶了一波不考 LCT，不考矩阵树定理，最后在十一点成功完成了复习计划——看 $\color{red}Liuchang$ 的博客。</p><p>拿到第一试的题目，发现第一题就是一个 LCT 的经典操作，简直是开幕雷击，不过仔细思考发现并不需要 LCT，随便用线段树维护一下就行，然后写了很长时间。。。。</p><p>第二题一眼看出了 $75$ 分做法，然后根据NOIP的经验，此时应该放弃第二题去拿第三题的部分分，当时已经猜到了第二题是把矩阵乘起来做行列式，但是就是没有写，去做第三题了，实际上现在想想如果去写第二题，第三题大概就没有时间写了，所以决策还挺正确的。</p><p>第三题是惊心动魄的一题，看了之后并没有仔细分析，就直接开始写了，决策是写暴力和树的部分分，实际上所有的问题可以转化为树不过并没有仔细想。。。本以为树十分好写可是却发现有很多情况需要分类讨论，并且讨论不是很简单，突然灵机一动，可以将所有点拉出来建虚树，这样直接做暴力即可，此时距离结束还有两个小时，写了有亿点长，到快结束的时候还没有调出来，然后听到了雪中送炭的加时五分钟，本来应该在两点结束的比赛延迟五分钟，此时我刚好发现边权不能直接放到点上，需要把边拆成点，于是赶紧改，最后成功在两点零二分通过了树的大样例，拿到了 $56$ 分。</p><p>之后查分，发现挂了 $20$，仔细一看多测没有读完，？？？？竟然只挂了 $20$ 分。</p><p>两试之间的那一天被我吃了所以没有，实际是颓的太开心了。。。</p><p>第二试的时候一眼就看出了第一题是个人类智慧题所以想了想发现不会就跳过去了，第二题简单想了想发现部分分很可写，第三题想了想发现不会，甚至连暴力分都打不太满，此时考试过去了大概一个半小时，没有任何进展，感觉这场要打挂了，当时应该是一个代码也没有写，直觉告诉我去看第二题，仔细分析一波发现加入字符之后对答案的影响实际上是一个矩阵的形式，只需要维护矩阵即可，套一个平衡树实现就好，但是感觉巨难写，不过此时只会写这个题了，于是决定写其它题的暴力，写第二题的正解，大概两个小时的时候，开始写第二题，没想到这题竟然这么难写，往往写着写着发现还需要加一个细节，考试一点结束，到十二点四十的时候我还在调，我告诉自己五十是最后的期限，五十如果还没调出来就立即停，然后五十的时候确实没有调出来，又是直觉告诉我传参传错了，马上改了一下，发现过了大样例，此时距离考试结束还有五分钟，不过紧张的心情立刻不紧张了，淡定的测了一下时间发现超时了，日了，用了三分钟的时间写了一个矩阵循环展开和快读，很佩服当时的手速，不过发现最大的点还是超时，那就这样吧，检查了一下文件名就结束了，真的，结束了。</p><p>出分之后果不其然超时了，不过拿到的分数也十分可观，看来是稳拿银牌了，也没有很伤心，毕竟在省选完的时候就意识到金牌不太可能了，虽然曾经也有过梦想，但是现实还是太残酷，比我厉害的人有很多，我不得不向后退一步。</p><p>晚上本来想晚睡一会儿，但是太困了所以十一点就睡了，其实也没有心情晚睡，一直在想着赶紧退役，等到真正退役的时候才发现有些难过，闭幕式上领到了奖牌，象征着竞赛生涯的结束，坐在闭幕式的位置上，我坐了很久，一直到虎哥提醒我可以走了，我才离开会场，心情比较压抑，但是也不知道怎么表达出来，或许只有经历过的人才能体会到吧，这种只可意会不可言传的感觉。</p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>不管怎么说，竞赛还是告一段落了，但是目前还是没有拿到约，或许没有学上了？我不是很清楚，反正这一段经历还是很难忘的。</p><p>各位，江湖再见了。</p><h2 id="最后的最后"><a href="#最后的最后" class="headerlink" title="最后的最后"></a>最后的最后</h2><p>感谢 $\color{red}Rubyonly$ 经常找辣鸡毒瘤题问我，让我增长见识</p><p>感谢 $\color{red}SueJane$ 学姐的帮助，让我看到前进的希望</p><p>感谢教练和家长的鼓励与支持</p><h2 id="最后的最后的最后"><a href="#最后的最后的最后" class="headerlink" title="最后的最后的最后"></a>最后的最后的最后</h2><p>已经AFO回归文化课了，不过还是放不下OI，比如在听到逆否命题时会想起2-sat，看到矩形时会想起矩形面积并的扫描线做法，想到数列递推时会想起矩阵快速幂等等，这些影响，或许只能靠时间消磨了。</p>]]></content>
    
    
    <categories>
      
      <category>回忆录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>回忆</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HEOI 退役记</title>
    <link href="/2021/04/12/heoi/"/>
    <url>/2021/04/12/heoi/</url>
    
    <content type="html"><![CDATA[<h2 id="Day-1"><a href="#Day-1" class="headerlink" title="Day-1"></a>Day-1</h2><p>中午要出发，上午还要考试就离谱，不过大家考前都说爆零攒 rp 但是一考试一个比一个猛，坐 $L\color{red}{ongdie}$ 旁边，开场发现 T2 之前见过类似的思路，不过为了攒 rp 没有马上写，看 T1 发现70分挺 sb 的，不过剩下的东西有亿点恶心，读入都是高精，就先写了 70,写完发现 $L\color{red}{ongdie}$  已经开始码 T1 了，而且看上去时间复杂度挺对的，<del>不过最后爆零了</del>，最后在一系列打表找规律等操作下，发现读入可以直接取模，然后暴力做就行了，<del>剩下两题过水直接AK了</del>，rp–。</p><p>下午到了sjzez，试机打算敲一个 ntt 和 fft 对拍，不过由于还要测一些东西导致最后的时间不多了，ntt 打完但是 fft 没写完，rp– ，被拉去开防疫会了，实际上感觉就是给教练说没人搭理他们然后给我们开会好让我们回去吓唬教练，不过全程没怎么听他的。</p><p>开完会貌似还能试机，火速回去打完了 fft ，然后一下就拍上了，rp++，不过感觉对拍速度十分慢，虚拟机还是不大行啊，最后把对拍的输出改成了 HZOI always win，<del>半年没学whk了不知道英语语法对不对</del>。</p><p>回去的路上经过超市买了许多东西，$L\color{red}{ongdie}$ 没带钱所以顺便帮他付了，rp++。</p><p>晚上的盒饭十分不大行，我寻思着一天一百的盒饭就这啊？第二天考试，所以晚上也没干啥就睡觉了。</p><h2 id="Day1"><a href="#Day1" class="headerlink" title="Day1"></a>Day1</h2><p>虽然之前模拟过很多场了但是还是挺慌的，到了 sjzez 之后在大门面前待了一会儿就进去了，感觉时间过的挺快，现在也是，貌似刚刚还在省选，殊不知已经过去了两天。</p><p>进入考场之后管的比较严，不让动键盘鼠标，左边是 sjzez 的 zzz ，再左边是  $L\color{red}{in4xu}$ ，有点慌，不过马上感觉也没啥，反正也看不见他们的屏幕，也不知道他们在干啥。</p><p>开场先看三道题，题面貌似都比较短，很阳间，读一遍题之后感觉 T1 是一个 sb 的二分答案，不过具体实现还要想一想，T2 是一个比较神仙的构造题，T3 是一个图论，看上去更神仙。</p><p>于是决定先写 T1 ，顺序开题，想了想发现如果二分极差的话可以将所有数锁定在一个区间内，而区间的左端点只有 $n$ 种，这样只需要判断一个前缀和一个后缀翻转后是否合法即可，于是直接开始写，大概写了十分钟，此时只过去了半个小时，感觉状态挺不错，<del>然后发现连最小的样例都过不去</del> 。</p><p>慌了一下，不过马上调整然后调代码，发现实际上左端点有 $2n$ 个，改完之后直接过了三个样例，大概看了一眼大样例不是很水的样子，所以没管，去看 T2 了，由于 noip 的劣势导致我省选貌似不得不 AC 一道不是很签到的题才能扳回来，于是并没有选择对拍。</p><p>T2 想了一个小时，这啥啊，这怎么做啊，这完全不会啊，冷静一下发现 $n,m\leq3$ 都不会做，那这不是玩完了。</p><p>又想了半个小时发现 $m=2$ 的情况实际上变量很少，暴力枚举第一个是啥或许可以，不过仔细分析一下时间复杂度还是太高了，尤其是多组数据。</p><p>又仔细分析一波发现可以对于每个变量解一个不等式得到第一个变量的取值范围，然后随便取一个在范围内的貌似就可以，三十分到手，直接开始写。</p><p>很快写完了，自己造了几组感觉没啥问题，又又仔细分析了一波发现这个完全可以套到 $m$ 不是 $2$ 的情况，对行做一遍对列做一遍就能得到边界上每两个相邻元素的取值范围，不过剩下的就不大会了，而且感觉细节特别多，此时已经过去两个半小时，于是决定先去看 T3 ，不知道为啥一看 T3 就觉得十分不可做，虽然潜意识里觉得这样想会出问题，不过当时确实感觉不可做，如果那是一道水题那我必完，所以最好还是避免这种直观上对题目难度的判断。</p><p>基于直观上的判断，本来想直接打 $16$ 分就走人的，但是又感觉 $44$ 分挺好打的<del>实际上是我不会写16</del> ，过了一会儿发现本质上可以考虑每个点的恭喜，一个点会贡献到另一个点当且仅当两点间的路径上的点编号都不小于这个点，所以动态加边就挺对的，大概分析一下是 $O(nm+mn^2)$ 的？反正看上去就挺能过的，很快敲完了然后又<del>过不去样例</del>，调了一会儿发现读错题了，不过问题不大，稍微改了一下就过了，大样例跑 $0.1$ 秒，感觉 $44$ 有了。</p><p>此时距离考试结束还有一个小时，不过对 T2 的想法很成熟，估计可以过，如果能AC的话那我 Day1 244感觉挺稳，于是直接写 T2，不到三十分钟就写完了，一遍过了三个样例，但是样例比较水，打算自己造几个，首先造了几个比较小的，发现都挺对的，<del>woc，我貌似写对了？？？</del>，保守起见随了一组比较大的数据，然后一眼发现不对劲，怎么还有负数啊？</p><p>然后开始疯狂 Dbug，输出后发现边上的数解出的范围都是对的，但是一代入就挂了，什么情况。。。</p><p>最后发现是不能很好的构造一组边角上的数使得它们满足不等式的限制，然后就挂了，由于是一组不等式的形式，所以想了一下差分约束，但我的不等式中有类似 $x_1+x_2\leq a$ 的形式，这咋差分约束啊，不大会，但是 $n,m\leq3$ 好像挺对的，于是此时估分 $ 100+50+44 = 194$，距离考试结束还有十五分钟，打算回去检查代码，剩下的时间也没干啥。</p><p>考完之后离开考场，在楼梯口碰见了$H\color{red}{ISkrrr}$ 和$K\color{red}{aiser_Kell}$ ，然后就一起出去了。</p><p>走出考场碰到老姚，让我们先回宾馆，然后就边走边聊，大概吐槽了一下考试题，而且我还大胆猜测 $L\color{red}{ongdie}$ 和 $L\color{red}{iuchang}$ 有一个人 A 了 T2，所以我就退役了（？），不知道为啥就是直觉，然后就瞎聊了半天，忘了聊啥了。。。。。</p><p>到宿舍之后发现 $L\color{red}{ongdie}$ 还没回来，打算去转一圈，然后他就回来了，一起期待中午的盒饭能吃一点，毕竟是一百的盒饭，后来发现就这啊，还不如泡面。</p><p>下午和 $R\color{red}{ubyonly}$ 玩了一下午，本来说查代码的，但是一直没查，也没太在意（伏笔1）。</p><p>晚上睡觉最开始还是睡不着，就比较困，但是睡不着，不过躺着躺着就睡着了。</p><h2 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h2><p>由于第一天已经考过一次了，所以这次并没有很紧张，坐到位置上后等了一会儿就开始了。</p><p>T1这一眼数据结构题吧，貌似有点线段树维护单调栈的感觉？不过不大会，先放一放。</p><p>T2一眼状压，不过状态不是很会定义，先放一放。</p><p>T3一眼不会，有支配，这不会是支配树吧，不过可能也不是，我没学过也不知道支配树是干啥的啊。</p><p>最后决定先开 T2 ，因为这种状压一般比较好写，但是想了半个小时发现还是只会 $O(n!n)$，而且感觉再想下去可能没有什么进展，有一个差分的思路但是很快假了，决定打完 $O(n!n)$ 就去写 T1 ，打完之后又没过样例，rp–，模拟了一遍甚至以为样例假了，那这把好像不太好整，感觉 T1 和 T2 都有思路但是都整不出来，告诉自己别急，然后开始重新模，发现要求公布的 $b_i$ <strong>单调不降</strong>，于是随便改改就过了，$ 60 $ 应该有了，所以去写 T1 。</p><p>直觉上感觉这个东西只要把链的写法想出来然后扔到树上就能过，所以先想链的写法。</p><p>貌似做法就是直接扫一遍然后如果当前的数是我想要的就++，不过这个数貌似只能扫一遍判断，诶不过要是离散化一下那不就相当与从 $1$ 开始走吗，那就对于每个数只需要找第一个大于它的数，然后往后跳，那倍增一下是不是就 $\log$ 了，诶好像有了。</p><p>在树上首先把路径劈成两半，$x$ 到 $lca$ 可以用向上倍增解决，$lca$ 到 $y$ 咋办，不大会了，貌似也可以倍增但是这次要倒着跳，倒着跳咋跳啊，没有起点？好像可以二分一下，这样就有重点了，貌似也有单调性，那直接写一发吧，考试开始一个小时半A掉Day2的一道题，还不错。</p><p>写完之后发现过不了样例，晕，不过把倍增改成暴力就能过样例，所以应该是细节挂了，然后拍了一个小数据，调了调发现应该把二分边界改一下，然后就过样例了，感觉挺好的，突然想起来如果T2的 $b_i$ 是单调不降的那么我那个差分貌似又真了，于是立刻去写T2的状压，大概两个半小时的时候就写完了，不过时间复杂度好像有点爆炸，$O(2^{13}mn^2)$ ，那个 $n^2$ 看起来就挺假的，突然怀疑能不能跑过最大的数据，顺手剪了几个枝，然后测极限数据，$0.3$ 秒？跑这么不满，那好像没啥事了，又随了几组数据，发现效果还行，此时估分 $194+100+100$，感觉挺高的，但是既然我都过了，$L\color{red}{ongdie}$ 和 $L\color{red}{iuchang}$ 应该也差不多吧，那我还翻个啥盘啊，当时感觉胜利与否在于 T3 拿多少分。</p><p>最开始的暴力都不会打，想想貌似可以删除一个点然后看看一号节点能到那些点，这样做大概就有暴力分了，先写了一发过了样例，此时感觉对于正解仍然没有思路，所以打算把暴力分都拿到，开始写树的，写完之后随了几组数据都挺对的，然后就没管它，此时距离考试结束还有不到一个半小时，感觉希望有些渺茫然后开始算分，$194+100+100+45=439$，好像有点高？那是不是挺稳的？</p><p>想着想着突然发现会不会建出支配树后套上树的做法就能AC，猜测可能是这样，但我不会建支配树啊，没事可以 $n^2$ 建树，然后就自己口胡了一个支配树上去，套上树的做法，竟然一下过了三个样例！</p><p><del>第三个样例看上去就不是很水</del>，于是我AK了？</p><p>现在估分$194+100+100+100=494$，有点起飞的感觉，此时还有大概一个小时左右，为了求稳要去打一下对拍，第一题直接过了对拍，第二题也是，but 。</p><p>第三题拍了几组就挂了，以为是数据造错了然后手模了一下，发现这玩意根本就不对好吧，这大样例咋回事啊，这是什么鬼啊，于是估分 $194+100+100+45=439$，<del>我回来了</del>。</p><p>然后内心骂了半天T3出题人，怎么大样例这么水，希望别有人被坑了，后来想了半天也没想出来怎么解决这个问题，貌似需要访问一遍支配树上的父亲，然后还要统计一些东西？不大会，然后就想不出来了，最后考试结束了。</p><p>老师掏出一个 U 盘，说确定好代码后再走，以为是Day2所以用 U 盘拷走（伏笔2），然后就弄了亿分钟，我退役感言差不多也想好了，最后突然又让教练们进来，不知道那人是谁，开始宣读一张纸，具体读了啥我也忘了，在当时那种情况下，我几乎只听清了关键字——加试，然后我人就傻了，貌似是因为第一天的码由于不可告知的原因没了，所以要补一场考试，下午三点开始，我一看时间现在都快两点了，还没吃饭，一会儿发了盒饭，不过没有心情吃，就吃了一点就睡觉了，桌子还挺硬，所以把校服脱下了垫着（我怀疑这是我现在感冒的原因），我也不知道睡没睡着，很快就开考了。</p><p>一看只有一个不到 $500K$ 的压缩包，怀疑没有大样例，公布密码后确实没有，更 $ NB $ 的是，题面竟然是图片加文字，配个图是什么鬼啊？更更 $NB$ 的是，上边写着 $NOI2011$ 福建省省选，加试整个十年前的题是什么意思啊，不是说备用题吗？？更更更 $NB$ 的是，题面没有编译选项。。。</p><p>开场看题，T1 貌似是一个字符串，T2 是立体几何，这做啥啊，球的表面积都忘了，并且猜测这题 $HE$ 应该都是爆零，所以不打算想了，T3 是一个推式子的，但是递推关系不是常系数，也没啥思路，打算一会儿写个高斯消元看看。</p><p>于是开始写T1，想了半天也没啥思路，先打了一个暴力，然后觉得这样不大行，不过猜测如果是十年前的题是不是数据会水一些，于是打了 SAM 上爆跳父亲更新答案，随机数据跑的很快，三十分应该有了，想了大概两个小时左右还是不会，然后就跳过去了。</p><p>看了一下 T2 ，觉得二十分可以想想，此时感觉下午只要打好暴力就差不多了，想了半天还是不会二十，貌似十分不可做，直接撤了，输出一个 $0$ 就跑路了。</p><p>把希望放在最后的 T3 上边，全文搜索质数，$0$ 个结果，cao，模数不是质数，那暴力分都拿不到？？</p><p>感觉模数不是质数可以扩展卢卡斯，不过是偶数的话就没有逆元了，咋整？推了半天还是没啥思路，根本就推不动，所以只能赌他模数有奇数的情况了，不过是多测啊，那也不能坐着待着吧，所以就用最后一段时间写了一个扩展卢卡斯，退役感爆棚，本来估分 $400+$，现在 $300$ 都不到，听天由命了。</p><p>考完之后又是用 U 盘收，等了半天，很头疼。</p><p>出考场后问了问大家的分数，貌似都不是很高，最高在 $60$ 分左右，不过据说一个学弟 A 了 T1，而且 $L\color{red}{iuchang}$ 打了 $60$ ，算一下貌似会死， $L\color{red}{ongdie}$ 貌似今天考挂了，希望他没事，到了车上和大家聊了聊天就睡觉了，困的要死，到学校已经深夜十二点了，回宿舍就直接睡觉了，第二天晚起了一会儿，挺困的，去了机房后用民间数据测了一下，没有挂分，而且据说我们考的确实是今年的福建省选，而不是 $2011$ 的，<del>那我SAM不是稳挂吗</del>，现在就等出分了。</p><p>update:出分了，不过因为数据锅了好像要重测，然后 $L\color{red}{ongdie}$ 有可能能进，还不太好说，希望他能进。</p>]]></content>
    
    
    <categories>
      
      <category>回忆录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>回忆</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>另一元宵节 线段树</title>
    <link href="/2020/03/08/hzoi0002/"/>
    <url>/2020/03/08/hzoi0002/</url>
    
    <content type="html"><![CDATA[<p><img src="hzoi0002.png"></p><p>其实最开始这个题我没做出来是因为我不知道&amp;是啥意思，我以为是加和</p><span id="more"></span><p>这个题的意思其实就是让构建一个数组，使它的某个区间按位与的和为一个数，看看会不会产生矛盾。</p><p>知道这一点后就好办了，新建一个为0的数组，每次查询就 | 一下，然后查询区间按位与的和，看看符不符合]</p><p>为什么要 | 呢？</p><p>这要考虑&amp;是怎么运算的了</p><p>在二进制位下，只有两个数字的某一位上都是1，&amp;出来才是1，所以也有一个很显然的问题，&amp;出来的数不一定与区间内的每一个数相等</p><p>但他们的二进制位下，&amp;出来的数的二进制位一定相等，所以每次查询的时候把要查询的那个数对应的二进制位 | 一下就行了</p><p>然后就是线段树的板子吧，这里不能用树状数组，想想为什么</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e6</span>+<span class="hljs-number">10</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br>ll tree[N],lazy[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">updata</span><span class="hljs-params">(<span class="hljs-type">int</span> rt,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,ll w)</span></span>&#123;<br>    tree[rt]=tree[rt]|w;<br>    lazy[rt]=tree[rt]|w;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pushdown</span><span class="hljs-params">(<span class="hljs-type">int</span> rt,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span>&#123;<br>    <span class="hljs-type">int</span> mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">updata</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,lazy[rt]);<br>    <span class="hljs-built_in">updata</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,lazy[rt]);<br>    lazy[rt]=<span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(<span class="hljs-type">int</span> rt,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> s,<span class="hljs-type">int</span> t,ll w)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(s&lt;=l&amp;&amp;r&lt;=t)&#123;<br>        <span class="hljs-built_in">updata</span>(rt,l,r,w);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">pushdown</span>(rt,l,r);<br>    <span class="hljs-type">int</span> mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(s&lt;=mid)<span class="hljs-built_in">modify</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,s,t,w);<br>    <span class="hljs-keyword">if</span>(t&gt;mid)<span class="hljs-built_in">modify</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,s,t,w);<br>    tree[rt]=tree[rt&lt;&lt;<span class="hljs-number">1</span>]&amp;tree[rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>];<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> rt,<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> s,<span class="hljs-type">int</span> t)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(s&lt;=l&amp;&amp;t&gt;=r)<span class="hljs-keyword">return</span> tree[rt];<br>    <span class="hljs-built_in">pushdown</span>(rt,l,r);<br>    <span class="hljs-type">int</span> mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(t&lt;=mid)<span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,s,t);<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s&gt;mid)<span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,s,t);<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(rt&lt;&lt;<span class="hljs-number">1</span>,l,mid,s,t)&amp;<span class="hljs-built_in">query</span>(rt&lt;&lt;<span class="hljs-number">1</span>|<span class="hljs-number">1</span>,mid+<span class="hljs-number">1</span>,r,s,t);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> m,n,t;<span class="hljs-type">bool</span> flag;<br>    <span class="hljs-built_in">freopen</span>(<span class="hljs-string">&quot;kuai.in&quot;</span>,<span class="hljs-string">&quot;r&quot;</span>,stdin);<br>    <span class="hljs-built_in">freopen</span>(<span class="hljs-string">&quot;kuai.out&quot;</span>,<span class="hljs-string">&quot;w&quot;</span>,stdout);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;t);<br>    <span class="hljs-keyword">while</span>(t--)&#123;<br>        flag=<span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">memset</span>(tree,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(tree));<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>            <span class="hljs-type">int</span> l,r;<br>            ll w;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%lld&quot;</span>,&amp;l,&amp;r,&amp;w);<br>            <span class="hljs-built_in">modify</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,l,r,w);<br>            ll data=<span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,n,l,r);<br>            <span class="hljs-keyword">if</span>(data!=w)flag=<span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(flag)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;YES\n&quot;</span>);<br>        <span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NO\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>早期水题</category>
      
    </categories>
    
    
    <tags>
      
      <tag>线段树</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NOI ONLINE 提高组 序列</title>
    <link href="/2020/03/08/noionline/"/>
    <url>/2020/03/08/noionline/</url>
    
    <content type="html"><![CDATA[<h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><span id="more"></span><p>小 D 有一个长度为 $n$ 的整数序列 $a_{1 \dots n}$，她想通过若干次操作把它变成序列 $b_i$。</p><p>小 D 有 $m$ 种可选的操作，第 $i$ 种操作可使用三元组 $(t_i,u_i,v_i)$ 描述：若 $t_i=1$，则她可以使 $a_{u_i}$ 与 $a_{v_i}$ 都加一或都减一；若 $t_i=2$，则她可以使 $a_{u_i}$ 减一、$a_{v_i}$ 加一，或是 $a_{u_i}$ 加一、$a_{v_i}$ 减一，因此当 $u_i=v_i$ 时，这种操作相当于没有操作。</p><p>小 D 可以以任意顺序执行操作，且每种操作都可进行无限次。现在给定序列与所有操作，请你帮她判断是否存在一种方案能将 $a_i$ 变为 $b_i$。题目保证两个序列长度都为 $n$。若方案存在请输出 <code>YES</code>，否则输出 <code>NO</code>。</p><h1 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h1><p>本题输入文件包含多组数据。</p><p>第一行一个正整数 $T$ 表示数据组数。对于每组数据：</p><p>第一行两个整数 $n,m$，表示序列长度与操作种数。</p><p>第二行 $n$ 个整数表示序列 $a_i$。</p><p>第三行 $n$ 个整数表示序列 $b_i$。</p><p>接下来 $m$ 行每行三个整数 $t_i,u_i,v_i$，第 $i$ 行描述操作 $i$。</p><p>注意：同一个三元组 $(t_i,u_i,v_i)$ 可能在输入中出现多次。</p><h1 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h1><p>对于每组数据输出一行一个字符串 <code>YES</code> 或 <code>NO</code> 表示答案。</p><h1 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h1><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span><br><span class="hljs-number">1</span><br><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">3</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">5 </span><span class="hljs-number">5</span> <span class="hljs-number">4</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">1</span> <span class="hljs-number">3</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h1 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h1><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">YES</span><br><span class="hljs-keyword">YES</span><br><span class="hljs-keyword">YES</span><br></code></pre></td></tr></table></figure><h1 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h1><p>第一组数据：使用一次操作 $1$。<br>第二组数据：使用三次操作 $1$。<br>第三组数据：使用三次操作 $1$，令 $a_1,a_2$ 都增加 $3$，再使用一次操作 $2$，令 $a_1,a_3$ 都增加 $1$。</p><h1 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h1><p>对于测试点 $1 \sim 5$：$n=2$，$m=1$，$a_i,b_i \le 99$，$u_1 \ne v_1$，$t_1=1$。<br>对于测试点 $6 \sim 10$：$n=2$，$m=1$，$a_i,b_i \le 99$，$u_1 \ne v_1$，$t_1=2$。<br>对于测试点 $11 \sim 12$：$n=2$，$a_i,b_i \le 99$，$u_i \ne v_i$。<br>对于测试点 $13 \sim 16$：$t_i=2$。<br>对于测试点 $17$：$n,m \le 20$。<br>对于测试点 $18$：$n,m \le 10^3$。<br>对于所有测试点：$1 \le T \le 10$，$1 \le n,m \le 10^5$，$1 \le a_i,b_i \le 10^9$，$t_i \in {1,2}$，$1\le u_i,v_i \le n$。</p><h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>说实话第一眼看到这题的时候我有点懵，真不知道怎么做，不过一看数据，还好还好，暴力能拿一半分，于是我就真拿了一半分。。。。。</p><p>但某大佬说暴力能拿60，但我拿一半就满意了   我不会啊</p><p>考完后忍不住好奇这道题要怎么做，于是就看了看题解，发现题解也。。。有点难懂，主要是我看到一个字，图？？这明明是个数的问题咋还和图扯上了关系，awsl，果然还是我太菜了</p><p>仔细读了一下，明白了一些。先看操作一：如果有(a1,a2)(a2,a3)(a3,a1),那么其中任意一个数都能自己加减二，如a1，a1+1,a2+1,a2-1,a3-1,a3+1,a1+1这样就能让a1自己加减二，同理a1换成任何数都可以，这里要注意，必须是奇数个点并且形成环才能这样办，所以每个奇数环上的数都能加减二，偶数个点为什么不行自己举个例子就明白了。再看操作二：如果有(a1,a2)(a2,a3)那么可以知道(a1,a3)，a1+1,a2-1,a2+1,a3-1由此,a1+1，a3-1，可见操作二是具有传递性的，如果把它们看做是一个联通块，那么这个联通块可以任意加1，减1，所以如果这个联通块需要加的值和需要减的值一样，那么就满足。于是我们只要把每个操作二都缩成点，每个操作一建边，然后开始判断每块联通块是不是满足题意。</p><p>判断方法为，如果未形成奇数环，则需要使联通块内相加的数与相减的数相等，因为只能加一减一，否则使需要变化的总数是偶数即可，注意自环也要判断，因为自环相当于(a1,a2,1)(a1,a2,2)即a1+1,a2+1,a2-1,a1+1,这样也能使任意数加减二，</p><p>然后还有就是对于没有边连入的点，只有需要变化的值为0，才满足，因为没有边可以使它产生变化。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">2e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> val[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br>    <span class="hljs-type">int</span> to,next;<br>&#125;e[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br>    <span class="hljs-type">int</span> t,u,v;<br>&#125;p[N];<br><span class="hljs-type">int</span> Head[N],len,sum,flag;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span></span>&#123;<br>    e[++len].to=b;e[len].next=Head[a];Head[a]=len;<br>&#125;<br><span class="hljs-type">int</span> f[N],belong[N],a[N],b[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> f[x]==x?x:(f[x]=<span class="hljs-built_in">find</span>(f[x]));<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Mer</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span></span>&#123;<br>    <span class="hljs-type">int</span> u=<span class="hljs-built_in">find</span>(a),v=<span class="hljs-built_in">find</span>(b);<br>    <span class="hljs-keyword">if</span>(u!=v)&#123;<br>        f[u]=v;val[v]+=val[u];<span class="hljs-comment">//并查集缩点</span><br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> bin)</span></span>&#123;<br>    belong[x]=bin;<br>    <span class="hljs-keyword">if</span>(bin)sum+=val[x];<br>    <span class="hljs-keyword">else</span> sum-=val[x];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=Head[x];i;i=e[i].next)&#123;<br>        <span class="hljs-type">int</span> v=e[i].to;<br>        <span class="hljs-keyword">if</span>(belong[v]==<span class="hljs-number">-1</span>)<span class="hljs-built_in">dfs</span>(v,bin^<span class="hljs-number">1</span>);<span class="hljs-comment">//利用了^的性质</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(belong[x]==belong[v])<span class="hljs-comment">//说明v已经被提前访问过并且bin的值与x一样，那么就一定形成了奇数环</span><br>            flag=<span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-comment">//    freopen(&quot;a.txt&quot;,&quot;r&quot;,stdin);</span><br>    <span class="hljs-type">int</span> t;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;t);<br>    <span class="hljs-keyword">while</span>(t--)&#123;<br>        <span class="hljs-type">int</span> m,n,ans=<span class="hljs-number">1</span>;len=<span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;a[i]);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;b[i]),val[i]=b[i]-a[i];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)<br>            f[i]=i,belong[i]=<span class="hljs-number">-1</span>,Head[i]=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>,&amp;p[i].t,&amp;p[i].u,&amp;p[i].v);<br>            <span class="hljs-keyword">if</span>(p[i].t==<span class="hljs-number">2</span>)&#123;<br>                <span class="hljs-built_in">Mer</span>(p[i].u,p[i].v);<span class="hljs-comment">//合并操作二</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++)&#123;<br>            <span class="hljs-keyword">if</span>(p[i].t==<span class="hljs-number">1</span>)&#123;<br>                <span class="hljs-built_in">Ins</span>(<span class="hljs-built_in">find</span>(p[i].u),<span class="hljs-built_in">find</span>(p[i].v));<span class="hljs-comment">//这里已经缩点所以要合并根</span><br>                <span class="hljs-built_in">Ins</span>(<span class="hljs-built_in">find</span>(p[i].v),<span class="hljs-built_in">find</span>(p[i].u));<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(i)==i&amp;&amp;belong[i]==<span class="hljs-number">-1</span>)&#123;<br>                flag=sum=<span class="hljs-number">0</span>;<br>                <span class="hljs-built_in">dfs</span>(i,<span class="hljs-number">0</span>);<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> x=Head[i];x;x=e[x].next)&#123;<br>                    <span class="hljs-keyword">if</span>(e[x].to==i)flag=<span class="hljs-number">1</span>;<span class="hljs-comment">//自环</span><br>                &#125;<br>                <span class="hljs-keyword">if</span>(Head[i]==<span class="hljs-number">0</span>&amp;&amp;sum!=<span class="hljs-number">0</span>)ans=<span class="hljs-number">0</span>;<span class="hljs-comment">//没有边连入</span><br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(flag==<span class="hljs-number">1</span>&amp;&amp;sum%<span class="hljs-number">2</span>!=<span class="hljs-number">0</span>)ans=<span class="hljs-number">0</span>;<span class="hljs-comment">//奇数环</span><br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(flag==<span class="hljs-number">0</span>&amp;&amp;sum!=<span class="hljs-number">0</span>)ans=<span class="hljs-number">0</span>;<span class="hljs-comment">//偶数环</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(ans)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;YES\n&quot;</span>);<br>        <span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NO\n&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>思维题</category>
      
    </categories>
    
    
    <tags>
      
      <tag>图论</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>POJ 1062 昂贵的聘礼</title>
    <link href="/2020/03/07/poj1062/"/>
    <url>/2020/03/07/poj1062/</url>
    
    <content type="html"><![CDATA[<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>年轻的探险家来到了一个印第安部落里。在那里他和酋长的女儿相爱了，于是便向酋长去求亲。</p><span id="more"></span><p>酋长要他用10000个金币作为聘礼才答应把女儿嫁给他。探险家拿不出这么多金币，便请求酋长降低要求。酋长说：”嗯，如果你能够替我弄到大祭司的皮袄，我可以只要8000金币。如果你能够弄来他的水晶球，那么只要5000金币就行了。”探险家就跑到大祭司那里，向他要求皮袄或水晶球，大祭司要他用金币来换，或者替他弄来其他的东西，他可以降低价格。探险家于是又跑到其他地方，其他人也提出了类似的要求，或者直接用金币换，或者找到其他东西就可以降低价格。不过探险家没必要用多样东西去换一样东西，因为不会得到更低的价格。探险家现在很需要你的帮忙，让他用最少的金币娶到自己的心上人。另外他要告诉你的是，在这个部落里，等级观念十分森严。地位差距超过一定限制的两个人之间不会进行任何形式的直接接触，包括交易。他是一个外来人，所以可以不受这些限制。但是如果他和某个地位较低的人进行了交易，地位较高的的人不会再和他交易，他们认为这样等于是间接接触，反过来也一样。因此你需要在考虑所有的情况以后给他提供一个最好的方案。 <br>为了方便起见，我们把所有的物品从1开始进行编号，酋长的允诺也看作一个物品，并且编号总是1。每个物品都有对应的价格P，主人的地位等级L，以及一系列的替代品Ti和该替代品所对应的”优惠”Vi。如果两人地位等级差距超过了M，就不能”间接交易”。你必须根据这些数据来计算出探险家最少需要多少金币才能娶到酋长的女儿。 </p><h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>输入第一行是两个整数M，N（1 &lt;= N &lt;= 100），依次表示地位等级差距限制和物品的总数。接下来按照编号从小到大依次给出了N个物品的描述。每个物品的描述开头是三个非负整数P、L、X（X &lt; N），依次表示该物品的价格、主人的地位等级和替代品总数。接下来X行每行包括两个整数T和V，分别表示替代品的编号和”优惠价格”。</p><h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>输出最少需要的金币数。</p><h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">4</span><br><span class="hljs-symbol">10000 </span><span class="hljs-number">3</span> <span class="hljs-number">2</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">8000</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">5000</span><br><span class="hljs-symbol">1000 </span><span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">200</span><br><span class="hljs-symbol">3000 </span><span class="hljs-number">2</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">200</span><br><span class="hljs-symbol">50 </span><span class="hljs-number">2</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-number">5250</span><br></code></pre></td></tr></table></figure><h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>输出最小的金币数，这道题首先想到的就是建图跑最小路，我最开始用的方法是根据所给信息把边权和点权都加上，然后在跑Dij的时候判断</p><p>如果选择边权，那么还要加和这个点的儿子的权，如果选择点权就不用，然后统计到各个点最小距离。</p><p>打了一下样例没过，然后回去想，发现加的是双向边，于是又加了一个vis数组判断是否访问过，这次样例过了，交上去WA</p><p>再仔细想一下，先不管我的点权和边权处理有没有问题，就一个问题是很难解决的，就是终点是什么，不一定所有的点都能当做本次统计的终点</p><p>也就是说它会直接返回最小值，不管这个最小值是不是已经把所有需要的点权边权都包括进去了，比如我要买二号物品来降低一号物品价格，在统计</p><p>到二号物品的路程时，直接返回了边权，但点权也是应该加上的，所以没有选完全，我感觉还是我的程序有问题　</p><p>重新思考，有没有一种方法能够让程序自动判断选择边权还是点权，并且终点是一样的？</p><p>受如果使用该物品的话边权和点权必选其一的启发，我们可以采用超级源点，即把所有的点的点权作为这个点和超级源点的边权，于是又跑一遍</p><p>又没过样例，这次我发现一个问题，我加的是双向边，而加双向边是肯定不行的，因为边权表示买二号物品得到三号物品的优惠，如果加双向的话就</p><p>表明买三号物品也能得到二号物品的优惠，这显然是不对的，于是我们考虑边的方向，从源点出来，边的去向一定是指向每个点，因为我们是以源点</p><p>为起点，一号物品为终点跑的Dij，所以输入时，如果买a对b有优惠，那么Add_Edge(a-&gt;b)，这样就可以保证终点是一样的，且最短路径上每个点的</p><p>点权或边权都被选完全了。</p><p>修改完代码，测了测样例，对了！然后交上去，WA。。。。</p><p>接着我思考半天后找到了我最开始过深考虑的问题——等级，我起初是怎么处理的呢？我在建图时判断，如果一个点的等级与第一物品的差值的</p><p>绝对值小于m，就不加这个点及其周围的边。这么看好像是对的，举个例子，m=3，level[1]=8,我们买了level[2]=6,level[3]=10的两个物品，由题意，</p><p>这不被允许，所以不能这么判断，但这给了我一个启发：买的物品价值范围（levelmax-levelmin&lt;=m）,所以我们可以考虑枚举物品的价值范围，每次</p><p>对于枚举的范围进行Dij求最短路，输出最短的路径即可。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">110</span>,INF=<span class="hljs-number">0x3f3f3f3f</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span>&#123;<br>    <span class="hljs-type">int</span> to,next,val;<br>&#125;e[N*N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>&#123;<br>    <span class="hljs-type">int</span> id,val;<br>    <span class="hljs-built_in">Node</span>()&#123;&#125;;<br>    <span class="hljs-built_in">Node</span>(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)&#123;id=a;val=b;&#125;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> Node&amp;A)<span class="hljs-type">const</span> &#123;<br>        <span class="hljs-keyword">return</span> val&gt;A.val;<br>    &#125;<br>&#125;;<br><span class="hljs-type">int</span> Head[N],len,lev[N],ans,m,n,dis[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b,<span class="hljs-type">int</span> c)</span></span>&#123;<br>    e[++len].to=b;e[len].val=c;<br>    e[len].next=Head[a];Head[a]=len;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dij</span><span class="hljs-params">(<span class="hljs-type">int</span> level)</span></span>&#123;<br>    priority_queue&lt;Node&gt; q;<br>    <span class="hljs-built_in">memset</span>(dis,<span class="hljs-number">0x3f</span>,<span class="hljs-built_in">sizeof</span>(dis));<br>    dis[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>    q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">Node</span>(<span class="hljs-number">0</span>,dis[<span class="hljs-number">0</span>]));<br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())&#123;<br>        Node u=q.<span class="hljs-built_in">top</span>();q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> x=Head[u.id];x;x=e[x].next)&#123;<br>            <span class="hljs-type">int</span> v=e[x].to;<br>            <span class="hljs-keyword">if</span>(lev[v]-level&gt;m||lev[v]&lt;level)<span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span>(dis[v]&gt;dis[u.id]+e[x].val)&#123;<br>                dis[v]=dis[u.id]+e[x].val;<br>                q.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">Node</span>(v,dis[v]));<br>            &#125;<br>        &#125;<br>    &#125;<br>    ans=<span class="hljs-built_in">min</span>(ans,dis[<span class="hljs-number">1</span>]);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">// freopen(&quot;a.txt&quot;,&quot;r&quot;,stdin);</span><br>    <span class="hljs-type">int</span> selfval;<br>    ans=INF;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;m,&amp;n);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>        <span class="hljs-type">int</span> c;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>,&amp;selfval,&amp;lev[i],&amp;c);<br>        <span class="hljs-built_in">Ins</span>(<span class="hljs-number">0</span>,i,selfval);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=c;j++)&#123;<br>            <span class="hljs-type">int</span> a,b;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);<br>            <span class="hljs-built_in">Ins</span>(a,i,b);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=lev[<span class="hljs-number">1</span>]-m;i&lt;=lev[<span class="hljs-number">1</span>];i++)<br>        <span class="hljs-built_in">dij</span>(i);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,ans);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p> </p><p>这个问题看起来还是比较难的，但是想明白以后也比较简单，下次在做题的时候一定把问题先想清楚，边做边想太难了。。。。。。</p><p> </p>]]></content>
    
    
    <categories>
      
      <category>早期水题</category>
      
    </categories>
    
    
    <tags>
      
      <tag>最短路</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>某年元宵节大礼包</title>
    <link href="/2020/03/07/hzoi0001/"/>
    <url>/2020/03/07/hzoi0001/</url>
    
    <content type="html"><![CDATA[<h1 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h1><p>乐是做作业，给定正整数 N,M，要求计算Concatenate（1……N）mod M的值，其中Concatenate是指将1到N拼起来得到的数。如N=13，Concatenate=12345678910111213</p><span id="more"></span><h1 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h1><p>一行两个整数，N，M</p><h1 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h1><p>一个非负整数表示计算结果</p><h1 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h1><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">13 </span><span class="hljs-number">13</span><br></code></pre></td></tr></table></figure><h1 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">4<br></code></pre></td></tr></table></figure><h1 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h1><p>$n \leq 10^{18},m\leq 10^9$ </p><h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>第一眼看到这题：暴力模拟</p><p>然后看到数据表示无语，1e18啊，这拼起来得多大</p><p>不管了先弄一个模拟：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> s;<br><span class="hljs-type">int</span> n, m;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">wei</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>    <span class="hljs-type">int</span> s = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (x) &#123;<br>        s++;<br>        x /= <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> s;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">freopen</span>(<span class="hljs-string">&quot;le.in&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, stdin);<br>    <span class="hljs-built_in">freopen</span>(<span class="hljs-string">&quot;le.out&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>, stdout);<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        s = (s * <span class="hljs-built_in">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-built_in">wei</span>(i)) + i),<br>        s = s % m;<br>    cout &lt;&lt; s;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>这个应该很好懂，就不解释了，30分</p><p>作为一个合格的OI选手，一定是要考虑正解的。</p><p>设ans[i]表示拼接到i位时的答案，我们很容易得到递推式：</p><p>ans[i]=(ans[i-1]*p+i)%mod; </p><p>其中p表示当前i的位数乘十，先不考虑mod，比如ans[4]=123*10+4；</p><p>于是这又是一个递推式问题，那么怎么办呢？暴力跑一遍?1e18的数据不TLE算我输</p><p>所以这个时候矩阵快速幂来了……</p><p>可以设一个矩阵A为</p><p>{ans[i]  i  1} 反正我是习惯开一维数组。。。。</p><p>然后另一个矩阵K为</p><p>{p　0　0}</p><p>{1　1　0}</p><p>{1　1　1}</p><p>这样A*K就能得到{ans[i]*p+i  i+1  1}即{ans[i+1]  i+1  1}</p><p>是不是很巧妙，所以不难看出上述A中的1的作用——与ans[i],凑出ans[i+1]和i+1.</p><p>接着考虑乘多少次方的问题，我们从i=0开始，如果n=4，那么显然要乘四次；</p><p>如果n=14呢？从0到9，一共要乘9次，然后再从10到14乘5次</p><p>接着多次进行迭代不难发现，我们可以用变量data拷贝n</p><p>如果n&gt;=p就乘9*p/10次，data减去乘的值</p><p>当n &lt; p 时说明不够乘了，所以直接乘以data次</p><p>最后跑快速幂就行了</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ull;<br>ull n,mod,a[<span class="hljs-number">4</span>],c[<span class="hljs-number">4</span>][<span class="hljs-number">4</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Mul</span><span class="hljs-params">()</span></span>&#123;<br>    ull cp[<span class="hljs-number">4</span>];<br>    <span class="hljs-built_in">memset</span>(cp,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(cp));<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">3</span>;i++)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-number">3</span>;j++)&#123;<br>            cp[i]+=((a[j]%mod)*(c[j][i]%mod))%mod;<br>            <span class="hljs-comment">//乘之前一定要mod一下不然两个数乘积可能超出longlong</span><br>            cp[i]%=mod;<br>        &#125;  <br>    &#125;<br>    <span class="hljs-built_in">memcpy</span>(a,cp,<span class="hljs-built_in">sizeof</span>(cp));<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Mulself</span><span class="hljs-params">()</span></span>&#123;<br>    ull cp[<span class="hljs-number">4</span>][<span class="hljs-number">4</span>];<br>    <span class="hljs-built_in">memset</span>(cp,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(cp));<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">3</span>;i++)<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-number">3</span>;j++)<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">1</span>;k&lt;=<span class="hljs-number">3</span>;k++)&#123;<br>                cp[i][j]+=((c[i][k]%mod)*(c[k][j]%mod))%mod;<br>                cp[i][j]%=mod;<br>            &#125;<br>    <span class="hljs-built_in">memcpy</span>(c,cp,<span class="hljs-built_in">sizeof</span>(cp));<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%llu%llu&quot;</span>,&amp;n,&amp;mod);<br>    a[<span class="hljs-number">1</span>]=<span class="hljs-number">0</span>;a[<span class="hljs-number">2</span>]=<span class="hljs-number">0</span>;a[<span class="hljs-number">3</span>]=<span class="hljs-number">1</span>;<br>    ull mx=n*<span class="hljs-number">10</span>,data=n;<br>    <span class="hljs-keyword">for</span>(ull p=<span class="hljs-number">10LL</span>;p&lt;=mx;p*=<span class="hljs-number">10LL</span>)&#123;<br>        c[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=p;c[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]=<span class="hljs-number">0</span>;c[<span class="hljs-number">1</span>][<span class="hljs-number">3</span>]=<span class="hljs-number">0</span>;<br>        c[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;c[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>]=<span class="hljs-number">1</span>;c[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>]=<span class="hljs-number">0</span>;<br>        c[<span class="hljs-number">3</span>][<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;c[<span class="hljs-number">3</span>][<span class="hljs-number">2</span>]=<span class="hljs-number">1</span>;c[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>]=<span class="hljs-number">1</span>;<br>        ull x;<br>        <span class="hljs-keyword">if</span>(n&gt;=p)&#123;<br>            x=<span class="hljs-number">9LL</span>*p/<span class="hljs-number">10LL</span>;<br>            data-=x;<br>        &#125;<br>        <span class="hljs-keyword">else</span> x=data;<br>        <span class="hljs-keyword">while</span>(x)&#123;<br>            <span class="hljs-keyword">if</span>(x&amp;<span class="hljs-number">1</span>)<span class="hljs-built_in">Mul</span>();<br>            x&gt;&gt;=<span class="hljs-number">1</span>;<br>            <span class="hljs-built_in">Mulself</span>();<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%llu\n&quot;</span>,a[<span class="hljs-number">1</span>]);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>早期水题</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数学</tag>
      
      <tag>矩阵快速幂</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HDU 3303 Harmony Forever</title>
    <link href="/2020/03/07/HDU3303/"/>
    <url>/2020/03/07/HDU3303/</url>
    
    <content type="html"><![CDATA[<h1 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h1><p>We believe that every inhabitant of this universe eventually will find a way to live together in harmony and peace; that trust, patience, kindness and loyalty will exist between every living being of this earth; people will find a way to appreciate and cooperate with each other instead of continuous bickering, arguing and fighting. Harmony – the stage of society so many people dream of and yet it seems so far away from now …</p><span id="more"></span><p>Fortunately, the method of unlocking the key to true Harmony is just discovered by a group of philosophers. It is recorded on a strange meteorite which has just hit the earth. You need to decipher the true meaning behind those seemingly random symbols … More precisely, you are to write a program which will support the following two kinds of operation on an initially empty set S :</p><ol><li>B X : Add number X to set S . The Kth command in the form of B X always happens at time K , and number X does not belong to set S before this operation.</li><li>A Y : Of all the numbers in set S currently, find the one which has the minimum remainder when divided by Y . In case a tie occurs, you should choose the one which appeared latest in the input. Report the time when this element is inserted.<br>It is said that if the answer can be given in the minimum possible time, true Harmony can be achieved by human races. You task is to write a program to help us.</li></ol><h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>There are multiple test cases in the input file. Each test case starts with one integer T where 1&lt;=T&lt;=40000 . The following T lines each describe an operation, either in the form of “B X “ or “A Y “ where 1&lt;=X , Y&lt;=500000 .</p><p>T = 0 indicates the end of input file and should not be processed by your program.</p><h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>Print the result of each test case in the format as indicated in the sample output. For every line in the form of “A Y “, you should output one number, the requested number, on a new line; output -1 if no such number can be found. Separate the results of two successive inputs with one single blank line.</p><h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5</span><br><span class="hljs-attribute">B</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">A</span> <span class="hljs-number">5</span><br><span class="hljs-attribute">B</span> <span class="hljs-number">10</span><br><span class="hljs-attribute">A</span> <span class="hljs-number">5</span><br><span class="hljs-attribute">A</span> <span class="hljs-number">40</span><br><span class="hljs-attribute">2</span><br><span class="hljs-attribute">B</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">A</span> <span class="hljs-number">2</span><br><span class="hljs-attribute">0</span><br></code></pre></td></tr></table></figure><h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">Case</span> <span class="hljs-number">1</span>:<br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">1</span><br><span class="hljs-keyword">Case</span> <span class="hljs-number">2</span>:<br><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h1 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h1><p><del>让你拯救世界</del></p><p>给定一空集合，有两种操作，往集合里加数或者求出集合中的数在mod k意义下最小值是第几个加入的，相等的话输出最后加入的</p><h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>不管怎么样先想一个暴力吧，单开一个数组记录往里边加的数，下边i表示加入时间，每次查询遍历一遍数组就行　</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">1e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">char</span> ss[<span class="hljs-number">5</span>];<br>    <span class="hljs-type">int</span> num,t,cas=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;t))&#123;<br>        <span class="hljs-type">int</span> len=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span>(t==<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span>(cas)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Case %d:\n&quot;</span>,++cas);<br>        <span class="hljs-keyword">while</span>(t--)&#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s%d&quot;</span>,ss,&amp;num);<br>            <span class="hljs-keyword">if</span>(ss[<span class="hljs-number">0</span>]==<span class="hljs-string">&#x27;B&#x27;</span>)<br>                a[++len]=num;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-type">bool</span> flag=<span class="hljs-number">1</span>;<br>                <span class="hljs-type">int</span> Min=num,ans;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=len;i++)&#123;<br>                    <span class="hljs-keyword">if</span>(a[i]%num&lt;=Min)&#123;<br>                        flag=<span class="hljs-number">0</span>;<br>                        Min=a[i]%num;<br>                        ans=i;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">if</span>(flag)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;-1\n&quot;</span>);<br>                <span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,ans);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>抱着试一试的心态交了上去，A了！！！没错它A了，但显然这不是正解，只是HDU数据水了，我自己手造了一组极限数据就跑了2s多，然后我又把它交到了POJ上，果然是TLE。</p><p>那肯定是要优化咯，怎么优化呢？涉及到mod的问题，如果要mod k在连续长度大于k的区间中，mod k一定会至少有两个数相等，所以我们可以考虑将50w分块，分为0-k-1，k-2k-1…………这样遍历每一块，每一块中最小的数mod k就有可能是答案，于是这个问题就成了，在区间内找到最小的已经出现过的数字，涉及到区间问题，很容易想到线段树和树状数组，但这个问题好像没有必要用线段树，树状数组足以。</p><p>开一棵50w的树状数组，每一个点记录到这个点一共出现了多少数字，接着就是找最小的已经出现过的数，那么不就又是暴力了吗？查找的方法除了暴力就只会二分，于是我们考虑二分查找，怎么二分呢？每次查找区间的时候，对该区间进行二分就行了，那你怎么知道是要向左分还是向右分？用树状数组很容易求得到区间左端点的点总数，取mid，如果到mid的点总数和到左端的点总数相等，说明l到mid之间没有数，改变左端点，如果有就改变右端点，更新最小值，继续二分直到l==r，树状数组的做法就是这样，线段树也大致差不多。</p><p>还有一个问题，如果k过小了，比如k就是1，那么我们就会将区间分成50w块，50w啊！而暴力最多只枚举4w，所以我们可以设置一个值，让k过大的时候直接用暴力。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> limit=<span class="hljs-number">1317</span>;<span class="hljs-comment">//这个数还可以换，让它别太小就行</span><br>                     <span class="hljs-comment">//不要问我为什么非用这个奇怪的数</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">5e5</span>+<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> q[N+<span class="hljs-number">5</span>],tim[N+<span class="hljs-number">5</span>],a[N+<span class="hljs-number">5</span>],len,c[N+<span class="hljs-number">5</span>];<span class="hljs-comment">//多开5，防止RE</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lowbit</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> i&amp;(-i);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Add</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>&#123;<br>    <span class="hljs-keyword">while</span>(x&lt;=N)&#123;<br>        c[x]++;<br>        x+=<span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>&#125;<br><span class="hljs-type">int</span> n,k;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Ins</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>&#123;<br>    tim[++len]=x;<br>    a[x]=len;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=limit;i++)&#123;<br>        <span class="hljs-keyword">if</span>(q[i]==<span class="hljs-number">0</span>)q[i]=len;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x%i&lt;=tim[q[i]]%i)q[i]=len;<span class="hljs-comment">//等于也要替换，因为优先输出后读入的</span><br>    &#125;<br>    <span class="hljs-built_in">Add</span>(x);<span class="hljs-comment">//加到树状数组里统计前缀和</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">front_sum</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>&#123;<br>    <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(x)&#123;<br>        sum+=c[x];<br>        x-=<span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">low_find</span><span class="hljs-params">(<span class="hljs-type">int</span> ll,<span class="hljs-type">int</span> rr)</span></span>&#123;<br>    <span class="hljs-type">int</span> l,r,Min=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span>(ll==<span class="hljs-number">0</span>)l=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span> l=ll;<br>    <span class="hljs-keyword">if</span>(rr&gt;N)r=N;<br>    <span class="hljs-keyword">else</span> r=rr;<br>    <span class="hljs-type">int</span> pre=<span class="hljs-built_in">front_sum</span>(l<span class="hljs-number">-1</span>);<br>    <span class="hljs-keyword">while</span>(l&lt;=r)&#123;<br>        <span class="hljs-type">int</span> mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> now=<span class="hljs-built_in">front_sum</span>(mid);<br>        <span class="hljs-keyword">if</span>(now&gt;pre)&#123;<span class="hljs-comment">//说明mid到l之间出现了值，向左找</span><br>            r=mid<span class="hljs-number">-1</span>;<br>            Min=mid;<br>        &#125;<span class="hljs-keyword">else</span> l=mid+<span class="hljs-number">1</span>;<span class="hljs-comment">//没有值就向右找</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> Min;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(len==<span class="hljs-number">0</span>)&#123;<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;-1\n&quot;</span>);<span class="hljs-keyword">return</span>;&#125;<br>    <span class="hljs-keyword">if</span>(x&lt;=limit)&#123;<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,q[x]);<span class="hljs-keyword">return</span>;&#125;<br>    <span class="hljs-type">int</span> l=<span class="hljs-number">0</span>,r=x<span class="hljs-number">-1</span>,ans=x<span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">while</span>(l&lt;=N)&#123;<span class="hljs-comment">//判断左边界，判断右边界的话取值可能不完全</span><br>        <span class="hljs-type">int</span> now=<span class="hljs-built_in">low_find</span>(l,r);<br>        <span class="hljs-keyword">if</span>(now&amp;&amp;(now%x&lt;ans%x||now%x==ans%x&amp;&amp;a[now]&gt;a[ans]))&#123;<br>        <span class="hljs-comment">//等于和小于两种情况分开写，合在一起不行</span><br>            ans=now;<br>        &#125;<br>        l+=x;r+=x;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,a[ans]);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span>    cas=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n))&#123;<br>        <span class="hljs-keyword">if</span>(n==<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=N;i++)&#123;<br>            tim[i]=a[i]=c[i]=q[i]=<span class="hljs-number">0</span>;<br>        &#125;<br>        len=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span>(cas)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Case %d:\n&quot;</span>,++cas);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;<br>            <span class="hljs-type">char</span> ss[<span class="hljs-number">5</span>];<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s%d&quot;</span>,ss,&amp;k);<br>            <span class="hljs-keyword">if</span>(ss[<span class="hljs-number">0</span>]==<span class="hljs-string">&#x27;A&#x27;</span>)<span class="hljs-built_in">calc</span>(k);<br>            <span class="hljs-keyword">else</span> <span class="hljs-built_in">Ins</span>(k);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>早期水题</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前缀和</tag>
      
      <tag>树状数组</tag>
      
      <tag>线段树</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
